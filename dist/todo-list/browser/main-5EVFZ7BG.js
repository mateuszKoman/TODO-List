import{A as Mn,B as Ji,C as Hb,D as qb,E as er,F as Fu,G as ze,H as Wn,I as Am,a as ee,b as Re,c as bm,d as T,e as Ob,f as ku,g as Fb,h as Lb,i as Vb,j as jb,k as Cm,l as Bb,m as pc,n as Tm,o as rs,p as Ub,q as $b,r as Pu,s as os,t as Sm,u as Ue,v as on,w as Gn,x as Nu,y as mc,z as Ou}from"./chunk-5H6NM5LT.js";function zb(t,e){return Object.is(t,e)}var _t=null,Lu=!1,Vu=1,Ei=Symbol("SIGNAL");function Ae(t){let e=_t;return _t=t,e}var Bu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Mm(t){if(Lu)throw new Error("");if(_t===null)return;_t.consumerOnSignalRead(t);let e=_t.nextProducerIndex++;if(ss(_t),e<_t.producerNode.length&&_t.producerNode[e]!==t&&gc(_t)){let n=_t.producerNode[e];Uu(n,_t.producerIndexOfThis[e])}_t.producerNode[e]!==t&&(_t.producerNode[e]=t,_t.producerIndexOfThis[e]=gc(_t)?Yb(t,_t,e):0),_t.producerLastReadVersion[e]=t.version}function aO(){Vu++}function Gb(t){if(!(gc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Vu)){if(!t.producerMustRecompute(t)&&!Nm(t)){t.dirty=!1,t.lastCleanEpoch=Vu;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Vu}}function Wb(t){if(t.liveConsumerNode===void 0)return;let e=Lu;Lu=!0;try{for(let n of t.liveConsumerNode)n.dirty||cO(n)}finally{Lu=e}}function Kb(){return _t?.consumerAllowSignalWrites!==!1}function cO(t){t.dirty=!0,Wb(t),t.consumerMarkedDirty?.(t)}function km(t){return t&&(t.nextProducerIndex=0),Ae(t)}function Pm(t,e){if(Ae(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(gc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Uu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Nm(t){ss(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(Gb(n),i!==n.version))return!0}return!1}function Qb(t){if(ss(t),gc(t))for(let e=0;e<t.producerNode.length;e++)Uu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Yb(t,e,n){if(Zb(t),ss(t),t.liveConsumerNode.length===0)for(let i=0;i<t.producerNode.length;i++)t.producerIndexOfThis[i]=Yb(t.producerNode[i],t,i);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Uu(t,e){if(Zb(t),ss(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)Uu(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];ss(r),r.producerIndexOfThis[i]=e}}function gc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ss(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Zb(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Xb(t){let e=Object.create(lO);e.computation=t;let n=()=>{if(Gb(e),Mm(e),e.value===ju)throw e.error;return e.value};return n[Ei]=e,n}var xm=Symbol("UNSET"),Rm=Symbol("COMPUTING"),ju=Symbol("ERRORED"),lO=Re(ee({},Bu),{value:xm,dirty:!0,error:null,equal:zb,producerMustRecompute(t){return t.value===xm||t.value===Rm},producerRecomputeValue(t){if(t.value===Rm)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Rm;let n=km(t),i;try{i=t.computation()}catch(r){i=ju,t.error=r}finally{Pm(t,n)}if(e!==xm&&e!==ju&&i!==ju&&t.equal(e,i)){t.value=e;return}t.value=i,t.version++}});function uO(){throw new Error}var Jb=uO;function e0(){Jb()}function t0(t){Jb=t}var dO=null;function n0(t){let e=Object.create(r0);e.value=t;let n=()=>(Mm(e),e.value);return n[Ei]=e,n}function Om(t,e){Kb()||e0(),t.equal(t.value,e)||(t.value=e,hO(t))}function i0(t,e){Kb()||e0(),Om(t,e(t.value))}var r0=Re(ee({},Bu),{equal:zb,value:void 0});function hO(t){t.version++,aO(),Wb(t),dO?.()}function re(t){return typeof t=="function"}function as(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var $u=as(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Kr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Pe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(re(i))try{i()}catch(o){e=o instanceof $u?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{o0(o)}catch(s){e=e??[],s instanceof $u?e=[...e,...s.errors]:e.push(s)}}if(e)throw new $u(e)}}add(e){var n;if(e&&e!==this)if(this.closed)o0(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Kr(n,e)}remove(e){let{_finalizers:n}=this;n&&Kr(n,e),e instanceof t&&e._removeParent(this)}};Pe.EMPTY=(()=>{let t=new Pe;return t.closed=!0,t})();var Fm=Pe.EMPTY;function Hu(t){return t instanceof Pe||t&&"closed"in t&&re(t.remove)&&re(t.add)&&re(t.unsubscribe)}function o0(t){re(t)?t():t.unsubscribe()}var kn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var cs={setTimeout(t,e,...n){let{delegate:i}=cs;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=cs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function qu(t){cs.setTimeout(()=>{let{onUnhandledError:e}=kn;if(e)e(t);else throw t})}function Ii(){}var s0=Lm("C",void 0,void 0);function a0(t){return Lm("E",void 0,t)}function c0(t){return Lm("N",t,void 0)}function Lm(t,e,n){return{kind:t,value:e,error:n}}var Qr=null;function ls(t){if(kn.useDeprecatedSynchronousErrorHandling){let e=!Qr;if(e&&(Qr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=Qr;if(Qr=null,n)throw i}}else t()}function l0(t){kn.useDeprecatedSynchronousErrorHandling&&Qr&&(Qr.errorThrown=!0,Qr.error=t)}var Yr=class extends Pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Hu(e)&&e.add(this)):this.destination=mO}static create(e,n,i){return new Di(e,n,i)}next(e){this.isStopped?jm(c0(e),this):this._next(e)}error(e){this.isStopped?jm(a0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?jm(s0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},fO=Function.prototype.bind;function Vm(t,e){return fO.call(t,e)}var Bm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){zu(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){zu(i)}else zu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){zu(n)}}},Di=class extends Yr{constructor(e,n,i){super();let r;if(re(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&kn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Vm(e.next,o),error:e.error&&Vm(e.error,o),complete:e.complete&&Vm(e.complete,o)}):r=e}this.destination=new Bm(r)}};function zu(t){kn.useDeprecatedSynchronousErrorHandling?l0(t):qu(t)}function pO(t){throw t}function jm(t,e){let{onStoppedNotification:n}=kn;n&&cs.setTimeout(()=>n(t,e))}var mO={closed:!0,next:Ii,error:pO,complete:Ii};var us=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pn(t){return t}function u0(t){return t.length===0?pn:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var ne=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=yO(n)?n:new Di(n,i,r);return ls(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=d0(i),new i((r,o)=>{let s=new Di({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[us](){return this}pipe(...n){return u0(n)(this)}toPromise(n){return n=d0(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function d0(t){var e;return(e=t??kn.Promise)!==null&&e!==void 0?e:Promise}function gO(t){return t&&re(t.next)&&re(t.error)&&re(t.complete)}function yO(t){return t&&t instanceof Yr||gO(t)&&Hu(t)}function _O(t){return re(t?.lift)}function se(t){return e=>{if(_O(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(t,e,n,i,r){return new yc(t,e,n,i,r)}var yc=class extends Yr{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var ds={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame,{delegate:i}=ds;i&&(e=i.requestAnimationFrame,n=i.cancelAnimationFrame);let r=e(o=>{n=void 0,t(o)});return new Pe(()=>n?.(r))},requestAnimationFrame(...t){let{delegate:e}=ds;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){let{delegate:e}=ds;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};var h0=as(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var z=(()=>{class t extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new Gu(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new h0}next(n){ls(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){ls(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){ls(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?Fm:(this.currentObservers=null,o.push(n),new Pe(()=>{this.currentObservers=null,Kr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new ne;return n.source=this,n}}return t.create=(e,n)=>new Gu(e,n),t})(),Gu=class extends z{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:Fm}};var sn=class extends z{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var _c={now(){return(_c.delegate||Date).now()},delegate:void 0};var vc=class extends z{constructor(e=1/0,n=1/0,i=_c){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=n.now(),a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}};var Wu=class extends Pe{constructor(e,n){super()}schedule(e,n=0){return this}};var wc={setInterval(t,e,...n){let{delegate:i}=wc;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=wc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var tr=class extends Wu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return wc.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&wc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Kr(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var hs=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};hs.now=_c.now;var nr=class extends hs{constructor(e,n=hs.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var Kn=new nr(tr),Um=Kn;var Ku=class extends tr{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var Qu=class extends nr{};var Ec=new Qu(Ku);var Yu=class extends tr{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return i!==null&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=ds.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,i=0){var r;if(i!=null?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);let{actions:o}=e;n!=null&&((r=o[o.length-1])===null||r===void 0?void 0:r.id)!==n&&(ds.cancelAnimationFrame(n),e._scheduled=void 0)}};var Zu=class extends nr{flush(e){this._active=!0;let n=this._scheduled;this._scheduled=void 0;let{actions:i}=this,r;e=e||i.shift();do if(r=e.execute(e.state,e.delay))break;while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}};var Xu=new Zu(Yu);var fs=new ne(t=>t.complete());function Ju(t){return t&&re(t.schedule)}function $m(t){return t[t.length-1]}function ed(t){return re($m(t))?t.pop():void 0}function ir(t){return Ju($m(t))?t.pop():void 0}function f0(t,e){return typeof $m(t)=="number"?t.pop():e}var ps=t=>t&&typeof t.length=="number"&&typeof t!="function";function td(t){return re(t?.then)}function nd(t){return re(t[us])}function id(t){return Symbol.asyncIterator&&re(t?.[Symbol.asyncIterator])}function rd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function vO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var od=vO();function sd(t){return re(t?.[od])}function ad(t){return Fb(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield ku(n.read());if(r)return yield ku(void 0);yield yield ku(i)}}finally{n.releaseLock()}})}function cd(t){return re(t?.getReader)}function ve(t){if(t instanceof ne)return t;if(t!=null){if(nd(t))return wO(t);if(ps(t))return EO(t);if(td(t))return IO(t);if(id(t))return p0(t);if(sd(t))return DO(t);if(cd(t))return bO(t)}throw rd(t)}function wO(t){return new ne(e=>{let n=t[us]();if(re(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function EO(t){return new ne(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function IO(t){return new ne(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,qu)})}function DO(t){return new ne(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function p0(t){return new ne(e=>{CO(t,e).catch(n=>e.error(n))})}function bO(t){return p0(ad(t))}function CO(t,e){var n,i,r,o;return Ob(this,void 0,void 0,function*(){try{for(n=Lb(t);i=yield n.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function mn(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function Bt(t,e=0){return se((n,i)=>{n.subscribe(oe(i,r=>mn(i,t,()=>i.next(r),e),()=>mn(i,t,()=>i.complete(),e),r=>mn(i,t,()=>i.error(r),e)))})}function gn(t,e=0){return se((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function m0(t,e){return ve(t).pipe(gn(e),Bt(e))}function g0(t,e){return ve(t).pipe(gn(e),Bt(e))}function y0(t,e){return new ne(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function _0(t,e){return new ne(n=>{let i;return mn(n,e,()=>{i=t[od](),mn(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>re(i?.return)&&i.return()})}function ld(t,e){if(!t)throw new Error("Iterable cannot be null");return new ne(n=>{mn(n,e,()=>{let i=t[Symbol.asyncIterator]();mn(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function v0(t,e){return ld(ad(t),e)}function w0(t,e){if(t!=null){if(nd(t))return m0(t,e);if(ps(t))return y0(t,e);if(td(t))return g0(t,e);if(id(t))return ld(t,e);if(sd(t))return _0(t,e);if(cd(t))return v0(t,e)}throw rd(t)}function Ct(t,e){return e?w0(t,e):ve(t)}function nt(...t){let e=ir(t);return Ct(t,e)}function E0(t,e){let n=re(t)?t:()=>t,i=r=>r.error(n());return new ne(e?r=>e.schedule(i,0,r):i)}var rr=class t{constructor(e,n,i){this.kind=e,this.value=n,this.error=i,this.hasValue=e==="N"}observe(e){return Hm(this,e)}do(e,n,i){let{kind:r,value:o,error:s}=this;return r==="N"?e?.(o):r==="E"?n?.(s):i?.()}accept(e,n,i){var r;return re((r=e)===null||r===void 0?void 0:r.next)?this.observe(e):this.do(e,n,i)}toObservable(){let{kind:e,value:n,error:i}=this,r=e==="N"?nt(n):e==="E"?E0(()=>i):e==="C"?fs:0;if(!r)throw new TypeError(`Unexpected notification kind ${e}`);return r}static createNext(e){return new t("N",e)}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}};rr.completeNotification=new rr("C");function Hm(t,e){var n,i,r;let{kind:o,value:s,error:a}=t;if(typeof o!="string")throw new TypeError('Invalid notification, missing "kind"');o==="N"?(n=e.next)===null||n===void 0||n.call(e,s):o==="E"?(i=e.error)===null||i===void 0||i.call(e,a):(r=e.complete)===null||r===void 0||r.call(e)}var ud=as(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function I0(t){return t instanceof Date&&!isNaN(t)}function ye(t,e){return se((n,i)=>{let r=0;n.subscribe(oe(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:TO}=Array;function SO(t,e){return TO(e)?t(...e):t(e)}function dd(t){return ye(e=>SO(t,e))}var{isArray:AO}=Array,{getPrototypeOf:xO,prototype:RO,keys:MO}=Object;function D0(t){if(t.length===1){let e=t[0];if(AO(e))return{args:e,keys:null};if(kO(e)){let n=MO(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function kO(t){return t&&typeof t=="object"&&xO(t)===RO}function b0(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function C0(t,e,n,i,r,o,s,a){let c=[],u=0,d=0,f=!1,m=()=>{f&&!c.length&&!u&&e.complete()},y=x=>u<i?I(x):c.push(x),I=x=>{o&&e.next(x),u++;let A=!1;ve(n(x,d++)).subscribe(oe(e,j=>{r?.(j),o?y(j):e.next(j)},()=>{A=!0},void 0,()=>{if(A)try{for(u--;c.length&&u<i;){let j=c.shift();s?mn(e,s,()=>I(j)):I(j)}m()}catch(j){e.error(j)}}))};return t.subscribe(oe(e,y,()=>{f=!0,m()})),()=>{a?.()}}function bi(t,e,n=1/0){return re(e)?bi((i,r)=>ye((o,s)=>e(i,o,r,s))(ve(t(i,r))),n):(typeof e=="number"&&(n=e),se((i,r)=>C0(i,r,t,n)))}function hd(t=1/0){return bi(pn,t)}function T0(){return hd(1)}function qm(...t){return T0()(Ct(t,ir(t)))}function ms(t){return new ne(e=>{ve(t()).subscribe(e)})}function zm(...t){let e=ed(t),{args:n,keys:i}=D0(t),r=new ne(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let f=!1;ve(n[d]).subscribe(oe(o,m=>{f||(f=!0,u--),a[d]=m},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(i?b0(i,a):a),o.complete())}))}});return e?r.pipe(dd(e)):r}var PO=["addListener","removeListener"],NO=["addEventListener","removeEventListener"],OO=["on","off"];function Ic(t,e,n,i){if(re(n)&&(i=n,n=void 0),i)return Ic(t,e,n).pipe(dd(i));let[r,o]=VO(t)?NO.map(s=>a=>t[s](e,a,n)):FO(t)?PO.map(S0(t,e)):LO(t)?OO.map(S0(t,e)):[];if(!r&&ps(t))return bi(s=>Ic(s,e,n))(ve(t));if(!r)throw new TypeError("Invalid event target");return new ne(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function S0(t,e){return n=>i=>t[n](e,i)}function FO(t){return re(t.addListener)&&re(t.removeListener)}function LO(t){return re(t.on)&&re(t.off)}function VO(t){return re(t.addEventListener)&&re(t.removeEventListener)}function fd(t=0,e,n=Um){let i=-1;return e!=null&&(Ju(e)?n=e:i=e),new ne(r=>{let o=I0(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Gm(t=0,e=Kn){return t<0&&(t=0),fd(t,t,e)}function Yt(...t){let e=ir(t),n=f0(t,1/0),i=t;return i.length?i.length===1?ve(i[0]):hd(n)(Ct(i,e)):fs}function Ge(t,e){return se((n,i)=>{let r=0;n.subscribe(oe(i,o=>t.call(e,o,r++)&&i.next(o)))})}function A0(t){return se((e,n)=>{let i=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let u=r;r=null,n.next(u)}s&&n.complete()},c=()=>{o=null,s&&n.complete()};e.subscribe(oe(n,u=>{i=!0,r=u,o||ve(t(u)).subscribe(o=oe(n,a,c))},()=>{s=!0,(!i||!o||o.closed)&&n.complete()}))})}function pd(t,e=Kn){return A0(()=>fd(t,e))}function md(t){return se((e,n)=>{let i=null,r=!1,o;i=e.subscribe(oe(n,void 0,void 0,s=>{o=ve(t(s,md(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function x0(t,e,n,i,r){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(oe(s,d=>{let f=u++;c=a?t(c,d,f):(a=!0,d),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function R0(t){return se((e,n)=>{let i=!1;e.subscribe(oe(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function Ot(t){return t<=0?()=>fs:se((e,n)=>{let i=0;e.subscribe(oe(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function Wm(){return se((t,e)=>{t.subscribe(oe(e,Ii))})}function Km(){return se((t,e)=>{t.subscribe(oe(e,n=>Hm(n,e)))})}function or(t,e=pn){return t=t??jO,se((n,i)=>{let r,o=!0;n.subscribe(oe(i,s=>{let a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function jO(t,e){return t===e}function M0(t=BO){return se((e,n)=>{let i=!1;e.subscribe(oe(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function BO(){return new ud}function gd(t,e){return e?n=>n.pipe(gd((i,r)=>ve(t(i,r)).pipe(ye((o,s)=>e(i,o,r,s))))):se((n,i)=>{let r=0,o=null,s=!1;n.subscribe(oe(i,a=>{o||(o=oe(i,void 0,()=>{o=null,s&&i.complete()}),ve(t(a,r++)).subscribe(o))},()=>{s=!0,!o&&i.complete()}))})}function yd(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Ge((r,o)=>t(r,o,i)):pn,Ot(1),n?R0(e):M0(()=>new ud))}function _d(t,e,n,i){return se((r,o)=>{let s;!e||typeof e=="function"?s=e:{duration:n,element:s,connector:i}=e;let a=new Map,c=I=>{a.forEach(I),I(o)},u=I=>c(x=>x.error(I)),d=0,f=!1,m=new yc(o,I=>{try{let x=t(I),A=a.get(x);if(!A){a.set(x,A=i?i():new z);let j=y(x,A);if(o.next(j),n){let q=oe(A,()=>{A.complete(),q?.unsubscribe()},void 0,void 0,()=>a.delete(x));m.add(ve(n(j)).subscribe(q))}}A.next(s?s(I):I)}catch(x){u(x)}},()=>c(I=>I.complete()),u,()=>a.clear(),()=>(f=!0,d===0));r.subscribe(m);function y(I,x){let A=new ne(j=>{d++;let q=x.subscribe(j);return()=>{q.unsubscribe(),--d===0&&f&&m.unsubscribe()}});return A.key=I,A}})}function Qm(){return se((t,e)=>{t.subscribe(oe(e,n=>{e.next(rr.createNext(n))},()=>{e.next(rr.createComplete()),e.complete()},n=>{e.next(rr.createError(n)),e.complete()}))})}function gs(){return se((t,e)=>{let n,i=!1;t.subscribe(oe(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function Ym(...t){let e=t.length;if(e===0)throw new Error("list of properties cannot be empty.");return ye(n=>{let i=n;for(let r=0;r<e;r++){let o=i?.[t[r]];if(typeof o<"u")i=o;else return}return i})}function Zr(t,e){return se(x0(t,e,arguments.length>=2,!0))}function k0(t={}){let{connector:e=()=>new z,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,c,u=0,d=!1,f=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=c=void 0,d=f=!1},I=()=>{let x=s;y(),x?.unsubscribe()};return se((x,A)=>{u++,!f&&!d&&m();let j=c=c??e();A.add(()=>{u--,u===0&&!f&&!d&&(a=Zm(I,r))}),j.subscribe(A),!s&&u>0&&(s=new Di({next:q=>j.next(q),error:q=>{f=!0,m(),a=Zm(y,n,q),j.error(q)},complete:()=>{d=!0,m(),a=Zm(y,i),j.complete()}}),ve(x).subscribe(s))})(o)}}function Zm(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new Di({next:()=>{i.unsubscribe(),t()}});return ve(e(...n)).subscribe(i)}function Dc(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,k0({connector:()=>new vc(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Xm(t){return Ge((e,n)=>t<=n)}function an(...t){let e=ir(t);return se((n,i)=>{(e?qm(t,n,e):qm(t,n)).subscribe(i)})}function Tt(t,e){return se((n,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();n.subscribe(oe(i,c=>{r?.unsubscribe();let u=0,d=o++;ve(t(c,d)).subscribe(r=oe(i,f=>i.next(e?e(c,f,d,u++):f),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function vd(t,e){return re(e)?Tt(()=>t,e):Tt(()=>t)}function cn(t){return se((e,n)=>{ve(t).subscribe(oe(n,()=>n.complete(),Ii)),!n.closed&&e.subscribe(n)})}function ys(t,e,n){let i=re(t)||e||n?{next:t,error:e,complete:n}:t;return i?se((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(oe(o,c=>{var u;(u=i.next)===null||u===void 0||u.call(i,c),o.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,c),o.error(c)},()=>{var c,u;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):pn}function Jm(...t){let e=ed(t);return se((n,i)=>{let r=t.length,o=new Array(r),s=t.map(()=>!1),a=!1;for(let c=0;c<r;c++)ve(t[c]).subscribe(oe(i,u=>{o[c]=u,!a&&!s[c]&&(s[c]=!0,(a=s.every(pn))&&(s=null))},Ii));n.subscribe(oe(i,c=>{if(a){let u=[c,...o];i.next(e?e(...u):u)}}))})}var UO="https://g.co/ng/security#xss",me=class extends Error{constructor(e,n){super(sy(e,n)),this.code=e}};function sy(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Oc(t){return{toString:t}.toString()}var wd="__parameters__";function $O(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function ay(t,e,n){return Oc(()=>{let i=$O(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,u,d){let f=c.hasOwnProperty(wd)?c[wd]:Object.defineProperty(c,wd,{value:[]})[wd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var bc=globalThis;function $e(t){for(let e in t)if(t[e]===$e)return e;throw Error("Could not find renamed property on target object.")}function HO(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function _n(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(_n).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function P0(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var qO=$e({__forward_ref__:$e});function xi(t){return t.__forward_ref__=xi,t.toString=function(){return _n(this())},t}function Ut(t){return pC(t)?t():t}function pC(t){return typeof t=="function"&&t.hasOwnProperty(qO)&&t.__forward_ref__===xi}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xe(t){return{providers:t.providers||[],imports:t.imports||[]}}function cy(t){return N0(t,mC)||N0(t,gC)}function N0(t,e){return t.hasOwnProperty(e)?t[e]:null}function zO(t){let e=t&&(t[mC]||t[gC]);return e||null}function O0(t){return t&&(t.hasOwnProperty(F0)||t.hasOwnProperty(GO))?t[F0]:null}var mC=$e({\u0275prov:$e}),F0=$e({\u0275inj:$e}),gC=$e({ngInjectableDef:$e}),GO=$e({ngInjectorDef:$e}),O=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function yC(t){return t&&!!t.\u0275providers}var WO=$e({\u0275cmp:$e}),KO=$e({\u0275dir:$e}),QO=$e({\u0275pipe:$e});var xd=$e({\u0275fac:$e}),Cc=$e({__NG_ELEMENT_ID__:$e}),L0=$e({__NG_ENV_ID__:$e});function ly(t){return typeof t=="string"?t:t==null?"":String(t)}function YO(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ly(t)}function ZO(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new me(-200,t)}function uy(t,e){throw new me(-201,!1)}var Ie=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ie||{}),mg;function _C(){return mg}function Qn(t){let e=mg;return mg=t,e}function vC(t,e,n){let i=cy(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&Ie.Optional)return null;if(e!==void 0)return e;uy(t,"Injector")}var XO={},Tc=XO,gg="__NG_DI_FLAG__",Rd="ngTempTokenPath",JO="ngTokenPath",eF=/\n/gm,tF="\u0275",V0="__source",Is;function nF(){return Is}function _s(t){let e=Is;return Is=t,e}function iF(t,e=Ie.Default){if(Is===void 0)throw new me(-203,!1);return Is===null?vC(t,void 0,e):Is.get(t,e&Ie.Optional?null:void 0,e)}function C(t,e=Ie.Default){return(_C()||iF)(Ut(t),e)}function Y(t,e=Ie.Default){return C(t,Kd(e))}function Kd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function yg(t){let e=[];for(let n=0;n<t.length;n++){let i=Ut(t[n]);if(Array.isArray(i)){if(i.length===0)throw new me(900,!1);let r,o=Ie.Default;for(let s=0;s<i.length;s++){let a=i[s],c=rF(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}e.push(C(r,o))}else e.push(C(i))}return e}function dy(t,e){return t[gg]=e,t.prototype[gg]=e,t}function rF(t){return t[gg]}function oF(t,e,n,i){let r=t[Rd];throw e[V0]&&r.unshift(e[V0]),t.message=sF(`
`+t.message,r,n,i),t[JO]=r,t[Rd]=null,t}function sF(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==tF?t.slice(2):t;let r=_n(e);if(Array.isArray(e))r=e.map(_n).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):_n(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(eF,`
  `)}`}var wC=dy(ay("Inject",t=>({token:t})),-1),vt=dy(ay("Optional"),8);var aF=dy(ay("SkipSelf"),4);function bs(t,e){let n=t.hasOwnProperty(xd);return n?t[xd]:null}function cF(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function lF(t){return t.flat(Number.POSITIVE_INFINITY)}function hy(t,e){t.forEach(n=>Array.isArray(n)?hy(n,e):e(n))}function EC(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Md(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function uF(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function dF(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function hF(t,e,n){let i=Fc(t,e);return i>=0?t[i|1]=n:(i=~i,dF(t,i,e,n)),i}function eg(t,e){let n=Fc(t,e);if(n>=0)return t[n|1]}function Fc(t,e){return fF(t,e,1)}function fF(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}var Cs={},yn=[],Ci=new O(""),IC=new O("",-1),DC=new O(""),kd=class{get(e,n=Tc){if(n===Tc){let i=new Error(`NullInjectorError: No provider for ${_n(e)}!`);throw i.name="NullInjectorError",i}return n}},bC=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(bC||{}),Xn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Xn||{}),le=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(le||{});function pF(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function _g(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{let o=r,s=n[++i];gF(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function mF(t){return t===3||t===4||t===6}function gF(t){return t.charCodeAt(0)===64}function Sc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?j0(t,n,r,null,e[++i]):j0(t,n,r,null,null))}}return t}function j0(t,e,n,i,r){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var CC="ng-template";function yF(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&pF(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(fy(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function fy(t){return t.type===4&&t.value!==CC}function _F(t,e,n){let i=t.type===4&&!n?CC:t.value;return e===i}function vF(t,e,n){let i=4,r=t.attrs,o=r!==null?IF(r):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Pn(i)&&!Pn(c))return!1;if(s&&Pn(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!_F(t,c,n)||c===""&&e.length===1){if(Pn(i))return!1;s=!0}}else if(i&8){if(r===null||!yF(t,r,c,n)){if(Pn(i))return!1;s=!0}}else{let u=e[++a],d=wF(c,r,fy(t),n);if(d===-1){if(Pn(i))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=r[d+1].toLowerCase(),i&2&&u!==f){if(Pn(i))return!1;s=!0}}}}return Pn(i)||s}function Pn(t){return(t&1)===0}function wF(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return DF(e,t)}function TC(t,e,n=!1){for(let i=0;i<e.length;i++)if(vF(t,e[i],n))return!0;return!1}function EF(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function IF(t){for(let e=0;e<t.length;e++){let n=t[e];if(mF(n))return e}return t.length}function DF(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function bF(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function B0(t,e){return t?":not("+e.trim()+")":e}function CF(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(i&2){let a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Pn(s)&&(e+=B0(o,r),r=""),i=s,o=o||!Pn(i);n++}return r!==""&&(e+=B0(o,r)),e}function TF(t){return t.map(CF).join(",")}function SF(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!Pn(r))break;r=o}i++}return{attrs:e,classes:n}}function fe(t){return Oc(()=>{let e=xC(t),n=Re(ee({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===bC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Xn.Emulated,styles:t.styles||yn,_:null,schemas:t.schemas||null,tView:null,id:""});RC(n);let i=t.dependencies;return n.directiveDefs=$0(i,!1),n.pipeDefs=$0(i,!0),n.id=MF(n),n})}function AF(t){return eo(t)||SC(t)}function xF(t){return t!==null}function Je(t){return Oc(()=>({type:t.type,bootstrap:t.bootstrap||yn,declarations:t.declarations||yn,imports:t.imports||yn,exports:t.exports||yn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function U0(t,e){if(t==null)return Cs;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,s,a=le.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(n[o]=a!==le.None?[i,a]:i,e[o]=s):n[o]=i}return n}function Le(t){return Oc(()=>{let e=xC(t);return RC(e),e})}function eo(t){return t[WO]||null}function SC(t){return t[KO]||null}function AC(t){return t[QO]||null}function RF(t){let e=eo(t)||SC(t)||AC(t);return e!==null?e.standalone:!1}function xC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Cs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||yn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:U0(t.inputs,e),outputs:U0(t.outputs),debugInfo:null}}function RC(t){t.features?.forEach(e=>e(t))}function $0(t,e){if(!t)return null;let n=e?AC:AF;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(xF)}function MF(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Xt(t){return{\u0275providers:t}}function kF(...t){return{\u0275providers:MC(!0,t),\u0275fromNgModule:!0}}function MC(t,...e){let n=[],i=new Set,r,o=s=>{n.push(s)};return hy(e,s=>{let a=s;vg(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&kC(r,o),n}function kC(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];py(r,o=>{e(o,i)})}}function vg(t,e,n,i){if(t=Ut(t),!t)return!1;let r=null,o=O0(t),s=!o&&eo(t);if(!o&&!s){let c=t.ngModule;if(o=O0(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=t}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)vg(u,e,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{hy(o.imports,d=>{vg(d,e,n,i)&&(u||=[],u.push(d))})}finally{}u!==void 0&&kC(u,e)}if(!a){let u=bs(r)||(()=>new r);e({provide:r,useFactory:u,deps:yn},r),e({provide:DC,useValue:r,multi:!0},r),e({provide:Ci,useValue:()=>C(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let u=t;py(c,d=>{e(d,u)})}}else return!1;return r!==t&&t.providers!==void 0}function py(t,e){for(let n of t)yC(n)&&(n=n.\u0275providers),Array.isArray(n)?py(n,e):e(n)}var PF=$e({provide:String,useValue:$e});function PC(t){return t!==null&&typeof t=="object"&&PF in t}function NF(t){return!!(t&&t.useExisting)}function OF(t){return!!(t&&t.useFactory)}function Ts(t){return typeof t=="function"}function FF(t){return!!t.useClass}var Qd=new O(""),Dd={},LF={},tg;function Yd(){return tg===void 0&&(tg=new kd),tg}var Jn=class{},Pd=class extends Jn{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Eg(e,s=>this.processProvider(s)),this.records.set(IC,vs(void 0,this)),r.has("environment")&&this.records.set(Jn,vs(void 0,this));let o=this.records.get(Qd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(DC,yn,Ie.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ae(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ae(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=_s(this),i=Qn(void 0),r;try{return e()}finally{_s(n),Qn(i)}}get(e,n=Tc,i=Ie.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(L0))return e[L0](this);i=Kd(i);let r,o=_s(this),s=Qn(void 0);try{if(!(i&Ie.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=$F(e)&&cy(e);u&&this.injectableDefInScope(u)?c=vs(wg(e),Dd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&Ie.Self?Yd():this.parent;return n=i&Ie.Optional&&n===Tc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Rd]=a[Rd]||[]).unshift(_n(e)),o)throw a;return oF(a,e,"R3InjectorError",this.source)}else throw a}finally{Qn(s),_s(o)}}resolveInjectorInitializers(){let e=Ae(null),n=_s(this),i=Qn(void 0),r;try{let o=this.get(Ci,yn,Ie.Self);for(let s of o)s()}finally{_s(n),Qn(i),Ae(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(_n(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new me(205,!1)}processProvider(e){e=Ut(e);let n=Ts(e)?e:Ut(e&&e.provide),i=jF(e);if(!Ts(e)&&e.multi===!0){let r=this.records.get(n);r||(r=vs(void 0,Dd,!0),r.factory=()=>yg(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=Ae(null);try{return n.value===Dd&&(n.value=LF,n.value=n.factory()),typeof n.value=="object"&&n.value&&UF(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ae(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ut(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function wg(t){let e=cy(t),n=e!==null?e.factory:bs(t);if(n!==null)return n;if(t instanceof O)throw new me(204,!1);if(t instanceof Function)return VF(t);throw new me(204,!1)}function VF(t){if(t.length>0)throw new me(204,!1);let n=zO(t);return n!==null?()=>n.factory(t):()=>new t}function jF(t){if(PC(t))return vs(void 0,t.useValue);{let e=NC(t);return vs(e,Dd)}}function NC(t,e,n){let i;if(Ts(t)){let r=Ut(t);return bs(r)||wg(r)}else if(PC(t))i=()=>Ut(t.useValue);else if(OF(t))i=()=>t.useFactory(...yg(t.deps||[]));else if(NF(t))i=()=>C(Ut(t.useExisting));else{let r=Ut(t&&(t.useClass||t.provide));if(BF(t))i=()=>new r(...yg(t.deps));else return bs(r)||wg(r)}return i}function vs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function BF(t){return!!t.deps}function UF(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function $F(t){return typeof t=="function"||typeof t=="object"&&t instanceof O}function Eg(t,e){for(let n of t)Array.isArray(n)?Eg(n,e):n&&yC(n)?Eg(n.\u0275providers,e):e(n)}function OC(){return _C()!==void 0||nF()!=null}function my(t){if(!OC())throw new me(-203,!1)}function HF(t){return typeof t=="function"}var Ri=0,he=1,ae=2,St=3,Nn=4,ln=5,Ac=6,xc=7,vn=8,Ss=9,ei=10,Ze=11,Rc=12,H0=13,ks=14,On=15,Lc=16,ws=17,Ti=18,Zd=19,FC=20,sr=21,ng=22,to=23,wn=25,LC=1;var no=7,Nd=8,As=9,Zt=10,gy=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(gy||{});function Xr(t){return Array.isArray(t)&&typeof t[LC]=="object"}function Mi(t){return Array.isArray(t)&&t[LC]===!0}function yy(t){return(t.flags&4)!==0}function Xd(t){return t.componentOffset>-1}function Jd(t){return(t.flags&1)===1}function ar(t){return!!t.template}function qF(t){return(t[ae]&512)!==0}var Ig=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function VC(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function In(){return jC}function jC(t){return t.type.prototype.ngOnChanges&&(t.setInput=GF),zF}In.ngInherit=!0;function zF(){let t=UC(this),e=t?.current;if(e){let n=t.previous;if(n===Cs)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function GF(t,e,n,i,r){let o=this.declaredInputs[i],s=UC(t)||WF(t,{previous:Cs,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Ig(u&&u.currentValue,n,c===Cs),VC(t,e,r,n)}var BC="__ngSimpleChanges__";function UC(t){return t[BC]||null}function WF(t,e){return t[BC]=e}var q0=null;var Yn=function(t,e,n){q0?.(t,e,n)},KF="svg",QF="math",YF=!1;function ZF(){return YF}function ti(t){for(;Array.isArray(t);)t=t[Ri];return t}function $C(t,e){return ti(e[t])}function Dn(t,e){return ti(e[t.index])}function _y(t,e){return t.data[e]}function ur(t,e){let n=e[t];return Xr(n)?n:n[Ri]}function XF(t){return(t[ae]&4)===4}function vy(t){return(t[ae]&128)===128}function JF(t){return Mi(t[St])}function xs(t,e){return e==null?null:t[e]}function HC(t){t[ws]=0}function e1(t){t[ae]&1024||(t[ae]|=1024,vy(t)&&Mc(t))}function t1(t,e){for(;t>0;)e=e[ks],t--;return e}function wy(t){return!!(t[ae]&9216||t[to]?.dirty)}function Dg(t){t[ei].changeDetectionScheduler?.notify(1),wy(t)?Mc(t):t[ae]&64&&(ZF()?(t[ae]|=1024,Mc(t)):t[ei].changeDetectionScheduler?.notify())}function Mc(t){t[ei].changeDetectionScheduler?.notify();let e=kc(t);for(;e!==null&&!(e[ae]&8192||(e[ae]|=8192,!vy(e)));)e=kc(e)}function qC(t,e){if((t[ae]&256)===256)throw new me(911,!1);t[sr]===null&&(t[sr]=[]),t[sr].push(e)}function n1(t,e){if(t[sr]===null)return;let n=t[sr].indexOf(e);n!==-1&&t[sr].splice(n,1)}function kc(t){let e=t[St];return Mi(e)?e[St]:e}var ge={lFrame:eT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function i1(){return ge.lFrame.elementDepthCount}function r1(){ge.lFrame.elementDepthCount++}function o1(){ge.lFrame.elementDepthCount--}function zC(){return ge.bindingsEnabled}function GC(){return ge.skipHydrationRootTNode!==null}function s1(t){return ge.skipHydrationRootTNode===t}function a1(){ge.skipHydrationRootTNode=null}function De(){return ge.lFrame.lView}function mt(){return ge.lFrame.tView}function WC(t){return ge.lFrame.contextLView=t,t[vn]}function KC(t){return ge.lFrame.contextLView=null,t}function Jt(){let t=QC();for(;t!==null&&t.type===64;)t=t.parent;return t}function QC(){return ge.lFrame.currentTNode}function c1(){let t=ge.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function co(t,e){let n=ge.lFrame;n.currentTNode=t,n.isParent=e}function Ey(){return ge.lFrame.isParent}function Iy(){ge.lFrame.isParent=!1}function YC(){let t=ge.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function l1(t){return ge.lFrame.bindingIndex=t}function Ps(){return ge.lFrame.bindingIndex++}function u1(t){let e=ge.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function d1(){return ge.lFrame.inI18n}function h1(t,e){let n=ge.lFrame;n.bindingIndex=n.bindingRootIndex=t,bg(e)}function f1(){return ge.lFrame.currentDirectiveIndex}function bg(t){ge.lFrame.currentDirectiveIndex=t}function p1(t){let e=ge.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function ZC(){return ge.lFrame.currentQueryIndex}function Dy(t){ge.lFrame.currentQueryIndex=t}function m1(t){let e=t[he];return e.type===2?e.declTNode:e.type===1?t[ln]:null}function XC(t,e,n){if(n&Ie.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&Ie.Host);)if(r=m1(o),r===null||(o=o[ks],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=ge.lFrame=JC();return i.currentTNode=e,i.lView=t,!0}function by(t){let e=JC(),n=t[he];ge.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function JC(){let t=ge.lFrame,e=t===null?null:t.child;return e===null?eT(t):e}function eT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function tT(){let t=ge.lFrame;return ge.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var nT=tT;function Cy(){let t=tT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function g1(t){return(ge.lFrame.contextLView=t1(t,ge.lFrame.contextLView))[vn]}function Ns(){return ge.lFrame.selectedIndex}function io(t){ge.lFrame.selectedIndex=t}function eh(){let t=ge.lFrame;return _y(t.tView,t.selectedIndex)}function y1(){return ge.lFrame.currentNamespace}var iT=!0;function th(){return iT}function nh(t){iT=t}function _1(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=jC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function ih(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function bd(t,e,n){rT(t,e,3,n)}function Cd(t,e,n,i){(t[ae]&3)===n&&rT(t,e,n,i)}function ig(t,e){let n=t[ae];(n&3)===e&&(n&=16383,n+=1,t[ae]=n)}function rT(t,e,n,i){let r=i!==void 0?t[ws]&65535:0,o=i??-1,s=e.length-1,a=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(t[ws]+=65536),(a<o||o==-1)&&(v1(t,n,e,c),t[ws]=(t[ws]&4294901760)+c+2),c++}function z0(t,e){Yn(4,t,e);let n=Ae(null);try{e.call(t)}finally{Ae(n),Yn(5,t,e)}}function v1(t,e,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=t[s];r?t[ae]>>14<t[ws]>>16&&(t[ae]&3)===e&&(t[ae]+=16384,z0(a,o)):z0(a,o)}var Ds=-1,ro=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function w1(t){return t instanceof ro}function E1(t){return(t.flags&8)!==0}function I1(t){return(t.flags&16)!==0}function oT(t){return t!==Ds}function Od(t){return t&32767}function D1(t){return t>>16}function Fd(t,e){let n=D1(t),i=e;for(;n>0;)i=i[ks],n--;return i}var Cg=!0;function G0(t){let e=Cg;return Cg=t,e}var b1=256,sT=b1-1,aT=5,C1=0,Zn={};function T1(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Cc)&&(i=n[Cc]),i==null&&(i=n[Cc]=C1++);let r=i&sT,o=1<<r;e.data[t+(r>>aT)]|=o}function Ld(t,e){let n=cT(t,e);if(n!==-1)return n;let i=e[he];i.firstCreatePass&&(t.injectorIndex=e.length,rg(i.data,t),rg(e,null),rg(i.blueprint,null));let r=Ty(t,e),o=t.injectorIndex;if(oT(r)){let s=Od(r),a=Fd(r,e),c=a[he].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=r,o}function rg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function cT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Ty(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=fT(r),i===null)return Ds;if(n++,r=r[ks],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Ds}function Tg(t,e,n){T1(t,e,n)}function lT(t,e,n){if(n&Ie.Optional||t!==void 0)return t;uy(e,"NodeInjector")}function uT(t,e,n,i){if(n&Ie.Optional&&i===void 0&&(i=null),!(n&(Ie.Self|Ie.Host))){let r=t[Ss],o=Qn(void 0);try{return r?r.get(e,i,n&Ie.Optional):vC(e,i,n&Ie.Optional)}finally{Qn(o)}}return lT(i,e,n)}function dT(t,e,n,i=Ie.Default,r){if(t!==null){if(e[ae]&2048&&!(i&Ie.Self)){let s=R1(t,e,n,i,Zn);if(s!==Zn)return s}let o=hT(t,e,n,i,Zn);if(o!==Zn)return o}return uT(e,n,i,r)}function hT(t,e,n,i,r){let o=A1(n);if(typeof o=="function"){if(!XC(e,t,i))return i&Ie.Host?lT(r,n,i):uT(e,n,i,r);try{let s;if(s=o(i),s==null&&!(i&Ie.Optional))uy(n);else return s}finally{nT()}}else if(typeof o=="number"){let s=null,a=cT(t,e),c=Ds,u=i&Ie.Host?e[On][ln]:null;for((a===-1||i&Ie.SkipSelf)&&(c=a===-1?Ty(t,e):e[a+8],c===Ds||!K0(i,!1)?a=-1:(s=e[he],a=Od(c),e=Fd(c,e)));a!==-1;){let d=e[he];if(W0(o,a,d.data)){let f=S1(a,e,n,s,i,u);if(f!==Zn)return f}c=e[a+8],c!==Ds&&K0(i,e[he].data[a+8]===u)&&W0(o,a,e)?(s=d,a=Od(c),e=Fd(c,e)):a=-1}}return r}function S1(t,e,n,i,r,o){let s=e[he],a=s.data[t+8],c=i==null?Xd(a)&&Cg:i!=s&&(a.type&3)!==0,u=r&Ie.Host&&o===a,d=Td(a,s,n,c,u);return d!==null?oo(e,s,d,a):Zn}function Td(t,e,n,i,r){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,d=o>>20,f=i?a:a+d,m=r?a+d:u;for(let y=f;y<m;y++){let I=s[y];if(y<c&&n===I||y>=c&&I.type===n)return y}if(r){let y=s[c];if(y&&ar(y)&&y.type===n)return c}return null}function oo(t,e,n,i){let r=t[n],o=e.data;if(w1(r)){let s=r;s.resolving&&ZO(YO(o[n]));let a=G0(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Qn(s.injectImpl):null,d=XC(t,i,Ie.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&_1(n,o[n],e)}finally{u!==null&&Qn(u),G0(a),s.resolving=!1,nT()}}return r}function A1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Cc)?t[Cc]:void 0;return typeof e=="number"?e>=0?e&sT:x1:e}function W0(t,e,n){let i=1<<t;return!!(n[e+(t>>aT)]&i)}function K0(t,e){return!(t&Ie.Self)&&!(t&Ie.Host&&e)}var Jr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return dT(this._tNode,this._lView,e,Kd(i),n)}};function x1(){return new Jr(Jt(),De())}function dr(t){return Oc(()=>{let e=t.prototype.constructor,n=e[xd]||Sg(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[xd]||Sg(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Sg(t){return pC(t)?()=>{let e=Sg(Ut(t));return e&&e()}:bs(t)}function R1(t,e,n,i,r){let o=t,s=e;for(;o!==null&&s!==null&&s[ae]&2048&&!(s[ae]&512);){let a=hT(o,s,n,i|Ie.Self,Zn);if(a!==Zn)return a;let c=o.parent;if(!c){let u=s[FC];if(u){let d=u.get(n,Zn,i);if(d!==Zn)return d}c=fT(s),s=s[ks]}o=c}return r}function fT(t){let e=t[he],n=e.type;return n===2?e.declTNode:n===1?t[ln]:null}function Q0(t,e=null,n=null,i){let r=M1(t,e,n,i);return r.resolveInjectorInitializers(),r}function M1(t,e=null,n=null,i,r=new Set){let o=[n||yn,kF(t)];return i=i||(typeof t=="object"?void 0:_n(t)),new Pd(o,e||Yd(),i||null,r)}var We=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return Q0({name:""},r,i,"");{let o=i.name??"";return Q0({name:o},i.parent,i.providers,o)}}};e.THROW_IF_NOT_FOUND=Tc,e.NULL=new kd,e.\u0275prov=B({token:e,providedIn:"any",factory:()=>C(IC)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var k1="ngOriginalError";function og(t){return t[k1]}var Fn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&og(e);for(;n&&og(n);)n=og(n);return n||null}},pT=new O("",{providedIn:"root",factory:()=>Y(Fn).handleError.bind(void 0)}),wt=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=P1,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),Ag=class extends wt{constructor(e){super(),this._lView=e}onDestroy(e){return qC(this._lView,e),()=>n1(this._lView,e)}};function P1(){return new Ag(De())}function N1(){return Os(Jt(),De())}function Os(t,e){return new Oe(Dn(t,e))}var Oe=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=N1;let t=e;return t})();function O1(t){return t instanceof Oe?t.nativeElement:t}var xg=class extends z{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,OC()&&(this.destroyRef=Y(wt,{optional:!0})??void 0)}emit(e){let n=Ae(null);try{super.next(e)}finally{Ae(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=sg(o),r&&(r=sg(r)),s&&(s=sg(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof Pe&&e.add(a),a}};function sg(t){return e=>{setTimeout(t,void 0,e)}}var we=xg;function F1(){return this._results[Symbol.iterator]()}var Vd=class t{get changes(){return this._changes??=new we}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=F1)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=lF(e);(this._changesDetected=!cF(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function mT(t){return(t.flags&128)===128}var gT=new Map,L1=0;function V1(){return L1++}function j1(t){gT.set(t[Zd],t)}function B1(t){gT.delete(t[Zd])}var Y0="__ngContext__";function cr(t,e){Xr(e)?(t[Y0]=e[Zd],j1(e)):t[Y0]=e}function yT(t){return vT(t[Rc])}function _T(t){return vT(t[Nn])}function vT(t){for(;t!==null&&!Mi(t);)t=t[Nn];return t}var Rg;function wT(t){Rg=t}function U1(){if(Rg!==void 0)return Rg;if(typeof document<"u")return document;throw new me(210,!1)}var rh=new O("",{providedIn:"root",factory:()=>$1}),$1="ng",Sy=new O(""),$t=new O("",{providedIn:"platform",factory:()=>"unknown"});var Vc=new O(""),Ay=new O("",{providedIn:"root",factory:()=>U1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var H1="h",q1="b";var z1=()=>null;function xy(t,e,n=!1){return z1(t,e,n)}var ET=!1,G1=new O("",{providedIn:"root",factory:()=>ET});var Mg=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${UO})`}};function Ry(t){return t instanceof Mg?t.changingThisBreaksApplicationSecurity:t}var W1=/^>|^->|<!--|-->|--!>|<!-$/g,K1=/(<|>)/g,Q1="\u200B$1\u200B";function Y1(t){return t.replace(W1,e=>e.replace(K1,Q1))}var Si=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Si||{}),Z1;function My(t,e){return Z1(t,e)}function Es(t,e,n,i,r){if(i!=null){let o,s=!1;Mi(i)?o=i:Xr(i)&&(s=!0,i=i[Ri]);let a=ti(i);t===0&&n!==null?r==null?TT(e,n,a):Bd(e,n,a,r||null,!0):t===1&&n!==null?Bd(e,n,a,r||null,!0):t===2?fL(e,a,s):t===3&&e.destroyNode(a),o!=null&&mL(e,t,o,n,r)}}function X1(t,e){return t.createText(e)}function J1(t,e,n){t.setValue(e,n)}function eL(t,e){return t.createComment(Y1(e))}function IT(t,e,n){return t.createElement(e,n)}function tL(t,e){DT(t,e),e[Ri]=null,e[ln]=null}function nL(t,e,n,i,r,o){i[Ri]=r,i[ln]=e,sh(t,i,n,1,r,o)}function DT(t,e){e[ei].changeDetectionScheduler?.notify(1),sh(t,e,e[Ze],2,null,null)}function iL(t){let e=t[Rc];if(!e)return ag(t[he],t);for(;e;){let n=null;if(Xr(e))n=e[Rc];else{let i=e[Zt];i&&(n=i)}if(!n){for(;e&&!e[Nn]&&e!==t;)Xr(e)&&ag(e[he],e),e=e[St];e===null&&(e=t),Xr(e)&&ag(e[he],e),n=e&&e[Nn]}e=n}}function rL(t,e,n,i){let r=Zt+i,o=n.length;i>0&&(n[r-1][Nn]=e),i<o-Zt?(e[Nn]=n[r],EC(n,Zt+i,e)):(n.push(e),e[Nn]=null),e[St]=n;let s=e[Lc];s!==null&&n!==s&&oL(s,e);let a=e[Ti];a!==null&&a.insertView(t),Dg(e),e[ae]|=128}function oL(t,e){let n=t[As],r=e[St][St][On];e[On]!==r&&(t[ae]|=gy.HasTransplantedViews),n===null?t[As]=[e]:n.push(e)}function bT(t,e){let n=t[As],i=n.indexOf(e);n.splice(i,1)}function jd(t,e){if(t.length<=Zt)return;let n=Zt+e,i=t[n];if(i){let r=i[Lc];r!==null&&r!==t&&bT(r,i),e>0&&(t[n-1][Nn]=i[Nn]);let o=Md(t,Zt+e);tL(i[he],i);let s=o[Ti];s!==null&&s.detachView(o[he]),i[St]=null,i[Nn]=null,i[ae]&=-129}return i}function ky(t,e){if(!(e[ae]&256)){let n=e[Ze];n.destroyNode&&sh(t,e,n,3,null,null),iL(e)}}function ag(t,e){if(e[ae]&256)return;let n=Ae(null);try{e[ae]&=-129,e[ae]|=256,e[to]&&Qb(e[to]),aL(t,e),sL(t,e),e[he].type===1&&e[Ze].destroy();let i=e[Lc];if(i!==null&&Mi(e[St])){i!==e[St]&&bT(i,e);let r=e[Ti];r!==null&&r.detachView(t)}B1(e)}finally{Ae(n)}}function sL(t,e){let n=t.cleanup,i=e[xc];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[n[o+1]];n[o].call(s)}i!==null&&(e[xc]=null);let r=e[sr];if(r!==null){e[sr]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function aL(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof ro)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];Yn(4,a,c);try{c.call(a)}finally{Yn(5,a,c)}}else{Yn(4,r,o);try{o.call(r)}finally{Yn(5,r,o)}}}}}function CT(t,e,n){return cL(t,e.parent,n)}function cL(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[Ri];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===Xn.None||o===Xn.Emulated)return null}return Dn(i,n)}}function Bd(t,e,n,i,r){t.insertBefore(e,n,i,r)}function TT(t,e,n){t.appendChild(e,n)}function Z0(t,e,n,i,r){i!==null?Bd(t,e,n,i,r):TT(t,e,n)}function lL(t,e,n,i){t.removeChild(e,n,i)}function Py(t,e){return t.parentNode(e)}function uL(t,e){return t.nextSibling(e)}function ST(t,e,n){return hL(t,e,n)}function dL(t,e,n){return t.type&40?Dn(t,n):null}var hL=dL,X0;function oh(t,e,n,i){let r=CT(t,i,e),o=e[Ze],s=i.parent||e[ln],a=ST(s,i,e);if(r!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Z0(o,r,n[c],a,!1);else Z0(o,r,n,a,!1);X0!==void 0&&X0(o,i,e,n,r)}function Sd(t,e){if(e!==null){let n=e.type;if(n&3)return Dn(e,t);if(n&4)return kg(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return Sd(t,i);{let r=t[e.index];return Mi(r)?kg(-1,r):ti(r)}}else{if(n&32)return My(e,t)()||ti(t[e.index]);{let i=AT(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=kc(t[On]);return Sd(r,i)}else return Sd(t,e.next)}}}return null}function AT(t,e){if(e!==null){let i=t[On][ln],r=e.projection;return i.projection[r]}return null}function kg(t,e){let n=Zt+t+1;if(n<e.length){let i=e[n],r=i[he].firstChild;if(r!==null)return Sd(i,r)}return e[no]}function fL(t,e,n){let i=Py(t,e);i&&lL(t,i,e,n)}function Ny(t,e,n,i,r,o,s){for(;n!=null;){let a=i[n.index],c=n.type;if(s&&e===0&&(a&&cr(ti(a),i),n.flags|=2),(n.flags&32)!==32)if(c&8)Ny(t,e,n.child,i,r,o,!1),Es(e,t,r,a,o);else if(c&32){let u=My(n,i),d;for(;d=u();)Es(e,t,r,d,o);Es(e,t,r,a,o)}else c&16?xT(t,e,i,n,r,o):Es(e,t,r,a,o);n=s?n.projectionNext:n.next}}function sh(t,e,n,i,r,o){Ny(n,i,t.firstChild,e,r,o,!1)}function pL(t,e,n){let i=e[Ze],r=CT(t,n,e),o=n.parent||e[ln],s=ST(o,n,e);xT(i,0,e,n,r,s)}function xT(t,e,n,i,r,o){let s=n[On],c=s[ln].projection[i.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];Es(e,t,r,d,o)}else{let u=c,d=s[St];mT(i)&&(u.flags|=128),Ny(t,e,u,d,r,o,!0)}}function mL(t,e,n,i,r){let o=n[no],s=ti(n);o!==s&&Es(e,t,i,o,r);for(let a=Zt;a<n.length;a++){let c=n[a];sh(c[he],c,t,e,i,o)}}function gL(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:Si.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Si.Important),t.setStyle(n,i,r,o))}}function yL(t,e,n){t.setAttribute(e,"style",n)}function RT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function MT(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&_g(t,e,i),r!==null&&RT(t,e,r),o!==null&&yL(t,e,o)}var hr={};function be(t=1){kT(mt(),De(),Ns()+t,!1)}function kT(t,e,n,i){if(!i)if((e[ae]&3)===3){let o=t.preOrderCheckHooks;o!==null&&bd(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Cd(e,o,0,n)}io(n)}function N(t,e=Ie.Default){let n=De();if(n===null)return C(t,e);let i=Jt();return dT(i,n,Ut(t),e)}function PT(t,e,n,i,r,o){let s=Ae(null);try{let a=null;r&le.SignalBased&&(a=e[i][Ei]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&le.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,i):VC(e,a,i,o)}finally{Ae(s)}}function _L(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)io(~r);else{let o=r,s=n[++i],a=n[++i];h1(s,o);let c=e[o];a(2,c)}}}finally{io(-1)}}function ah(t,e,n,i,r,o,s,a,c,u,d){let f=e.blueprint.slice();return f[Ri]=r,f[ae]=i|4|128|8|64,(u!==null||t&&t[ae]&2048)&&(f[ae]|=2048),HC(f),f[St]=f[ks]=t,f[vn]=n,f[ei]=s||t&&t[ei],f[Ze]=a||t&&t[Ze],f[Ss]=c||t&&t[Ss]||null,f[ln]=o,f[Zd]=V1(),f[Ac]=d,f[FC]=u,f[On]=e.type==2?t[On]:f,f}function Fs(t,e,n,i,r){let o=t.data[e];if(o===null)o=vL(t,e,n,i,r),d1()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=c1();o.injectorIndex=s===null?-1:s.injectorIndex}return co(o,!0),o}function vL(t,e,n,i,r){let o=QC(),s=Ey(),a=s?o:o&&o.parent,c=t.data[e]=CL(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function NT(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function OT(t,e,n,i,r){let o=Ns(),s=i&2;try{io(-1),s&&e.length>wn&&kT(t,e,wn,!1),Yn(s?2:0,r),n(i,r)}finally{io(o),Yn(s?3:1,r)}}function Oy(t,e,n){if(yy(e)){let i=Ae(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{Ae(i)}}}function Fy(t,e,n){zC()&&(ML(t,e,n,Dn(n,e)),(n.flags&64)===64&&VT(t,e,n))}function Ly(t,e,n=Dn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(e,t):t[s];t[r++]=a}}}function FT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Vy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Vy(t,e,n,i,r,o,s,a,c,u,d){let f=wn+i,m=f+r,y=wL(f,m),I=typeof u=="function"?u():u;return y[he]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:d}}function wL(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:hr);return n}function EL(t,e,n,i){let o=i.get(G1,ET)||n===Xn.ShadowDom,s=t.selectRootElement(e,o);return IL(s),s}function IL(t){DL(t)}var DL=()=>null;function bL(t,e,n,i){let r=UT(e);r.push(n),t.firstCreatePass&&$T(t).push(i,r.length-1)}function CL(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return GC()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function J0(t,e,n,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;i??={};let a,c=le.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(r!==null){if(!r.hasOwnProperty(o))continue;u=r[o]}t===0?eC(i,n,u,a,c):eC(i,n,u,a)}return i}function eC(t,e,n,i,r){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,i):o=t[n]=[e,i],r!==void 0&&o.push(r)}function TL(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let d=i;d<r;d++){let f=o[d],m=n?n.get(f):null,y=m?m.inputs:null,I=m?m.outputs:null;c=J0(0,f.inputs,d,c,y),u=J0(1,f.outputs,d,u,I);let x=c!==null&&s!==null&&!fy(e)?$L(c,d,s):null;a.push(x)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function SL(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function jy(t,e,n,i,r,o,s,a){let c=Dn(e,n),u=e.inputs,d;!a&&u!=null&&(d=u[i])?(Uy(t,n,d,i,r),Xd(e)&&AL(n,e.index)):e.type&3?(i=SL(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(c,i,r)):e.type&12}function AL(t,e){let n=ur(e,t);n[ae]&16||(n[ae]|=64)}function By(t,e,n,i){if(zC()){let r=i===null?null:{"":-1},o=PL(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&LT(t,e,n,s,r,a),r&&NL(n,i,r)}n.mergedAttrs=Sc(n.mergedAttrs,n.attrs)}function LT(t,e,n,i,r,o){for(let u=0;u<i.length;u++)Tg(Ld(n,e),t,i[u].type);FL(n,t.data.length,i.length);for(let u=0;u<i.length;u++){let d=i[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=NT(t,e,i.length,null);for(let u=0;u<i.length;u++){let d=i[u];n.mergedAttrs=Sc(n.mergedAttrs,d.hostAttrs),LL(t,n,e,c,d),OL(c,d,r),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}TL(t,n,o)}function xL(t,e,n,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;RL(s)!=a&&s.push(a),s.push(n,i,o)}}function RL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function ML(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;Xd(n)&&VL(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Ld(n,e),cr(i,e);let s=n.initialInputs;for(let a=r;a<o;a++){let c=t.data[a],u=oo(e,t,a,n);if(cr(u,e),s!==null&&UL(e,a-r,u,c,n,s),ar(c)){let d=ur(n.index,e);d[vn]=oo(e,t,a,n)}}}function VT(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=f1();try{io(o);for(let a=i;a<r;a++){let c=t.data[a],u=e[a];bg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&kL(c,u)}}finally{io(-1),bg(s)}}function kL(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function PL(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(TC(e,s.selectors,!1))if(i||(i=[]),ar(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let c=a.length;Pg(t,e,c)}else i.unshift(s),Pg(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function Pg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function NL(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new me(-301,!1);i.push(e[r],o)}}}function OL(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;ar(e)&&(n[""]=t)}}function FL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function LL(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=bs(r.type,!0)),s=new ro(o,ar(r),N);t.blueprint[i]=s,n[i]=s,xL(t,e,i,NT(t,n,r.hostVars,hr),r)}function VL(t,e,n){let i=Dn(e,t),r=FT(n),o=t[ei].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=ch(t,ah(t,r,null,s,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=a}function jL(t,e,n,i,r,o){let s=Dn(t,e);BL(e[Ze],s,o,t.value,n,i,r)}function BL(t,e,n,i,r,o,s){if(o==null)t.removeAttribute(e,r,n);else{let a=s==null?ly(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}function UL(t,e,n,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],d=s[a++],f=s[a++];PT(i,n,c,u,d,f)}}function $L(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){i.push(o,s[a+1],s[a+2],n[r+1]);break}}r+=2}return i}function jT(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function BT(t,e){let n=t.contentQueries;if(n!==null){let i=Ae(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=t.data[s];Dy(o),a.contentQueries(2,e[s],s)}}}finally{Ae(i)}}}function ch(t,e){return t[Rc]?t[H0][Nn]=e:t[Rc]=e,t[H0]=e,e}function Ng(t,e,n){Dy(0);let i=Ae(null);try{e(t,n)}finally{Ae(i)}}function UT(t){return t[xc]||(t[xc]=[])}function $T(t){return t.cleanup||(t.cleanup=[])}function HT(t,e){let n=t[Ss],i=n?n.get(Fn,null):null;i&&i.handleError(e)}function Uy(t,e,n,i,r){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],u=e[s],d=t.data[s];PT(d,u,i,a,c,r)}}function HL(t,e,n){let i=$C(e,t);J1(t[Ze],i,n)}function qL(t,e){let n=ur(e,t),i=n[he];zL(i,n);let r=n[Ri];r!==null&&n[Ac]===null&&(n[Ac]=xy(r,n[Ss])),$y(i,n,n[vn])}function zL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function $y(t,e,n){by(e);try{let i=t.viewQuery;i!==null&&Ng(1,i,n);let r=t.template;r!==null&&OT(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ti]?.finishViewCreation(t),t.staticContentQueries&&BT(t,e),t.staticViewQueries&&Ng(2,t.viewQuery,n);let o=t.components;o!==null&&GL(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[ae]&=-5,Cy()}}function GL(t,e){for(let n=0;n<e.length;n++)qL(t,e[n])}function qT(t,e,n,i){let r=Ae(null);try{let o=e.tView,a=t[ae]&4096?4096:16,c=ah(t,o,n,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=t[e.index];c[Lc]=u;let d=t[Ti];return d!==null&&(c[Ti]=d.createEmbeddedView(o)),$y(o,c,n),c}finally{Ae(r)}}function WL(t,e){let n=Zt+e;if(n<t.length)return t[n]}function Og(t,e){return!e||e.firstChild===null||mT(t)}function zT(t,e,n,i=!0){let r=e[he];if(rL(r,e,t,n),i){let s=kg(n,t),a=e[Ze],c=Py(a,t[no]);c!==null&&nL(r,t[ln],a,e,c,s)}let o=e[Ac];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function KL(t,e){let n=jd(t,e);return n!==void 0&&ky(n[he],n),n}function Ud(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(ti(o)),Mi(o)&&QL(o,i);let s=n.type;if(s&8)Ud(t,e,n.child,i);else if(s&32){let a=My(n,e),c;for(;c=a();)i.push(c)}else if(s&16){let a=AT(e,n);if(Array.isArray(a))i.push(...a);else{let c=kc(e[On]);Ud(c[he],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function QL(t,e){for(let n=Zt;n<t.length;n++){let i=t[n],r=i[he].firstChild;r!==null&&Ud(i[he],i,r,e)}t[no]!==t[Ri]&&e.push(t[no])}var GT=[];function YL(t){return t[to]??ZL(t)}function ZL(t){let e=GT.pop()??Object.create(JL);return e.lView=t,e}function XL(t){t.lView[to]!==t&&(t.lView=null,GT.push(t))}var JL=Re(ee({},Bu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Mc(t.lView)},consumerOnSignalRead(){this.lView[to]=this}}),WT=100;function KT(t,e=!0,n=0){let i=t[ei],r=i.rendererFactory,o=!1;o||r.begin?.();try{eV(t,n)}catch(s){throw e&&HT(t,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function eV(t,e){Fg(t,e);let n=0;for(;wy(t);){if(n===WT)throw new me(103,!1);n++,Fg(t,1)}}function tV(t,e,n,i){let r=e[ae];if((r&256)===256)return;let o=!1;!o&&e[ei].inlineEffectRunner?.flush(),by(e);let s=null,a=null;!o&&nV(t)&&(a=YL(e),s=km(a));try{HC(e),l1(t.bindingStartIndex),n!==null&&OT(t,e,n,2,i);let c=(r&3)===3;if(!o)if(c){let f=t.preOrderCheckHooks;f!==null&&bd(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Cd(e,f,0,null),ig(e,0)}if(iV(e),QT(e,0),t.contentQueries!==null&&BT(t,e),!o)if(c){let f=t.contentCheckHooks;f!==null&&bd(e,f)}else{let f=t.contentHooks;f!==null&&Cd(e,f,1),ig(e,1)}_L(t,e);let u=t.components;u!==null&&ZT(e,u,0);let d=t.viewQuery;if(d!==null&&Ng(2,d,i),!o)if(c){let f=t.viewCheckHooks;f!==null&&bd(e,f)}else{let f=t.viewHooks;f!==null&&Cd(e,f,2),ig(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ng]){for(let f of e[ng])f();e[ng]=null}o||(e[ae]&=-73)}catch(c){throw Mc(e),c}finally{a!==null&&(Pm(a,s),XL(a)),Cy()}}function nV(t){return t.type!==2}function QT(t,e){for(let n=yT(t);n!==null;n=_T(n))for(let i=Zt;i<n.length;i++){let r=n[i];YT(r,e)}}function iV(t){for(let e=yT(t);e!==null;e=_T(e)){if(!(e[ae]&gy.HasTransplantedViews))continue;let n=e[As];for(let i=0;i<n.length;i++){let r=n[i],o=r[St];e1(r)}}}function rV(t,e,n){let i=ur(e,t);YT(i,n)}function YT(t,e){vy(t)&&Fg(t,e)}function Fg(t,e){let i=t[he],r=t[ae],o=t[to],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&Nm(o)),o&&(o.dirty=!1),t[ae]&=-9217,s)tV(i,t,i.template,t[vn]);else if(r&8192){QT(t,1);let a=i.components;a!==null&&ZT(t,a,1)}}function ZT(t,e,n){for(let i=0;i<e.length;i++)rV(t,e[i],n)}function Hy(t){for(t[ei].changeDetectionScheduler?.notify();t;){t[ae]|=64;let e=kc(t);if(qF(t)&&!e)return t;t=e}return null}var so=class{get rootNodes(){let e=this._lView,n=e[he];return Ud(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[vn]}set context(e){this._lView[vn]=e}get destroyed(){return(this._lView[ae]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[St];if(Mi(e)){let n=e[Nd],i=n?n.indexOf(this):-1;i>-1&&(jd(e,i),Md(n,i))}this._attachedToViewContainer=!1}ky(this._lView[he],this._lView)}onDestroy(e){qC(this._lView,e)}markForCheck(){Hy(this._cdRefInjectingView||this._lView)}detach(){this._lView[ae]&=-129}reattach(){Dg(this._lView),this._lView[ae]|=128}detectChanges(){this._lView[ae]|=1024,KT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,DT(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new me(902,!1);this._appRef=e,Dg(this._lView)}},En=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=aV;let t=e;return t})(),oV=En,sV=class extends oV{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=qT(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new so(r)}};function aV(){return qy(Jt(),De())}function qy(t,e){return t.type&4?new sV(e,t,Os(t,e)):null}var iQ=new RegExp(`^(\\d+)*(${q1}|${H1})*(.*)`);var cV=()=>null;function Lg(t,e){return cV(t,e)}var Vg=class{},jg=class{},$d=class{};function lV(t){let e=Error(`No component factory found for ${_n(t)}.`);return e[uV]=t,e}var uV="ngComponent";var Bg=class{resolveComponentFactory(e){throw lV(e)}},lo=(()=>{let e=class e{};e.NULL=new Bg;let t=e;return t})(),Ai=class{},ii=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>dV();let t=e;return t})();function dV(){let t=De(),e=Jt(),n=ur(e.index,t);return(Xr(n)?n:t)[Ze]}var hV=(()=>{let e=class e{};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),cg={};var tC=new Set;function jc(t){tC.has(t)||(tC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function nC(...t){}function fV(){let t=typeof bc.requestAnimationFrame=="function",e=bc[t?"requestAnimationFrame":"setTimeout"],n=bc[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var te=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new we(!1),this.onMicrotaskEmpty=new we(!1),this.onStable=new we(!1),this.onError=new we(!1),typeof Zone>"u")throw new me(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=fV().nativeRequestAnimationFrame,gV(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new me(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new me(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,pV,nC,nC);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},pV={};function zy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function mV(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(bc,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ug(t),t.isCheckStableRunning=!0,zy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ug(t))}function gV(t){let e=()=>{mV(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{if(yV(a))return n.invokeTask(r,o,s,a);try{return iC(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),rC(t)}},onInvoke:(n,i,r,o,s,a,c)=>{try{return iC(t),n.invoke(r,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),rC(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Ug(t),zy(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Ug(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function iC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function rC(t){t._nesting--,zy(t)}function yV(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var XT=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Hd(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=P0(r,a);else if(o==2){let c=a,u=e[++s];i=P0(i,c+": "+u+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var $g=class extends lo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=eo(e);return new Pc(n,this.ngModule)}};function oC(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function _V(t){let e=t.toLowerCase();return e==="svg"?KF:e==="math"?QF:null}var Hg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Kd(i);let r=this.injector.get(e,cg,i);return r!==cg||n===cg?r:this.parentInjector.get(e,n,i)}},Pc=class extends $d{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=oC(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return oC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=TF(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=Ae(null);try{r=r||this.ngModule;let s=r instanceof Jn?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Hg(e,s):e,c=a.get(Ai,null);if(c===null)throw new me(407,!1);let u=a.get(hV,null),d=a.get(XT,null),f=a.get(Vg,null),m={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},y=c.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",x=i?EL(y,i,this.componentDef.encapsulation,a):IT(y,I,_V(I)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let j=null;x!==null&&(j=xy(x,a,!0));let q=Vy(0,null,null,1,0,null,null,null,null,null,null),V=ah(null,q,null,A,null,null,m,y,a,null,j);by(V);let W,ie;try{let J=this.componentDef,E,_=null;J.findHostDirectiveDefs?(E=[],_=new Map,J.findHostDirectiveDefs(J,E,_),E.push(J)):E=[J];let w=vV(V,x),D=wV(w,x,J,E,V,m,y);ie=_y(q,wn),x&&DV(y,J,x,i),n!==void 0&&bV(ie,this.ngContentSelectors,n),W=IV(D,J,E,_,V,[CV]),$y(q,V,null)}finally{Cy()}return new qg(this.componentType,W,Os(ie,V),V,ie)}finally{Ae(o)}}},qg=class extends jg{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new so(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Uy(o[he],o,r,e,n),this.previousInputValues.set(e,n);let s=ur(this._tNode.index,o);Hy(s)}}get injector(){return new Jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function vV(t,e){let n=t[he],i=wn;return t[i]=e,Fs(n,i,2,"#host",null)}function wV(t,e,n,i,r,o,s){let a=r[he];EV(i,t,e,s);let c=null;e!==null&&(c=xy(e,r[Ss]));let u=o.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=ah(r,FT(n),null,d,r[t.index],t,o,u,null,null,c);return a.firstCreatePass&&Pg(a,t,i.length-1),ch(r,f),r[t.index]=f}function EV(t,e,n,i){for(let r of t)e.mergedAttrs=Sc(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(Hd(e,e.mergedAttrs,!0),n!==null&&MT(i,n,e))}function IV(t,e,n,i,r,o){let s=Jt(),a=r[he],c=Dn(s,r);LT(a,r,s,n,null,i);for(let d=0;d<n.length;d++){let f=s.directiveStart+d,m=oo(r,a,f,s);cr(m,r)}VT(a,r,s),c&&cr(c,r);let u=oo(r,a,s.directiveStart+s.componentOffset,s);if(t[vn]=r[vn]=u,o!==null)for(let d of o)d(u,e);return Oy(a,s,r),u}function DV(t,e,n,i){if(i)_g(t,n,["ng-version","17.3.11"]);else{let{attrs:r,classes:o}=SF(e.selectors[0]);r&&_g(t,n,r),o&&o.length>0&&RT(t,n,o.join(" "))}}function bV(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function CV(){let t=Jt();ih(De()[he],t)}var un=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=TV;let t=e;return t})();function TV(){let t=Jt();return eS(t,De())}var SV=un,JT=class extends SV{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Os(this._hostTNode,this._hostLView)}get injector(){return new Jr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Ty(this._hostTNode,this._hostLView);if(oT(e)){let n=Fd(e,this._hostLView),i=Od(e),r=n[he].data[i+8];return new Jr(r,n)}else return new Jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=sC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Zt}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=Lg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,Og(this._hostTNode,s)),a}createComponent(e,n,i,r,o){let s=e&&!HF(e),a;if(s)a=n;else{let I=n||{};a=I.index,i=I.injector,r=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef}let c=s?e:new Pc(eo(e)),u=i||this.parentInjector;if(!o&&c.ngModule==null){let x=(s?u:this.parentInjector).get(Jn,null);x&&(o=x)}let d=eo(c.componentType??{}),f=Lg(this._lContainer,d?.id??null),m=f?.firstChild??null,y=c.create(u,r,m,o);return this.insertImpl(y.hostView,a,Og(this._hostTNode,f)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(JF(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[St],u=new JT(c,c[ln],c[St]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return zT(s,r,o,i),e.attachToViewContainerRef(),EC(lg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=sC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=jd(this._lContainer,n);i&&(Md(lg(this._lContainer),n),ky(i[he],i))}detach(e){let n=this._adjustIndex(e,-1),i=jd(this._lContainer,n);return i&&Md(lg(this._lContainer),n)!=null?new so(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function sC(t){return t[Nd]}function lg(t){return t[Nd]||(t[Nd]=[])}function eS(t,e){let n,i=e[t.index];return Mi(i)?n=i:(n=jT(i,e,null,t),e[t.index]=n,ch(e,n)),xV(n,e,t,i),new JT(n,t,e)}function AV(t,e){let n=t[Ze],i=n.createComment(""),r=Dn(e,t),o=Py(n,r);return Bd(n,o,i,uL(n,r),!1),i}var xV=kV,RV=()=>!1;function MV(t,e,n){return RV(t,e,n)}function kV(t,e,n,i){if(t[no])return;let r;n.type&8?r=ti(i):r=AV(e,n),t[no]=r}var zg=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Gg=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Gy(e,n).matches!==null&&this.queries[n].setDirty()}},Wg=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=BV(e):this.predicate=e}},Kg=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Qg=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,PV(n,o)),this.matchTNodeWithReadOption(e,n,Td(n,e,o,!1,!1))}else i===En?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Td(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Oe||r===un||r===En&&n.type&4)this.addMatch(n.index,-2);else{let o=Td(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function PV(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function NV(t,e){return t.type&11?Os(t,e):t.type&4?qy(t,e):null}function OV(t,e,n,i){return n===-1?NV(e,t):n===-2?FV(t,e,i):oo(t,t[he],n,e)}function FV(t,e,n){if(n===Oe)return Os(e,t);if(n===En)return qy(e,t);if(n===un)return eS(e,t)}function tS(t,e,n,i){let r=e[Ti].queries[i];if(r.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let d=o[u];a.push(OV(e,d,s[c+1],n.metadata.read))}}r.matches=a}return r.matches}function Yg(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let s=tS(t,e,r,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)i.push(s[a/2]);else{let u=o[a+1],d=e[-c];for(let f=Zt;f<d.length;f++){let m=d[f];m[Lc]===m[St]&&Yg(m[he],m,u,i)}if(d[As]!==null){let f=d[As];for(let m=0;m<f.length;m++){let y=f[m];Yg(y[he],y,u,i)}}}}}return i}function LV(t,e){return t[Ti].queries[e].queryList}function VV(t,e,n){let i=new Vd((n&4)===4);return bL(t,e,i,i.destroy),(e[Ti]??=new Gg).queries.push(new zg(i))-1}function jV(t,e,n){let i=mt();return i.firstCreatePass&&(UV(i,new Wg(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),VV(i,De(),e)}function BV(t){return t.split(",").map(e=>e.trim())}function UV(t,e,n){t.queries===null&&(t.queries=new Kg),t.queries.track(new Qg(e,n))}function Gy(t,e){return t.queries.getByIndex(e)}function $V(t,e){let n=t[he],i=Gy(n,e);return i.crossesNgTemplate?Yg(n,t,e,[]):tS(n,t,i,e)}function nS(t){return typeof t=="function"&&t[Ei]!==void 0}function Wy(t,e){jc("NgSignals");let n=n0(t),i=n[Ei];return e?.equal&&(i.equal=e.equal),n.set=r=>Om(i,r),n.update=r=>i0(i,r),n.asReadonly=HV.bind(n),n}function HV(){let t=this[Ei];if(t.readonlyFn===void 0){let e=()=>this();e[Ei]=t,t.readonlyFn=e}return t.readonlyFn}function iS(t){return nS(t)&&typeof t.set=="function"}function qV(t){return Object.getPrototypeOf(t.prototype).constructor}function Et(t){let e=qV(t.type),n=!0,i=[t];for(;e;){let r;if(ar(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new me(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let s=t;s.inputs=Ed(t.inputs),s.inputTransforms=Ed(t.inputTransforms),s.declaredInputs=Ed(t.declaredInputs),s.outputs=Ed(t.outputs);let a=r.hostBindings;a&&QV(t,a);let c=r.viewQuery,u=r.contentQueries;if(c&&WV(t,c),u&&KV(t,u),zV(t,r),HO(t.outputs,r.outputs),ar(r)&&r.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Et&&(n=!1)}}e=Object.getPrototypeOf(e)}GV(i)}function zV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function GV(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Sc(r.hostAttrs,n=Sc(n,r.hostAttrs))}}function Ed(t){return t===Cs?{}:t===yn?[]:t}function WV(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function KV(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function QV(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function uo(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}var Rs=class{};var qd=class extends Rs{constructor(e){super(),this.componentFactoryResolver=new $g(this),this.instance=null;let n=new Pd([...e.providers,{provide:Rs,useValue:this},{provide:lo,useValue:this.componentFactoryResolver}],e.parent||Yd(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function YV(t,e,n=null){return new qd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var rS=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new sn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function oS(t){return XV(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function ZV(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),i;for(;!(i=n.next()).done;)e(i.value)}}function XV(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function sS(t,e,n){return t[e]=n}function JV(t,e){return t[e]}function ni(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function ej(t,e,n,i){let r=ni(t,e,n);return ni(t,e+1,i)||r}function tj(t,e,n,i,r){let o=ej(t,e,n,i);return ni(t,e+2,r)||o}function nj(t){return(t.flags&32)===32}function ij(t,e,n,i,r,o,s,a,c){let u=e.consts,d=Fs(e,t,4,s||null,xs(u,a));By(e,n,d,xs(u,c)),ih(e,d);let f=d.tView=Vy(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function dn(t,e,n,i,r,o,s,a){let c=De(),u=mt(),d=t+wn,f=u.firstCreatePass?ij(d,u,c,e,n,i,r,o,s):u.data[d];co(f,!1);let m=rj(u,c,f,t);th()&&oh(u,c,m,f),cr(m,c);let y=jT(m,c,m,f);return c[d]=y,ch(c,y),MV(y,f,c),Jd(f)&&Fy(u,c,f),s!=null&&Ly(c,f,a),dn}var rj=oj;function oj(t,e,n,i){return nh(!0),e[Ze].createComment("")}function ki(t,e,n,i){let r=De(),o=Ps();if(ni(r,o,e)){let s=mt(),a=eh();jL(a,r,t,e,n,i)}return ki}function sj(t,e,n,i){return ni(t,Ps(),n)?e+ly(n)+i:hr}function Id(t,e){return t<<17|e<<2}function ao(t){return t>>17&32767}function aj(t){return(t&2)==2}function cj(t,e){return t&131071|e<<17}function Zg(t){return t|2}function Ms(t){return(t&131068)>>2}function ug(t,e){return t&-131069|e<<2}function lj(t){return(t&1)===1}function Xg(t){return t|1}function uj(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=ao(s),c=Ms(s);t[i]=n;let u=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||Fc(f,d)>0)&&(u=!0)}else d=n;if(r)if(c!==0){let m=ao(t[a+1]);t[i+1]=Id(m,a),m!==0&&(t[m+1]=ug(t[m+1],i)),t[a+1]=cj(t[a+1],i)}else t[i+1]=Id(a,0),a!==0&&(t[a+1]=ug(t[a+1],i)),a=i;else t[i+1]=Id(c,0),a===0?a=i:t[c+1]=ug(t[c+1],i),c=i;u&&(t[i+1]=Zg(t[i+1])),aC(t,d,i,!0),aC(t,d,i,!1),dj(e,d,t,i,o),s=Id(a,c),o?e.classBindings=s:e.styleBindings=s}function dj(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Fc(o,e)>=0&&(n[i+1]=Xg(n[i+1]))}function aC(t,e,n,i){let r=t[n+1],o=e===null,s=i?ao(r):Ms(r),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],u=t[s+1];hj(c,e)&&(a=!0,t[s+1]=i?Xg(u):Zg(u)),s=i?ao(u):Ms(u)}a&&(t[n+1]=i?Zg(r):Xg(r))}function hj(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Fc(t,e)>=0:!1}function ke(t,e,n){let i=De(),r=Ps();if(ni(i,r,e)){let o=mt(),s=eh();jy(o,s,i,t,e,i[Ze],n,!1)}return ke}function cC(t,e,n,i,r){let o=e.inputs,s=r?"class":"style";Uy(t,n,o[s],s,i)}function ri(t,e){return fj(t,e,null,!0),ri}function fj(t,e,n,i){let r=De(),o=mt(),s=u1(2);if(o.firstUpdatePass&&mj(o,t,s,i),e!==hr&&ni(r,s,e)){let a=o.data[Ns()];wj(o,a,r,r[Ze],t,r[s+1]=Ej(e,n),i,s)}}function pj(t,e){return e>=t.expandoStartIndex}function mj(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[Ns()],s=pj(t,n);Ij(o,i)&&e===null&&!s&&(e=!1),e=gj(r,o,e,i),uj(r,o,e,n,s,i)}}function gj(t,e,n,i){let r=p1(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=dg(null,t,e,n,i),n=Nc(n,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=dg(r,t,e,n,i),o===null){let c=yj(t,e,i);c!==void 0&&Array.isArray(c)&&(c=dg(null,t,e,c[1],i),c=Nc(c,e.attrs,i),_j(t,e,i,c))}else o=vj(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function yj(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Ms(i)!==0)return t[ao(i)]}function _j(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[ao(r)]=i}function vj(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=Nc(i,s,n)}return Nc(i,e.attrs,n)}function dg(t,e,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],i=Nc(i,o.hostAttrs,r),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function Nc(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),hF(t,s,n?!0:e[++o]))}return t===void 0?null:t}function wj(t,e,n,i,r,o,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],d=lj(u)?lC(c,e,n,r,Ms(u),s):void 0;if(!zd(d)){zd(o)||aj(u)&&(o=lC(c,null,n,r,a,s));let f=$C(Ns(),n);gL(i,s,f,r,o)}}function lC(t,e,n,i,r,o){let s=e===null,a;for(;r>0;){let c=t[r],u=Array.isArray(c),d=u?c[1]:c,f=d===null,m=n[r+1];m===hr&&(m=f?yn:void 0);let y=f?eg(m,i):d===i?m:void 0;if(u&&!zd(y)&&(y=eg(c,i)),zd(y)&&(a=y,s))return a;let I=t[r+1];r=s?ao(I):Ms(I)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=eg(c,i))}return a}function zd(t){return t!==void 0}function Ej(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=_n(Ry(t)))),t}function Ij(t,e){return(t.flags&(e?8:16))!==0}function aS(t,e,n){jc("NgControlFlow");let i=De(),r=Ps(),o=Dj(i,wn+t),s=0;if(ni(i,r,e)){let a=Ae(null);try{if(KL(o,s),e!==-1){let c=bj(i[he],wn+e),u=Lg(o,c.tView.ssrId),d=qT(i,c,n,{dehydratedView:u});zT(o,d,s,Og(c,u))}}finally{Ae(a)}}else{let a=WL(o,s);a!==void 0&&(a[vn]=n)}}function Dj(t,e){return t[e]}function bj(t,e){return _y(t,e)}function Cj(t,e,n,i,r,o){let s=e.consts,a=xs(s,r),c=Fs(e,t,2,i,a);return By(e,n,c,xs(s,o)),c.attrs!==null&&Hd(c,c.attrs,!1),c.mergedAttrs!==null&&Hd(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Z(t,e,n,i){let r=De(),o=mt(),s=wn+t,a=r[Ze],c=o.firstCreatePass?Cj(s,o,r,e,n,i):o.data[s],u=Tj(o,r,c,a,e,t);r[s]=u;let d=Jd(c);return co(c,!0),MT(a,u,c),!nj(c)&&th()&&oh(o,r,u,c),i1()===0&&cr(u,r),r1(),d&&(Fy(o,r,c),Oy(o,c,r)),i!==null&&Ly(r,c),Z}function Q(){let t=Jt();Ey()?Iy():(t=t.parent,co(t,!1));let e=t;s1(e)&&a1(),o1();let n=mt();return n.firstCreatePass&&(ih(n,t),yy(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&E1(e)&&cC(n,e,De(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&I1(e)&&cC(n,e,De(),e.stylesWithoutHost,!1),Q}function at(t,e,n,i){return Z(t,e,n,i),Q(),at}var Tj=(t,e,n,i,r,o)=>(nh(!0),IT(i,r,y1()));function Sj(t,e,n,i,r){let o=e.consts,s=xs(o,i),a=Fs(e,t,8,"ng-container",s);s!==null&&Hd(a,s,!0);let c=xs(o,r);return By(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function cS(t,e,n){let i=De(),r=mt(),o=t+wn,s=r.firstCreatePass?Sj(o,r,i,e,n):r.data[o];co(s,!0);let a=Aj(r,i,s,t);return i[o]=a,th()&&oh(r,i,a,s),cr(a,i),Jd(s)&&(Fy(r,i,s),Oy(r,s,i)),n!=null&&Ly(i,s),cS}function lS(){let t=Jt(),e=mt();return Ey()?Iy():(t=t.parent,co(t,!1)),e.firstCreatePass&&(ih(e,t),yy(t)&&e.queries.elementEnd(t)),lS}function Ky(t,e,n){return cS(t,e,n),lS(),Ky}var Aj=(t,e,n,i)=>(nh(!0),eL(e[Ze],""));function uS(){return De()}function Qy(t,e,n){let i=De(),r=Ps();if(ni(i,r,e)){let o=mt(),s=eh();jy(o,s,i,t,e,i[Ze],n,!0)}return Qy}var Gd="en-US";var xj=Gd;function Rj(t){typeof t=="string"&&(xj=t.toLowerCase().replace(/_/g,"-"))}function Me(t,e,n,i){let r=De(),o=mt(),s=Jt();return dS(o,r,r[Ze],s,t,e,i),Me}function Mj(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=e[xc],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function dS(t,e,n,i,r,o,s){let a=Jd(i),u=t.firstCreatePass&&$T(t),d=e[vn],f=UT(e),m=!0;if(i.type&3||s){let x=Dn(i,e),A=s?s(x):x,j=f.length,q=s?W=>s(ti(W[i.index])):i.index,V=null;if(!s&&a&&(V=Mj(t,e,r,i.index)),V!==null){let W=V.__ngLastListenerFn__||V;W.__ngNextListenerFn__=o,V.__ngLastListenerFn__=o,m=!1}else{o=dC(i,e,d,o,!1);let W=n.listen(A,r,o);f.push(o,W),u&&u.push(r,q,j,j+1)}}else o=dC(i,e,d,o,!1);let y=i.outputs,I;if(m&&y!==null&&(I=y[r])){let x=I.length;if(x)for(let A=0;A<x;A+=2){let j=I[A],q=I[A+1],ie=e[j][q].subscribe(o),J=f.length;f.push(o,ie),u&&u.push(r,i.index,J,-(J+1))}}}function uC(t,e,n,i){let r=Ae(null);try{return Yn(6,e,n),n(i)!==!1}catch(o){return HT(t,o),!1}finally{Yn(7,e,n),Ae(r)}}function dC(t,e,n,i,r){return function o(s){if(s===Function)return i;let a=t.componentOffset>-1?ur(t.index,e):e;Hy(a);let c=uC(e,n,i,s),u=o.__ngNextListenerFn__;for(;u;)c=uC(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return r&&c===!1&&s.preventDefault(),c}}function hS(t=1){return g1(t)}function kj(t,e){let n=null,i=EF(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?TC(t,o,!0):bF(i,o))return r}return n}function Bc(t){let e=De()[On][ln];if(!e.projection){let n=t?t.length:1,i=e.projection=uF(n,null),r=i.slice(),o=e.child;for(;o!==null;){let s=t?kj(o,t):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Uc(t,e=0,n){let i=De(),r=mt(),o=Fs(r,wn+t,16,null,n||null);o.projection===null&&(o.projection=e),Iy(),(!i[Ac]||GC())&&(o.flags&32)!==32&&pL(r,i,o)}function $c(t,e,n){jV(t,e,n)}function Hc(t){let e=De(),n=mt(),i=ZC();Dy(i+1);let r=Gy(n,i);if(t.dirty&&XF(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=$V(e,i);t.reset(o,O1),t.notifyOnChanges()}return!0}return!1}function qc(){return LV(De(),ZC())}function He(t,e=""){let n=De(),i=mt(),r=t+wn,o=i.firstCreatePass?Fs(i,r,1,e,null):i.data[r],s=Pj(i,n,o,e,t);n[r]=s,th()&&oh(i,n,s,o),co(o,!1)}var Pj=(t,e,n,i,r)=>(nh(!0),X1(e[Ze],i));function Ls(t){return fr("",t,""),Ls}function fr(t,e,n){let i=De(),r=sj(i,t,e,n);return r!==hr&&HL(i,Ns(),r),fr}function zc(t,e,n){iS(e)&&(e=e());let i=De(),r=Ps();if(ni(i,r,e)){let o=mt(),s=eh();jy(o,s,i,t,e,i[Ze],n,!1)}return zc}function lh(t,e){let n=iS(t);return n&&t.set(e),n}function Gc(t,e){let n=De(),i=mt(),r=Jt();return dS(i,n,n[Ze],r,t,e),Gc}function Nj(t,e,n){let i=mt();if(i.firstCreatePass){let r=ar(t);Jg(n,i.data,i.blueprint,r,!0),Jg(e,i.data,i.blueprint,r,!1)}}function Jg(t,e,n,i,r){if(t=Ut(t),Array.isArray(t))for(let o=0;o<t.length;o++)Jg(t[o],e,n,i,r);else{let o=mt(),s=De(),a=Jt(),c=Ts(t)?t:Ut(t.provide),u=NC(t),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Ts(t)||!t.multi){let y=new ro(u,r,N),I=fg(c,e,r?d:d+m,f);I===-1?(Tg(Ld(a,s),o,c),hg(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[I]=y,s[I]=y)}else{let y=fg(c,e,d+m,f),I=fg(c,e,d,d+m),x=y>=0&&n[y],A=I>=0&&n[I];if(r&&!A||!r&&!x){Tg(Ld(a,s),o,c);let j=Lj(r?Fj:Oj,n.length,r,i,u);!r&&A&&(n[I].providerFactory=j),hg(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(j),s.push(j)}else{let j=fS(n[r?I:y],u,!r&&i);hg(o,t,y>-1?y:I,j)}!r&&i&&A&&n[I].componentProviders++}}}function hg(t,e,n,i){let r=Ts(e),o=FF(e);if(r||o){let c=(o?Ut(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let d=u.indexOf(n);d===-1?u.push(n,[i,c]):u[d+1].push(i,c)}else u.push(n,c)}}}function fS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function fg(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function Oj(t,e,n,i){return ey(this.multi,[])}function Fj(t,e,n,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=oo(n,n[he],this.providerFactory.index,i);o=a.slice(0,s),ey(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],ey(r,o);return o}function ey(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function Lj(t,e,n,i,r){let o=new ro(t,n,N);return o.multi=[],o.index=e,o.componentProviders=0,fS(o,r,i&&!n),o}function At(t,e=[]){return n=>{n.providersResolver=(i,r)=>Nj(i,r?r(t):t,e)}}var Vj=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=MC(!1,i.type),o=r.length>0?YV([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=B({token:e,providedIn:"environment",factory:()=>new e(C(Jn))});let t=e;return t})();function pe(t){jc("NgStandalone"),t.getStandaloneInjector=e=>e.get(Vj).getOrCreateStandaloneInjector(t)}function ho(t,e,n){let i=YC()+t,r=De();return r[i]===hr?sS(r,i,n?e.call(n):e()):JV(r,i)}function pS(t,e,n,i,r,o){return Bj(De(),YC(),t,e,n,i,r,o)}function jj(t,e){let n=t[e];return n===hr?void 0:n}function Bj(t,e,n,i,r,o,s,a){let c=e+n;return tj(t,c,r,o,s)?sS(t,c+3,a?i.call(a,r,o,s):i(r,o,s)):jj(t,c+3)}var lr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Yy=new lr("17.3.11");var mS=new O("");function Wc(t){return!!t&&typeof t.then=="function"}function gS(t){return!!t&&typeof t.subscribe=="function"}var Zy=new O(""),yS=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=Y(Zy,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let s=o();if(Wc(s))i.push(s);else if(gS(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Uj=new O("");function $j(){t0(()=>{throw new me(600,!1)})}function Hj(t){return t.isBoundToModule}function qj(t,e,n){try{let i=n();return Wc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var fo=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Y(pT),this.afterRenderEffectManager=Y(XT),this.externalTestViews=new Set,this.beforeRender=new z,this.afterTick=new z,this.componentTypes=[],this.components=[],this.isStable=Y(rS).hasPendingTasks.pipe(ye(i=>!i)),this._injector=Y(Jn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof $d;if(!this._injector.get(yS).done){let y=!o&&RF(i),I=!1;throw new me(405,I)}let a;o?a=i:a=this._injector.get(lo).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let c=Hj(a)?void 0:this._injector.get(Rs),u=r||a.selector,d=a.create(We.NULL,[],u,c),f=d.location.nativeElement,m=d.injector.get(mS,null);return m?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),pg(this.components,d),m?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new me(101,!1);let r=Ae(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,Ae(r)}}detectChangesInAttachedViews(i){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===WT)throw new me(103,!1);if(i){let s=r===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)zj(a,s,c)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>ty(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>ty(s))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;pg(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(Uj,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>pg(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new me(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pg(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function zj(t,e,n){!e&&!ty(t)||Gj(t,n,e)}function ty(t){return wy(t)}function Gj(t,e,n){let i;n?(i=0,t[ae]|=1024):t[ae]&64?i=0:i=1,KT(t,e,i)}var Wj=(()=>{let e=class e{constructor(){this.zone=Y(te),this.applicationRef=Y(fo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Kj(t){return[{provide:te,useFactory:t},{provide:Ci,multi:!0,useFactory:()=>{let e=Y(Wj,{optional:!0});return()=>e.initialize()}},{provide:Ci,multi:!0,useFactory:()=>{let e=Y(Xj);return()=>{e.initialize()}}},{provide:pT,useFactory:Qj}]}function Qj(){let t=Y(te),e=Y(Fn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function Yj(t){let e=Kj(()=>new te(Zj(t)));return Xt([[],e])}function Zj(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Xj=(()=>{let e=class e{constructor(){this.subscription=new Pe,this.initialized=!1,this.zone=Y(te),this.pendingTasks=Y(rS)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{te.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{te.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Jj(){return typeof $localize<"u"&&$localize.locale||Gd}var Xy=new O("",{providedIn:"root",factory:()=>Y(Xy,Ie.Optional|Ie.SkipSelf)||Jj()});var _S=new O("");var Ad=null;function e2(t=[],e){return We.create({name:e,providers:[{provide:Qd,useValue:"platform"},{provide:_S,useValue:new Set([()=>Ad=null])},...t]})}function t2(t=[]){if(Ad)return Ad;let e=e2(t);return Ad=e,$j(),n2(e),e}function n2(t){t.get(Sy,null)?.forEach(n=>n())}function Vs(){return!1}var ct=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=i2;let t=e;return t})();function i2(t){return r2(Jt(),De(),(t&16)===16)}function r2(t,e,n){if(Xd(t)&&!n){let i=ur(t.index,e);return new so(i,i)}else if(t.type&47){let i=e[On];return new so(i,e)}return null}var ny=class{constructor(){}supports(e){return oS(e)}create(e){return new iy(e)}},o2=(t,e)=>e,iy=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||o2}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){let s=!i||n&&n.currentIndex<hC(i,r,o)?n:i,a=hC(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,d=c-r;if(u!=d){for(let m=0;m<u;m++){let y=m<o.length?o[m]:o[m]=0,I=y+m;d<=I&&I<u&&(o[m]=y+1)}let f=s.previousIndex;o[f]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!oS(e))throw new me(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),i=!0):(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else r=0,ZV(e,a=>{s=this._trackByFn(r,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new ry(n,i),o,r)),e}_verifyReinsertion(e,n,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){let r=n===null?this._itHead:n._next;return e._next=r,e._prev=n,r===null?this._itTail=e:r._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Wd),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,i=e._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Wd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ry=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},oy=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let n=e._prevDup,i=e._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},Wd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,i=this.map.get(n);i||(i=new oy,this.map.set(n,i)),i.add(e)}get(e,n){let i=e,r=this.map.get(i);return r?r.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function hC(t,e,n){let i=t.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function fC(){return new uh([new ny])}var uh=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||fC()),deps:[[e,new aF,new vt]]}}find(i){let r=this.factories.find(o=>o.supports(i));if(r!=null)return r;throw new me(901,!1)}};e.\u0275prov=B({token:e,providedIn:"root",factory:fC});let t=e;return t})();function vS(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=t2(i),o=[Yj(),...n||[]],a=new qd({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(te);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(Fn,null),d;c.runOutsideAngular(()=>{d=c.onError.subscribe({next:y=>{u.handleError(y)}})});let f=()=>a.destroy(),m=r.get(_S);return m.add(f),a.onDestroy(()=>{d.unsubscribe(),m.delete(f)}),qj(u,c,()=>{let y=a.get(yS);return y.runInitializers(),y.donePromise.then(()=>{let I=a.get(Xy,Gd);Rj(I||Gd);let x=a.get(fo);return e!==void 0&&x.bootstrap(e),x})})})}catch(e){return Promise.reject(e)}}function oi(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function dh(t,e){jc("NgSignals");let n=Xb(t);return e?.equal&&(n[Ei].equal=e.equal),n}function wS(t,e){let n=eo(t),i=e.elementInjector||Yd();return new Pc(n).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}var CS=null;function Pi(){return CS}function TS(t){CS??=t}var hh=class{};var _e=new O(""),SS=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:()=>Y(c2),providedIn:"platform"});let t=e;return t})();var c2=(()=>{let e=class e extends SS{constructor(){super(),this._doc=Y(_e),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pi().getBaseHref(this._doc)}onPopState(i){let r=Pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function AS(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function ES(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function po(t){return t&&t[0]!=="?"?"?"+t:t}var t_=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:()=>Y(u2),providedIn:"root"});let t=e;return t})(),l2=new O(""),u2=(()=>{let e=class e extends t_{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Y(_e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return AS(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+po(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+po(s));this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+po(s));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(C(SS),C(l2,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Kc=(()=>{let e=class e{constructor(i){this._subject=new we,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=f2(ES(IS(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+po(r))}normalize(i){return e.stripTrailingSlash(h2(this._basePath,IS(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+po(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+po(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=po,e.joinWithSlash=AS,e.stripTrailingSlash=ES,e.\u0275fac=function(r){return new(r||e)(C(t_))},e.\u0275prov=B({token:e,factory:()=>d2(),providedIn:"root"});let t=e;return t})();function d2(){return new Kc(C(t_))}function h2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function IS(t){return t.replace(/\/index.html$/,"")}function f2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function xS(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var Jy=/\s+/,DS=[],ph=(()=>{let e=class e{constructor(i,r){this._ngEl=i,this._renderer=r,this.initialClasses=DS,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(Jy):DS}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(Jy):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let o=this.stateMap.get(i);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],o=i[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(Jy).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(r){return new(r||e)(N(Oe),N(ii))},e.\u0275dir=Le({type:e,selectors:[["","ngClass",""]],inputs:{klass:[le.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var e_=class{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},js=(()=>{let e=class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,o){this._viewContainer=i,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((o,s,a)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new e_(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,a),bS(c,o)}});for(let o=0,s=r.length;o<s;o++){let c=r.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}i.forEachIdentityChange(o=>{let s=r.get(o.currentIndex);bS(s,o)})}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(N(un),N(En),N(uh))},e.\u0275dir=Le({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function bS(t,e){t.context.$implicit=e.item}var gt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Xe({});let t=e;return t})(),n_="browser",p2="server";function RS(t){return t===n_}function mo(t){return t===p2}var fh=class{};var o_=class extends hh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},s_=class t extends o_{static makeCurrent(){TS(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=g2();return n==null?null:y2(n)}resetBaseElement(){Qc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return xS(document.cookie,e)}},Qc=null;function g2(){return Qc=Qc||document.querySelector("base"),Qc?Qc.getAttribute("href"):null}function y2(t){return new URL(t,document.baseURI).pathname}var _2=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),a_=new O(""),NS=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new me(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(C(a_),C(te))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),gh=class{constructor(e){this._doc=e}},i_="ng-app-id",OS=(()=>{let e=class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=mo(s),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${i_}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(i_),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(i_,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(C(_e),C(rh),C(Ay,8),C($t))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),r_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},l_=/%COMP%/g,FS="%COMP%",v2=`_nghost-${FS}`,w2=`_ngcontent-${FS}`,E2=!0,I2=new O("",{providedIn:"root",factory:()=>E2});function D2(t){return w2.replace(l_,t)}function b2(t){return v2.replace(l_,t)}function LS(t,e){return e.map(n=>n.replace(l_,t))}var MS=(()=>{let e=class e{constructor(i,r,o,s,a,c,u,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=mo(c),this.defaultRenderer=new Yc(i,a,u,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Xn.ShadowDom&&(r=Re(ee({},r),{encapsulation:Xn.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof yh?o.applyToHost(i):o instanceof Zc&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Xn.Emulated:s=new yh(u,d,r,this.appId,f,a,c,m);break;case Xn.ShadowDom:return new c_(u,d,i,r,a,c,this.nonce,m);default:s=new Zc(u,d,r,f,a,c,m);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(C(NS),C(OS),C(rh),C(I2),C(_e),C($t),C(te),C(Ay))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),Yc=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(r_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(kS(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(kS(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new me(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=r_[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=r_[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(Si.DashCase|Si.Important)?e.style.setProperty(n,i,r&Si.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&Si.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Pi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function kS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var c_=class extends Yc{constructor(e,n,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=LS(r.id,r.styles);for(let d of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Zc=class extends Yc{constructor(e,n,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?LS(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},yh=class extends Zc{constructor(e,n,i,r,o,s,a,c){let u=r+"-"+i.id;super(e,n,i,o,s,a,c,u),this.contentAttr=D2(u),this.hostAttr=b2(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},C2=(()=>{let e=class e extends gh{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(C(_e))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),PS=["alt","control","meta","shift"],T2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},S2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},A2=(()=>{let e=class e extends gh{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pi().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),PS.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(i,r){let o=T2[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),PS.forEach(a=>{if(a!==o){let c=S2[a];c(i)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(C(_e))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function VS(t,e){return vS(ee({rootComponent:t},x2(e)))}function x2(t){return{appProviders:[...N2,...t?.providers??[]],platformProviders:P2}}function R2(){s_.makeCurrent()}function M2(){return new Fn}function k2(){return wT(document),document}var P2=[{provide:$t,useValue:n_},{provide:Sy,useValue:R2,multi:!0},{provide:_e,useFactory:k2,deps:[]}];var N2=[{provide:Qd,useValue:"root"},{provide:Fn,useFactory:M2,deps:[]},{provide:a_,useClass:C2,multi:!0,deps:[_e,te,$t]},{provide:a_,useClass:A2,multi:!0,deps:[_e]},MS,OS,NS,{provide:Ai,useExisting:MS},{provide:fh,useClass:_2,deps:[]},[]];function Ht(t){t||(my(Ht),t=Y(wt));let e=new ne(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(cn(e))}function u_(t,e){let n=!e?.manualCleanup;n&&!e?.injector&&my(u_);let i=n?e?.injector?.get(wt)??Y(wt):null,r;e?.requireSync?r=Wy({kind:0}):r=Wy({kind:1,value:e?.initialValue});let o=t.subscribe({next:s=>r.set({kind:1,value:s}),error:s=>{if(e?.rejectErrors)throw s;r.set({kind:2,error:s})}});return i?.onDestroy(o.unsubscribe.bind(o)),dh(()=>{let s=r();switch(s.kind){case 1:return s.value;case 2:throw s.error;case 0:throw new me(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var f_={};function Ni(t,e){if(f_[t]=(f_[t]||0)+1,typeof e=="function")return d_(t,(...i)=>Re(ee({},e(...i)),{type:t}));switch(e?e._as:"empty"){case"empty":return d_(t,()=>({type:t}));case"props":return d_(t,i=>Re(ee({},i),{type:t}));default:throw new Error("Unexpected config.")}}function Bs(){return{_as:"props",_p:void 0}}function d_(t,e){return Object.defineProperty(e,"type",{value:t,writable:!1})}var ZS="@ngrx/store/init",Us=(()=>{let e=class e extends sn{constructor(){super({type:ZS})}next(i){if(typeof i=="function")throw new TypeError(`
        Dispatch expected an object, instead it received a function.
        If you're using the createAction function, make sure to invoke the function
        before dispatching the action. For example, someAction should be someAction().`);if(typeof i>"u")throw new TypeError("Actions must be objects");if(typeof i.type>"u")throw new TypeError("Actions must have a type property");super.next(i)}complete(){}ngOnDestroy(){super.complete()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),F2=[Us],XS=new O("@ngrx/store Internal Root Guard"),jS=new O("@ngrx/store Internal Initial State"),__=new O("@ngrx/store Initial State"),JS=new O("@ngrx/store Reducer Factory"),BS=new O("@ngrx/store Internal Reducer Factory Provider"),eA=new O("@ngrx/store Initial Reducers"),h_=new O("@ngrx/store Internal Initial Reducers"),yY=new O("@ngrx/store Store Features"),US=new O("@ngrx/store Internal Store Reducers"),_Y=new O("@ngrx/store Internal Feature Reducers"),vY=new O("@ngrx/store Internal Feature Configs"),wY=new O("@ngrx/store Internal Store Features"),EY=new O("@ngrx/store Internal Feature Reducers Token"),IY=new O("@ngrx/store Feature Reducers"),$S=new O("@ngrx/store User Provided Meta Reducers"),_h=new O("@ngrx/store Meta Reducers"),HS=new O("@ngrx/store Internal Resolved Meta Reducers"),qS=new O("@ngrx/store User Runtime Checks Config"),zS=new O("@ngrx/store Internal User Runtime Checks Config"),Xc=new O("@ngrx/store Internal Runtime Checks"),tA=new O("@ngrx/store Check if Action types are unique"),vh=new O("@ngrx/store Root Store Provider"),nA=new O("@ngrx/store Feature State Provider");function L2(t,e={}){let n=Object.keys(t),i={};for(let o=0;o<n.length;o++){let s=n[o];typeof t[s]=="function"&&(i[s]=t[s])}let r=Object.keys(i);return function(s,a){s=s===void 0?e:s;let c=!1,u={};for(let d=0;d<r.length;d++){let f=r[d],m=i[f],y=s[f],I=m(y,a);u[f]=I,c=c||I!==y}return c?u:s}}function V2(t,e){return Object.keys(t).filter(n=>n!==e).reduce((n,i)=>Object.assign(n,{[i]:t[i]}),{})}function iA(...t){return function(e){if(t.length===0)return e;let n=t[t.length-1];return t.slice(0,-1).reduceRight((r,o)=>o(r),n(e))}}function rA(t,e){return Array.isArray(e)&&e.length>0&&(t=iA.apply(null,[...e,t])),(n,i)=>{let r=t(n);return(o,s)=>(o=o===void 0?i:o,r(o,s))}}function j2(t){let e=Array.isArray(t)&&t.length>0?iA(...t):n=>n;return(n,i)=>(n=e(n),(r,o)=>(r=r===void 0?i:r,n(r,o)))}var Jc=class extends ne{},wh=class extends Us{},B2="@ngrx/store/update-reducers",p_=(()=>{let e=class e extends sn{get currentReducers(){return this.reducers}constructor(i,r,o,s){super(s(o,r)),this.dispatcher=i,this.initialState=r,this.reducers=o,this.reducerFactory=s}addFeature(i){this.addFeatures([i])}addFeatures(i){let r=i.reduce((o,{reducers:s,reducerFactory:a,metaReducers:c,initialState:u,key:d})=>{let f=typeof s=="function"?j2(c)(s,u):rA(a,c)(s,u);return o[d]=f,o},{});this.addReducers(r)}removeFeature(i){this.removeFeatures([i])}removeFeatures(i){this.removeReducers(i.map(r=>r.key))}addReducer(i,r){this.addReducers({[i]:r})}addReducers(i){this.reducers=ee(ee({},this.reducers),i),this.updateReducers(Object.keys(i))}removeReducer(i){this.removeReducers([i])}removeReducers(i){i.forEach(r=>{this.reducers=V2(this.reducers,r)}),this.updateReducers(i)}updateReducers(i){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:B2,features:i})}ngOnDestroy(){this.complete()}};e.\u0275fac=function(r){return new(r||e)(C(wh),C(__),C(eA),C(JS))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),U2=[p_,{provide:Jc,useExisting:p_},{provide:wh,useExisting:Us}],el=(()=>{let e=class e extends z{ngOnDestroy(){this.complete()}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=dr(e)))(o||e)}})(),e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),$2=[el],Eh=class extends ne{},GS=(()=>{let e=class e extends sn{constructor(i,r,o,s){super(s);let c=i.pipe(Bt(Ec)).pipe(Jm(r)),u={state:s},d=c.pipe(Zr(H2,u));this.stateSubscription=d.subscribe(({state:f,action:m})=>{this.next(f),o.next(m)}),this.state=u_(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}};e.INIT=ZS,e.\u0275fac=function(r){return new(r||e)(C(Us),C(Jc),C(el),C(__))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function H2(t={state:void 0},[e,n]){let{state:i}=t;return{state:n(i,e),action:e}}var q2=[GS,{provide:Eh,useExisting:GS}],Ln=(()=>{let e=class e extends ne{constructor(i,r,o){super(),this.actionsObserver=r,this.reducerManager=o,this.source=i,this.state=i.state}select(i,...r){return G2.call(null,i,...r)(this)}selectSignal(i,r){return dh(()=>i(this.state()),r)}lift(i){let r=new e(this,this.actionsObserver,this.reducerManager);return r.operator=i,r}dispatch(i){this.actionsObserver.next(i)}next(i){this.actionsObserver.next(i)}error(i){this.actionsObserver.error(i)}complete(){this.actionsObserver.complete()}addReducer(i,r){this.reducerManager.addReducer(i,r)}removeReducer(i){this.reducerManager.removeReducer(i)}};e.\u0275fac=function(r){return new(r||e)(C(Eh),C(Us),C(p_))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),z2=[Ln];function G2(t,e,...n){return function(r){let o;if(typeof t=="string"){let s=[e,...n].filter(Boolean);o=r.pipe(Ym(t,...s))}else if(typeof t=="function")o=r.pipe(ye(s=>t(s,e)));else throw new TypeError(`Unexpected type '${typeof t}' in select operator, expected 'string' or 'function'`);return o.pipe(or())}}var v_="https://ngrx.io/guide/store/configuration/runtime-checks";function WS(t){return t===void 0}function KS(t){return t===null}function oA(t){return Array.isArray(t)}function W2(t){return typeof t=="string"}function K2(t){return typeof t=="boolean"}function Q2(t){return typeof t=="number"}function sA(t){return typeof t=="object"&&t!==null}function Y2(t){return sA(t)&&!oA(t)}function Z2(t){if(!Y2(t))return!1;let e=Object.getPrototypeOf(t);return e===Object.prototype||e===null}function m_(t){return typeof t=="function"}function X2(t){return m_(t)&&t.hasOwnProperty("\u0275cmp")}function J2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var eB=!1;function tB(){return eB}function QS(t,e){return t===e}function nB(t,e,n){for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!0;return!1}function aA(t,e=QS,n=QS){let i=null,r=null,o;function s(){i=null,r=null}function a(d=void 0){o={result:d}}function c(){o=void 0}function u(){if(o!==void 0)return o.result;if(!i)return r=t.apply(null,arguments),i=arguments,r;if(!nB(arguments,i,e))return r;let d=t.apply(null,arguments);return i=arguments,n(r,d)?r:(r=d,d)}return{memoized:u,reset:s,setResult:a,clearResult:c}}function tl(...t){return rB(aA)(...t)}function iB(t,e,n,i){if(n===void 0){let o=e.map(s=>s(t));return i.memoized.apply(null,o)}let r=e.map(o=>o(t,n));return i.memoized.apply(null,[...r,n])}function rB(t,e={stateFn:iB}){return function(...n){let i=n;if(Array.isArray(i[0])){let[d,...f]=i;i=[...d,...f]}else i.length===1&&oB(i[0])&&(i=sB(i[0]));let r=i.slice(0,i.length-1),o=i[i.length-1],s=r.filter(d=>d.release&&typeof d.release=="function"),a=t(function(...d){return o.apply(null,d)}),c=aA(function(d,f){return e.stateFn.apply(null,[d,r,f,a])});function u(){c.reset(),a.reset(),s.forEach(d=>d.release())}return Object.assign(c.memoized,{release:u,projector:a.memoized,setResult:c.setResult,clearResult:c.clearResult})}}function Ih(t){return tl(e=>{let n=e[t];return!tB()&&Vs()&&!(t in e)&&console.warn(`@ngrx/store: The feature name "${t}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${t}', ...) or StoreModule.forFeature('${t}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),n},e=>e)}function oB(t){return!!t&&typeof t=="object"&&Object.values(t).every(e=>typeof e=="function")}function sB(t){let e=Object.values(t),n=Object.keys(t),i=(...r)=>n.reduce((o,s,a)=>Re(ee({},o),{[s]:r[a]}),{});return[...e,i]}function aB(t){return t instanceof O?Y(t):t}function cB(t){return typeof t=="function"?t():t}function lB(t,e){return t.concat(e)}function uB(){if(Y(Ln,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function dB(t,e){return function(n,i){let r=e.action(i)?g_(i):i,o=t(n,r);return e.state()?g_(o):o}}function g_(t){Object.freeze(t);let e=m_(t);return Object.getOwnPropertyNames(t).forEach(n=>{if(!n.startsWith("\u0275")&&J2(t,n)&&(!e||n!=="caller"&&n!=="callee"&&n!=="arguments")){let i=t[n];(sA(i)||m_(i))&&!Object.isFrozen(i)&&g_(i)}}),t}function hB(t,e){return function(n,i){if(e.action(i)){let o=y_(i);YS(o,"action")}let r=t(n,i);if(e.state()){let o=y_(r);YS(o,"state")}return r}}function y_(t,e=[]){return(WS(t)||KS(t))&&e.length===0?{path:["root"],value:t}:Object.keys(t).reduce((i,r)=>{if(i)return i;let o=t[r];return X2(o)?i:WS(o)||KS(o)||Q2(o)||K2(o)||W2(o)||oA(o)?!1:Z2(o)?y_(o,[...e,r]):{path:[...e,r],value:o}},!1)}function YS(t,e){if(t===!1)return;let n=t.path.join("."),i=new Error(`Detected unserializable ${e} at "${n}". ${v_}#strict${e}serializability`);throw i.value=t.value,i.unserializablePath=n,i}function fB(t,e){return function(n,i){if(e.action(i)&&!te.isInAngularZone())throw new Error(`Action '${i.type}' running outside NgZone. ${v_}#strictactionwithinngzone`);return t(n,i)}}function pB(t){return Vs()?ee({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},t):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function mB({strictActionSerializability:t,strictStateSerializability:e}){return n=>t||e?hB(n,{action:i=>t&&!w_(i),state:()=>e}):n}function gB({strictActionImmutability:t,strictStateImmutability:e}){return n=>t||e?dB(n,{action:i=>t&&!w_(i),state:()=>e}):n}function w_(t){return t.type.startsWith("@ngrx")}function yB({strictActionWithinNgZone:t}){return e=>t?fB(e,{action:n=>t&&!w_(n)}):e}function _B(t){return[{provide:zS,useValue:t},{provide:qS,useFactory:wB,deps:[zS]},{provide:Xc,deps:[qS],useFactory:pB},{provide:_h,multi:!0,deps:[Xc],useFactory:gB},{provide:_h,multi:!0,deps:[Xc],useFactory:mB},{provide:_h,multi:!0,deps:[Xc],useFactory:yB}]}function vB(){return[{provide:tA,multi:!0,deps:[Xc],useFactory:EB}]}function wB(t){return t}function EB(t){if(!t.strictActionTypeUniqueness)return;let e=Object.entries(f_).filter(([,n])=>n>1).map(([n])=>n);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(n=>`"${n}"`).join(", ")}. ${v_}#strictactiontypeuniqueness`)}function IB(t={},e={}){return[{provide:XS,useFactory:uB},{provide:jS,useValue:e.initialState},{provide:__,useFactory:cB,deps:[jS]},{provide:h_,useValue:t},{provide:US,useExisting:t instanceof O?t:h_},{provide:eA,deps:[h_,[new wC(US)]],useFactory:aB},{provide:$S,useValue:e.metaReducers?e.metaReducers:[]},{provide:HS,deps:[_h,$S],useFactory:lB},{provide:BS,useValue:e.reducerFactory?e.reducerFactory:L2},{provide:JS,deps:[BS,HS],useFactory:rA},F2,U2,$2,q2,z2,_B(e.runtimeChecks),vB()]}function DB(){Y(Us),Y(Jc),Y(el),Y(Ln),Y(XS,{optional:!0}),Y(tA,{optional:!0})}var bB=[{provide:vh,useFactory:DB},{provide:Ci,multi:!0,useFactory(){return()=>Y(vh)}}];function cA(t,e){return Xt([...IB(t,e),bB])}function $s(...t){let e=t.pop(),n=t.map(i=>i.type);return{reducer:e,types:n}}function Dh(t,...e){let n=new Map;for(let i of e)for(let r of i.types){let o=n.get(r);if(o){let s=(a,c)=>i.reducer(o(a,c),c);n.set(r,s)}else n.set(r,i.reducer)}return function(i=t,r){let o=n.get(r.type);return o?o(i,r):i}}var CB={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},bh="__@ngrx/effects_create__";function lA(t,e={}){let n=e.functional?t:t(),i=ee(ee({},CB),e);return Object.defineProperty(n,bh,{value:i}),n}function TB(t){return Object.getOwnPropertyNames(t).filter(i=>t[i]&&t[i].hasOwnProperty(bh)?t[i][bh].hasOwnProperty("dispatch"):!1).map(i=>{let r=t[i][bh];return ee({propertyName:i},r)})}function SB(t){return TB(t)}function uA(t){return Object.getPrototypeOf(t)}function AB(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function dA(t){return typeof t=="function"}function xB(t){return t.filter(dA)}function RB(t,e,n){let i=uA(t),o=!!i&&i.constructor.name!=="Object"?i.constructor.name:null,s=SB(t).map(({propertyName:a,dispatch:c,useEffectsErrorHandler:u})=>{let d=typeof t[a]=="function"?t[a]():t[a],f=u?n(d,e):d;return c===!1?f.pipe(Wm()):f.pipe(Qm()).pipe(ye(y=>({effect:t[a],notification:y,propertyName:a,sourceName:o,sourceInstance:t})))});return Yt(...s)}var MB=10;function hA(t,e,n=MB){return t.pipe(md(i=>(e&&e.handleError(i),n<=1?t:hA(t,e,n-1))))}var fA=(()=>{let e=class e extends ne{constructor(i){super(),i&&(this.source=i)}lift(i){let r=new e;return r.source=this,r.operator=i,r}};e.\u0275fac=function(r){return new(r||e)(C(el))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pA(...t){return Ge(e=>t.some(n=>typeof n=="string"?n===e.type:n.type===e.type))}var FY=new O("@ngrx/effects Internal Root Guard"),LY=new O("@ngrx/effects User Provided Effects"),VY=new O("@ngrx/effects Internal Root Effects"),jY=new O("@ngrx/effects Internal Root Effects Instances"),BY=new O("@ngrx/effects Internal Feature Effects"),UY=new O("@ngrx/effects Internal Feature Effects Instance Groups"),kB=new O("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>hA}),PB="@ngrx/effects/init",NB=Ni(PB);function OB(t,e){if(t.notification.kind==="N"){let n=t.notification.value;!FB(n)&&e.handleError(new Error(`Effect ${LB(t)} dispatched an invalid action: ${VB(n)}`))}}function FB(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function LB({propertyName:t,sourceInstance:e,sourceName:n}){let i=typeof e[t]=="function";return!!n?`"${n}.${String(t)}${i?"()":""}"`:`"${String(t)}()"`}function VB(t){try{return JSON.stringify(t)}catch{return t}}var jB="ngrxOnIdentifyEffects";function BB(t){return I_(t,jB)}var UB="ngrxOnRunEffects";function $B(t){return I_(t,UB)}var HB="ngrxOnInitEffects";function qB(t){return I_(t,HB)}function I_(t,e){return t&&e in t&&typeof t[e]=="function"}var mA=(()=>{let e=class e extends z{constructor(i,r){super(),this.errorHandler=i,this.effectsErrorHandler=r}addEffects(i){this.next(i)}toActions(){return this.pipe(_d(i=>AB(i)?uA(i):i),bi(i=>i.pipe(_d(zB))),bi(i=>{let r=i.pipe(gd(s=>GB(this.errorHandler,this.effectsErrorHandler)(s)),ye(s=>(OB(s,this.errorHandler),s.notification)),Ge(s=>s.kind==="N"&&s.value!=null),Km()),o=i.pipe(Ot(1),Ge(qB),ye(s=>s.ngrxOnInitEffects()));return Yt(r,o)}))}};e.\u0275fac=function(r){return new(r||e)(C(Fn),C(kB))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zB(t){return BB(t)?t.ngrxOnIdentifyEffects():""}function GB(t,e){return n=>{let i=RB(n,t,e);return $B(n)?n.ngrxOnRunEffects(i):i}}var WB=(()=>{let e=class e{get isStarted(){return!!this.effectsSubscription}constructor(i,r){this.effectSources=i,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(C(mA),C(Ln))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gA(...t){let e=t.flat(),n=xB(e);return Xt([n,{provide:Ci,multi:!0,useValue:()=>{Y(vh),Y(nA,{optional:!0});let i=Y(WB),r=Y(mA),o=!i.isStarted;o&&i.start();for(let s of e){let a=dA(s)?Y(s):s;r.addEffects(a)}o&&Y(Ln).dispatch(NB())}}])}var Ch=Ni("[Theme] Set Dark Mode",Bs()),Th=Ni("[Theme] Load Dark Mode"),Sh=Ni("[Theme] Load Dark Mode Success",Bs());var QB=Ih("theme"),yA=tl(QB,t=>t.isDarkMode);var b_="isDarkMode",_A=(()=>{let e=class e{constructor(i){this.store=i,this.initializeTheme()}initializeTheme(){this.store.dispatch(Th())}setDarkMode(i){this.store.dispatch(Ch({isDarkMode:i})),localStorage.setItem(b_,JSON.stringify(i))}getDarkMode(){return this.store.select(yA)}};e.\u0275fac=function(r){return new(r||e)(C(Ln))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var vA=(()=>{let e=class e{constructor(i){this.actions$=i,this.loadDarkMode$=lA(()=>this.actions$.pipe(pA(Th),Tt(()=>{let r=localStorage.getItem(b_),o=r?JSON.parse(r):!1;return nt(Sh({isDarkMode:o}))})))}};e.\u0275fac=function(r){return new(r||e)(C(fA))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ZB={isDarkMode:!1},XB=Dh(ZB,$s(Ch,(t,{isDarkMode:e})=>Re(ee({},t),{isDarkMode:e})),$s(Sh,(t,{isDarkMode:e})=>Re(ee({},t),{isDarkMode:e})));function wA(t,e){return XB(t,e)}function go(t,e=0){return JB(t)?Number(t):e}function JB(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function nl(t){return Array.isArray(t)?t:[t]}function it(t){return t==null?"":typeof t=="string"?t:`${t}px`}function lt(t){return t instanceof Oe?t.nativeElement:t}var T_;try{T_=typeof Intl<"u"&&Intl.v8BreakIterator}catch{T_=!1}var en=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?RS(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||T_)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(C($t))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var il;function eU(){if(il==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>il=!0}))}finally{il=il||!1}return il}function pr(t){return eU()?t:!!t.capture}var yo;function EA(){if(yo==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return yo=!1,yo;if("scrollBehavior"in document.documentElement.style)yo=!0;else{let t=Element.prototype.scrollTo;t?yo=!/\{\s*\[native code\]\s*\}/.test(t.toString()):yo=!1}}return yo}var C_;function tU(){if(C_==null){let t=typeof document<"u"?document.head:null;C_=!!(t&&(t.createShadowRoot||t.attachShadow))}return C_}function rl(t){if(tU()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function ol(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function tn(t){return t.composedPath?t.composedPath()[0]:t.target}function S_(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var nU=new O("cdk-dir-doc",{providedIn:"root",factory:iU});function iU(){return Y(_e)}var rU=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function oU(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?rU.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var mr=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new we,i){let r=i.body?i.body.dir:null,o=i.documentElement?i.documentElement.dir:null;this.value=oU(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(C(nU,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var sU=20,Ah=(()=>{let e=class e{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new z,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=sU){return this._platform.isBrowser?new ne(r=>{this._globalSubscription||this._addGlobalListener();let o=i>0?this._scrolled.pipe(pd(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):nt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(Ge(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,i)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=lt(r),s=i.getElementRef().nativeElement;do if(o==s)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return Ic(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(C(te),C(en),C(_e,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var aU=20,sl=(()=>{let e=class e{constructor(i,r,o){this._platform=i,this._change=new z,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),o=i.documentElement,s=o.getBoundingClientRect(),a=-s.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,c=-s.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:a,left:c}}change(i=aU){return i>0?this._change.pipe(pd(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(C(en),C(te),C(_e,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var DA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Xe({});let t=e;return t})();var al=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Hs=class extends al{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},qs=class extends al{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},x_=class extends al{constructor(e){super(),this.element=e instanceof Oe?e.nativeElement:e}},zs=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Hs)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof qs)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof x_)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var xh=class extends zs{constructor(e,n,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||We.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var cl=(()=>{let e=class e extends zs{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new we,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,s=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(s,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(N(lo),N(un),N(_e))},e.\u0275dir=Le({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[le.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Et]});let t=e;return t})();function Rh(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var CA=EA(),R_=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=it(-this._previousScrollPosition.left),e.style.top=it(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),CA&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),CA&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var M_=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Ge(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Mh=class{enable(){}disable(){}attach(){}};function k_(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,o=t.right<n.left,s=t.left>n.right;return i||r||o||s})}function TA(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,o=t.left<n.left,s=t.right>n.right;return i||r||o||s})}var P_=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();k_(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},cU=(()=>{let e=class e{constructor(i,r,o,s){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new Mh,this.close=a=>new M_(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new R_(this._viewportRuler,this._document),this.reposition=a=>new P_(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}};e.\u0275fac=function(r){return new(r||e)(C(Ah),C(sl),C(te),C(_e))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ll=class{constructor(e){if(this.scrollStrategy=new Mh,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var N_=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var kA=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(C(_e))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lU=(()=>{let e=class e extends kA{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{let s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){let c=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(o)):c.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(C(_e),C(te,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),uU=(()=>{let e=class e extends kA{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=tn(s)},this._clickListener=s=>{let a=tn(s),c=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let u=this._attachedOverlays.slice();for(let d=u.length-1;d>-1;d--){let f=u[d];if(f._outsidePointerEvents.observers.length<1||!f.hasAttached())continue;if(f.overlayElement.contains(a)||f.overlayElement.contains(c))break;let m=f._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>m.next(s)):m.next(s)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(C(_e),C(en),C(te,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Gs=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||S_()){let o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}let r=this._document.createElement("div");r.classList.add(i),S_()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(C(_e),C(en))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Oi=class{constructor(e,n,i,r,o,s,a,c,u,d=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=u,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new z,this._attachments=new z,this._detachments=new z,this._locationChanges=Pe.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new z,this._outsidePointerEvents=new z,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ot(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=ee(ee({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Re(ee({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=it(this._config.width),e.height=it(this._config.height),e.minWidth=it(this._config.minWidth),e.minHeight=it(this._config.minHeight),e.maxWidth=it(this._config.maxWidth),e.maxHeight=it(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=nl(n||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(cn(Yt(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},SA="cdk-overlay-connected-position-bounding-box",dU=/([A-Za-z%]+)$/,O_=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new z,this._resizeSubscription=Pe.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(SA),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),u=this._getOverlayPoint(c,n,a),d=this._getOverlayFit(u,n,i,a);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(d,u,i)){o.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:u,originPoint:c,position:a,overlayRect:n})}if(o.length){let a=null,c=-1;for(let u of o){let d=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);d>c&&(c=d,a=u)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&_o(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(SA),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?s:a}n.left<0&&(r-=n.left);let o;return i.originY=="center"?o=e.top+e.height/2:o=i.originY=="top"?e.top:e.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let o;return i.overlayY=="center"?o=-n.height/2:o=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,n,i,r){let o=xA(n),{x:s,y:a}=e,c=this._getOffset(r,"x"),u=this._getOffset(r,"y");c&&(s+=c),u&&(a+=u);let d=0-s,f=s+o.width-i.width,m=0-a,y=a+o.height-i.height,I=this._subtractOverflows(o.width,d,f),x=this._subtractOverflows(o.height,m,y),A=I*x;return{visibleArea:A,isCompletelyWithinViewport:o.width*o.height===A,fitsInViewportVertically:x===o.height,fitsInViewportHorizontally:I==o.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,o=i.right-n.x,s=AA(this._overlayRef.getConfig().minHeight),a=AA(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||s!=null&&s<=r,u=e.fitsInViewportHorizontally||a!=null&&a<=o;return c&&u}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=xA(n),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),c=Math.max(o.top-i.top-e.y,0),u=Math.max(o.left-i.left-e.x,0),d=0,f=0;return r.width<=o.width?d=u||-s:d=e.x<this._viewportMargin?o.left-i.left-e.x:0,r.height<=o.height?f=c||-a:f=e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:d,y:f},{x:e.x+d,y:e.y+f}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!hU(this._lastScrollVisibility,i)){let r=new N_(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),o,s,a;if(n.overlayY==="top")s=e.y,o=i.height-s+this._viewportMargin;else if(n.overlayY==="bottom")a=i.height-e.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let y=Math.min(i.bottom-e.y+i.top,e.y),I=this._lastBoundingBoxSize.height;o=y*2,s=e.y-y,o>I&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-I/2)}let c=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,u=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,d,f,m;if(u)m=i.width-e.x+this._viewportMargin*2,d=e.x-this._viewportMargin;else if(c)f=e.x,d=i.right-e.x;else{let y=Math.min(i.right-e.x+i.left,e.x),I=this._lastBoundingBoxSize.width;d=y*2,f=e.x-y,d>I&&!this._isInitialRender&&!this._growAfterOpen&&(f=e.x-I/2)}return{top:s,left:f,bottom:a,right:m,width:d,height:o}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=it(i.height),r.top=it(i.top),r.bottom=it(i.bottom),r.width=it(i.width),r.left=it(i.left),r.right=it(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=it(o)),s&&(r.maxWidth=it(s))}this._lastBoundingBoxSize=i,_o(this._boundingBox.style,r)}_resetBoundingBoxStyles(){_o(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){_o(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();_o(i,this._getExactOverlayY(n,e,d)),_o(i,this._getExactOverlayX(n,e,d))}else i.position="static";let a="",c=this._getOffset(n,"x"),u=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),u&&(a+=`translateY(${u}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=it(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=it(s.maxWidth):o&&(i.maxWidth="")),_o(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=it(o.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=it(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:TA(e,i),isOriginOutsideView:k_(e,i),isOverlayClipped:TA(n,i),isOverlayOutsideView:k_(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&nl(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Oe)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function _o(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function AA(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(dU);return!n||n==="px"?parseFloat(e):null}return t||null}function xA(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function hU(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var RA="cdk-global-overlay-wrapper",F_=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(RA),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),u=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),d=this._xPosition,f=this._xOffset,m=this._overlayRef.getConfig().direction==="rtl",y="",I="",x="";c?x="flex-start":d==="center"?(x="center",m?I=f:y=f):m?d==="left"||d==="end"?(x="flex-end",y=f):(d==="right"||d==="start")&&(x="flex-start",I=f):d==="left"||d==="start"?(x="flex-start",y=f):(d==="right"||d==="end")&&(x="flex-end",I=f),e.position=this._cssPosition,e.marginLeft=c?"0":y,e.marginTop=u?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":I,n.justifyContent=x,n.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(RA),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},fU=(()=>{let e=class e{constructor(i,r,o,s){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=s}global(){return new F_}flexibleConnectedTo(i){return new O_(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(C(sl),C(_e),C(en),C(Gs))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pU=0,gr=(()=>{let e=class e{constructor(i,r,o,s,a,c,u,d,f,m,y,I){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=c,this._ngZone=u,this._document=d,this._directionality=f,this._location=m,this._outsideClickDispatcher=y,this._animationsModuleType=I}create(i){let r=this._createHostElement(),o=this._createPaneElement(r),s=this._createPortalOutlet(o),a=new ll(i);return a.direction=a.direction||this._directionality.value,new Oi(s,r,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${pU++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(fo)),new xh(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(C(cU),C(Gs),C(lo),C(fU),C(lU),C(We),C(te),C(_e),C(mr),C(Kc),C(uU),C(Vc,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ul=(()=>{let e=class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return gU(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let r=mU(bU(i));if(r&&(NA(r)===-1||!this.isVisible(r)))return!1;let o=i.nodeName.toLowerCase(),s=NA(i);return i.hasAttribute("contenteditable")?s!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!IU(i)?!1:o==="audio"?i.hasAttribute("controls")?s!==-1:!1:o==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,r){return DU(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}};e.\u0275fac=function(r){return new(r||e)(C(en))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mU(t){try{return t.frameElement}catch{return null}}function gU(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function yU(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function _U(t){return wU(t)&&t.type=="hidden"}function vU(t){return EU(t)&&t.hasAttribute("href")}function wU(t){return t.nodeName.toLowerCase()=="input"}function EU(t){return t.nodeName.toLowerCase()=="a"}function OA(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function NA(t){if(!OA(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function IU(t){let e=t.nodeName.toLowerCase(),n=e==="input"&&t.type;return n==="text"||n==="password"||e==="select"||e==="textarea"}function DU(t){return _U(t)?!1:yU(t)||vU(t)||t.hasAttribute("contenteditable")||OA(t)}function bU(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var L_=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,o=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){let e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){let n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=0;i<n.length;i++){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=n.length-1;i>=0;i--){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Ot(1)).subscribe(e)}},Nh=(()=>{let e=class e{constructor(i,r,o){this._checker=i,this._ngZone=r,this._document=o}create(i,r=!1){return new L_(i,this._checker,this._ngZone,this._document,r)}};e.\u0275fac=function(r){return new(r||e)(C(ul),C(te),C(_e))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function V_(t){return t.buttons===0||t.detail===0}function j_(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var CU=new O("cdk-input-modality-detector-options"),TU={ignoreKeys:[18,17,224,91,16]},FA=650,Ws=pr({passive:!0,capture:!0}),SU=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,s){this._platform=i,this._mostRecentTarget=null,this._modality=new sn(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=tn(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<FA||(this._modality.next(V_(a)?"keyboard":"mouse"),this._mostRecentTarget=tn(a))},this._onTouchstart=a=>{if(j_(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=tn(a)},this._options=ee(ee({},TU),s),this.modalityDetected=this._modality.pipe(Xm(1)),this.modalityChanged=this.modalityDetected.pipe(or()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Ws),o.addEventListener("mousedown",this._onMousedown,Ws),o.addEventListener("touchstart",this._onTouchstart,Ws)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ws),document.removeEventListener("mousedown",this._onMousedown,Ws),document.removeEventListener("touchstart",this._onTouchstart,Ws))}};e.\u0275fac=function(r){return new(r||e)(C(en),C(te),C(_e),C(CU,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ph=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(Ph||{}),AU=new O("cdk-focus-monitor-default-options"),kh=pr({passive:!0,capture:!0}),Oh=(()=>{let e=class e{constructor(i,r,o,s,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new z,this._rootNodeFocusAndBlurListener=c=>{let u=tn(c);for(let d=u;d;d=d.parentElement)c.type==="focus"?this._onFocus(c,d):this._onBlur(c,d)},this._document=s,this._detectionMode=a?.detectionMode||Ph.IMMEDIATE}monitor(i,r=!1){let o=lt(i);if(!this._platform.isBrowser||o.nodeType!==1)return nt();let s=rl(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new z,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=lt(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){let s=lt(i),a=this._getDocument().activeElement;s===a?this._getClosestElementsInfo(s).forEach(([c,u])=>this._originChanged(c,r,u)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===Ph.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===Ph.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?FA:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(i,r){let o=this._elementInfo.get(r),s=tn(i);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(i,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,kh),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,kh)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(cn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,kh),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,kh),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((o,s)=>{(s===i||o.checkChildren&&s.contains(i))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let s=i.labels;if(s){for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(C(te),C(en),C(SU),C(_e,8),C(AU,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function RU(t,e){}var vo=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var $_=(()=>{let e=class e extends zs{constructor(i,r,o,s,a,c,u,d){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=s,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=u,this._focusMonitor=d,this._platform=Y(en),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=Y(ct),this.attachDomPortal=f=>{this._portalOutlet.hasAttached();let m=this._portalOutlet.attachDomPortal(f);return this._contentAttached(),m},this._document=o,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(i){this._ariaLabelledByQueue.push(i),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(i){let r=this._ariaLabelledByQueue.indexOf(i);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{i.removeEventListener("blur",o),i.removeEventListener("mousedown",o),i.removeAttribute("tabindex")};i.addEventListener("blur",o),i.addEventListener("mousedown",o)})),i.focus(r)}_focusByCssSelector(i,r){let o=this._elementRef.nativeElement.querySelector(i);o&&this._forceFocus(o,r)}_trapFocus(){let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let i=this._config.restoreFocus,r=null;if(typeof i=="string"?r=this._document.querySelector(i):typeof i=="boolean"?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&typeof r.focus=="function"){let o=ol(),s=this._elementRef.nativeElement;(!o||o===this._document.body||o===s||s.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let i=this._elementRef.nativeElement,r=ol();return i===r||i.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=ol()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};e.\u0275fac=function(r){return new(r||e)(N(Oe),N(Nh),N(_e,8),N(vo),N(ul),N(te),N(Oi),N(Oh))},e.\u0275cmp=fe({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,o){if(r&1&&$c(cl,7),r&2){let s;Hc(s=qc())&&(o._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,o){r&2&&ki("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},standalone:!0,features:[Et,pe],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,o){r&1&&dn(0,RU,0,0,"ng-template",0)},dependencies:[cl],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let t=e;return t})(),dl=class{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new z,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!Rh(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(e,n){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},MU=new O("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=Y(gr);return()=>t.scrollStrategies.block()}}),kU=new O("DialogData"),PU=new O("DefaultDialogConfig");var NU=0,VA=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,o,s,a,c){this._overlay=i,this._injector=r,this._defaultOptions=o,this._parentDialog=s,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new z,this._afterOpenedAtThisLevel=new z,this._ariaHiddenElements=new Map,this.afterAllClosed=ms(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(an(void 0))),this._scrollStrategy=c}open(i,r){let o=this._defaultOptions||new vo;r=ee(ee({},o),r),r.id=r.id||`cdk-dialog-${NU++}`,r.id&&this.getDialogById(r.id);let s=this._getOverlayConfig(r),a=this._overlay.create(s),c=new dl(a,r),u=this._attachContainer(a,c,r);return c.containerInstance=u,this._attachDialogContent(i,c,u,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){B_(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){B_(this._openDialogsAtThisLevel,i=>{i.config.closeOnDestroy===!1&&this._removeOpenDialog(i,!1)}),B_(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){let r=new ll({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,o){let s=o.injector||o.viewContainerRef?.injector,a=[{provide:vo,useValue:o},{provide:dl,useValue:r},{provide:Oi,useValue:i}],c;o.container?typeof o.container=="function"?c=o.container:(c=o.container.type,a.push(...o.container.providers(o))):c=$_;let u=new Hs(c,o.viewContainerRef,We.create({parent:s||this._injector,providers:a}),o.componentFactoryResolver);return i.attach(u).instance}_attachDialogContent(i,r,o,s){if(i instanceof En){let a=this._createInjector(s,r,o,void 0),c={$implicit:s.data,dialogRef:r};s.templateContext&&(c=ee(ee({},c),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),o.attachTemplatePortal(new qs(i,null,c,a))}else{let a=this._createInjector(s,r,o,this._injector),c=o.attachComponentPortal(new Hs(i,s.viewContainerRef,a,s.componentFactoryResolver));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(i,r,o,s){let a=i.injector||i.viewContainerRef?.injector,c=[{provide:kU,useValue:i.data},{provide:dl,useValue:r}];return i.providers&&(typeof i.providers=="function"?c.push(...i.providers(r,i,o)):c.push(...i.providers)),i.direction&&(!a||!a.get(mr,null,{optional:!0}))&&c.push({provide:mr,useValue:{value:i.direction,change:nt()}}),We.create({parent:a||s,providers:c})}_removeOpenDialog(i,r){let o=this.openDialogs.indexOf(i);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,a)=>{s?a.setAttribute("aria-hidden",s):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let i=this._overlayContainer.getContainerElement();if(i.parentElement){let r=i.parentElement.children;for(let o=r.length-1;o>-1;o--){let s=r[o];s!==i&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}};e.\u0275fac=function(r){return new(r||e)(C(gr),C(We),C(PU,8),C(e,12),C(Gs),C(MU))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function B_(t,e){let n=t.length;for(;n--;)e(t[n])}function OU(t,e){}var hl=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},H_="mdc-dialog--open",jA="mdc-dialog--opening",BA="mdc-dialog--closing",FU=150,LU=75,VU=(()=>{let e=class e extends $_{constructor(i,r,o,s,a,c,u,d,f){super(i,r,o,s,a,c,u,f),this._animationMode=d,this._animationStateChanged=new we,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?$A(this._config.enterAnimationDuration)??FU:0,this._exitAnimationDuration=this._animationsEnabled?$A(this._config.exitAnimationDuration)??LU:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(UA,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(jA,H_)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(H_),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(H_),this._animationsEnabled?(this._hostElement.style.setProperty(UA,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(BA)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(i){this._actionSectionCount+=i,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(jA,BA)}_waitForAnimationToComplete(i,r){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(i):i()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(i){let r=super.attachComponentPortal(i);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}};e.\u0275fac=function(r){return new(r||e)(N(Oe),N(Nh),N(_e,8),N(hl),N(ul),N(te),N(Oi),N(Vc,8),N(Oh))},e.\u0275cmp=fe({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,o){r&2&&(Qy("id",o._config.id),ki("aria-modal",o._config.ariaModal)("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),ri("_mat-animation-noopable",!o._animationsEnabled)("mat-mdc-dialog-container-with-actions",o._actionSectionCount>0))},standalone:!0,features:[Et,pe],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,o){r&1&&(Z(0,"div",0)(1,"div",1),dn(2,OU,0,0,"ng-template",2),Q()())},dependencies:[cl],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition:opacity linear var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container .mdc-dialog__surface{transition:transform var(--mat-dialog-transition-duration, 0ms) 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container,.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__surface{transition:none}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-title{padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2});let t=e;return t})(),UA="--mat-dialog-transition-duration";function $A(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?go(t.substring(0,t.length-2)):t.endsWith("s")?go(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var Fh=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(Fh||{}),fl=class{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new z,this._beforeClosed=new z,this._state=Fh.OPEN,this.disableClose=n.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(Ge(r=>r.state==="opened"),Ot(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Ge(r=>r.state==="closed"),Ot(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Yt(this.backdropClick(),this.keydownEvents().pipe(Ge(r=>r.keyCode===27&&!this.disableClose&&!Rh(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),jU(this,r.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Ge(n=>n.state==="closing"),Ot(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=Fh.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=Fh.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function jU(t,e,n){return t._closeInteractionType=e,t.close(n)}var BU=new O("MatMdcDialogData"),UU=new O("mat-mdc-dialog-default-options"),$U=new O("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=Y(gr);return()=>t.scrollStrategies.block()}});var HU=0,HA=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,o,s,a,c,u,d){this._overlay=i,this._defaultOptions=s,this._scrollStrategy=a,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new z,this._afterOpenedAtThisLevel=new z,this.dialogConfigClass=hl,this.afterAllClosed=ms(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(an(void 0))),this._dialog=r.get(VA),this._dialogRefConstructor=fl,this._dialogContainerType=VU,this._dialogDataToken=BU}open(i,r){let o;r=ee(ee({},this._defaultOptions||new hl),r),r.id=r.id||`mat-mdc-dialog-${HU++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();let s=this._dialog.open(i,Re(ee({},r),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:vo,useValue:r}]},templateContext:()=>({dialogRef:o}),providers:(a,c,u)=>(o=new this._dialogRefConstructor(a,r,u),o.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:u},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:o}])}));return o.componentRef=s.componentRef,o.componentInstance=s.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(o);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}};e.\u0275fac=function(r){return new(r||e)(C(gr),C(We),C(Kc,8),C(UU,8),C($U),C(e,12),C(Gs),C(Vc,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ks=class{constructor(e,n,i,r){this.id=e,this.summary=n,this.status=i,this.editHistory=r}};var Fi=function(t){return t.TODO="To Do",t.INPROGRESS="In Progress",t.DONE="Done",t}(Fi||{});var ex=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(N(ii),N(Oe))},e.\u0275dir=Le({type:e});let t=e;return t})(),K_=(()=>{let e=class e extends ex{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=dr(e)))(o||e)}})(),e.\u0275dir=Le({type:e,features:[Et]});let t=e;return t})(),yl=new O("");var qU={provide:yl,useExisting:xi(()=>_r),multi:!0};function zU(){let t=Pi()?Pi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var GU=new O(""),_r=(()=>{let e=class e extends ex{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!zU())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(N(ii),N(Oe),N(GU,8))},e.\u0275dir=Le({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Me("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[At([qU]),Et]});let t=e;return t})();function yr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function tx(t){return t!=null&&typeof t.length=="number"}var Q_=new O(""),Y_=new O(""),WU=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,wo=class{static min(e){return KU(e)}static max(e){return QU(e)}static required(e){return YU(e)}static requiredTrue(e){return ZU(e)}static email(e){return XU(e)}static minLength(e){return JU(e)}static maxLength(e){return e$(e)}static pattern(e){return t$(e)}static nullValidator(e){return nx(e)}static compose(e){return cx(e)}static composeAsync(e){return ux(e)}};function KU(t){return e=>{if(yr(e.value)||yr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function QU(t){return e=>{if(yr(e.value)||yr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function YU(t){return yr(t.value)?{required:!0}:null}function ZU(t){return t.value===!0?null:{required:!0}}function XU(t){return yr(t.value)||WU.test(t.value)?null:{email:!0}}function JU(t){return e=>yr(e.value)||!tx(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function e$(t){return e=>tx(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function t$(t){if(!t)return nx;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(yr(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function nx(t){return null}function ix(t){return t!=null}function rx(t){return Wc(t)?Ct(t):t}function ox(t){let e={};return t.forEach(n=>{e=n!=null?ee(ee({},e),n):e}),Object.keys(e).length===0?null:e}function sx(t,e){return e.map(n=>n(t))}function n$(t){return!t.validate}function ax(t){return t.map(e=>n$(e)?e:n=>e.validate(n))}function cx(t){if(!t)return null;let e=t.filter(ix);return e.length==0?null:function(n){return ox(sx(n,e))}}function lx(t){return t!=null?cx(ax(t)):null}function ux(t){if(!t)return null;let e=t.filter(ix);return e.length==0?null:function(n){let i=sx(n,e).map(rx);return zm(i).pipe(ye(ox))}}function dx(t){return t!=null?ux(ax(t)):null}function zA(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function hx(t){return t._rawValidators}function fx(t){return t._rawAsyncValidators}function q_(t){return t?Array.isArray(t)?t:[t]:[]}function Vh(t,e){return Array.isArray(t)?t.includes(e):t===e}function GA(t,e){let n=q_(e);return q_(t).forEach(r=>{Vh(n,r)||n.push(r)}),n}function WA(t,e){return q_(e).filter(n=>!Vh(t,n))}var jh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Eo=class extends jh{get formDirective(){return null}get path(){return null}},Io=class extends jh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Bh=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},i$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},yJ=Re(ee({},i$),{"[class.ng-submitted]":"isSubmitted"}),Zs=(()=>{let e=class e extends Bh{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(N(Io,2))},e.\u0275dir=Le({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&ri("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Et]});let t=e;return t})(),px=(()=>{let e=class e extends Bh{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(N(Eo,10))},e.\u0275dir=Le({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&ri("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Et]});let t=e;return t})();var pl="VALID",Lh="INVALID",Qs="PENDING",ml="DISABLED";function Z_(t){return(qh(t)?t.validators:t)||null}function r$(t){return Array.isArray(t)?lx(t):t||null}function X_(t,e){return(qh(e)?e.asyncValidators:t)||null}function o$(t){return Array.isArray(t)?dx(t):t||null}function qh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function mx(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new me(1e3,"");if(!i[n])throw new me(1001,"")}function gx(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new me(1002,"")})}var Ys=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===pl}get invalid(){return this.status===Lh}get pending(){return this.status==Qs}get disabled(){return this.status===ml}get enabled(){return this.status!==ml}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(GA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(GA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(WA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(WA(e,this._rawAsyncValidators))}hasValidator(e){return Vh(this._rawValidators,e)}hasAsyncValidator(e){return Vh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Qs,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ml,this.errors=null,this._forEachChild(i=>{i.disable(Re(ee({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Re(ee({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=pl,this._forEachChild(i=>{i.enable(Re(ee({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Re(ee({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pl||this.status===Qs)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ml:pl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Qs,this._hasOwnPendingAsyncValidator=!0;let n=rx(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new we,this.statusChanges=new we}_calculateStatus(){return this._allControlsDisabled()?ml:this.errors?Lh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qs)?Qs:this._anyControlsHaveStatus(Lh)?Lh:pl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=r$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=o$(this._rawAsyncValidators)}},Uh=class extends Ys{constructor(e,n,i){super(Z_(n),X_(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){gx(this,!0,e),Object.keys(e).forEach(i=>{mx(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var z_=class extends Uh{};var zh=new O("CallSetDisabledState",{providedIn:"root",factory:()=>Gh}),Gh="always";function yx(t,e){return[...e.path,t]}function G_(t,e,n=Gh){J_(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),a$(t,e),l$(t,e),c$(t,e),s$(t,e)}function KA(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Hh(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function $h(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function s$(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function J_(t,e){let n=hx(t);e.validator!==null?t.setValidators(zA(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=fx(t);e.asyncValidator!==null?t.setAsyncValidators(zA(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();$h(e._rawValidators,r),$h(e._rawAsyncValidators,r)}function Hh(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=hx(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let r=fx(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(n=!0,t.setAsyncValidators(o))}}}let i=()=>{};return $h(e._rawValidators,i),$h(e._rawAsyncValidators,i),n}function a$(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&_x(t,e)})}function c$(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&_x(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function _x(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function l$(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function u$(t,e){t==null,J_(t,e)}function d$(t,e){return Hh(t,e)}function vx(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function h$(t){return Object.getPrototypeOf(t.constructor)===K_}function f$(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function wx(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(o=>{o.constructor===_r?n=o:h$(o)?i=o:r=o}),r||i||n||null}function p$(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function QA(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function YA(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var gl=class extends Ys{constructor(e=null,n,i){super(Z_(n),X_(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(YA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){QA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){QA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){YA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var m$=t=>t instanceof gl;var g$={provide:Io,useExisting:xi(()=>_l)},ZA=Promise.resolve(),_l=(()=>{let e=class e extends Io{constructor(i,r,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new gl,this._registered=!1,this.name="",this.update=new we,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=wx(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),vx(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){G_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){ZA.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,o=r!==0&&oi(r);ZA.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?yx(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(N(Eo,9),N(Q_,10),N(Y_,10),N(yl,10),N(ct,8),N(zh,8))},e.\u0275dir=Le({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[le.None,"disabled","isDisabled"],model:[le.None,"ngModel","model"],options:[le.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[At([g$]),Et,In]});let t=e;return t})(),Ex=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Le({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var Ix=new O("");var y$={provide:Eo,useExisting:xi(()=>ev)},ev=(()=>{let e=class e extends Eo{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new we,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Hh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return G_(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){KA(i.control||null,i,!1),p$(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,f$(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,o=this.form.get(i.path);r!==o&&(KA(r||null,i),m$(o)&&(G_(o,i,this.callSetDisabledState),i.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);u$(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&d$(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){J_(this.form,this),this._oldForm&&Hh(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(N(Q_,10),N(Y_,10),N(zh,8))},e.\u0275dir=Le({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&Me("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[le.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[At([y$]),Et,In]});let t=e;return t})();var _$={provide:Io,useExisting:xi(()=>tv)},tv=(()=>{let e=class e extends Io{set isDisabled(i){}constructor(i,r,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new we,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=wx(this,s)}ngOnChanges(i){this._added||this._setUpControl(),vx(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return yx(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(N(Eo,13),N(Q_,10),N(Y_,10),N(yl,10),N(Ix,8))},e.\u0275dir=Le({type:e,selectors:[["","formControlName",""]],inputs:{name:[le.None,"formControlName","name"],isDisabled:[le.None,"disabled","isDisabled"],model:[le.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[At([_$]),Et,In]});let t=e;return t})(),v$={provide:yl,useExisting:xi(()=>Wh),multi:!0};function Dx(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function w$(t){return t.split(":")[0]}var Wh=(()=>{let e=class e extends K_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),o=Dx(r,i);this.setProperty("value",o)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=w$(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=dr(e)))(o||e)}})(),e.\u0275dir=Le({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&Me("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[At([v$]),Et]});let t=e;return t})(),bx=(()=>{let e=class e{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(Dx(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(N(Oe),N(ii),N(Wh,9))},e.\u0275dir=Le({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),E$={provide:yl,useExisting:xi(()=>Cx),multi:!0};function XA(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function I$(t){return t.split(":")[0]}var Cx=(()=>{let e=class e extends K_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let o=i.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else r=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let o=[],s=r.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let u=a[c],d=this._getOptionValue(u.value);o.push(d)}}else{let a=r.options;for(let c=0;c<a.length;c++){let u=a[c];if(u.selected){let d=this._getOptionValue(u.value);o.push(d)}}}this.value=o,i(o)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=I$(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=dr(e)))(o||e)}})(),e.\u0275dir=Le({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&Me("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[At([E$]),Et]});let t=e;return t})(),Tx=(()=>{let e=class e{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(XA(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(XA(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(N(Oe),N(ii),N(Cx,9))},e.\u0275dir=Le({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var Sx=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Xe({});let t=e;return t})(),W_=class extends Ys{constructor(e,n,i){super(Z_(n),X_(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,i={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,n={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){gx(this,!1,e),e.forEach((i,r)=>{mx(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,i)=>{e(n,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function JA(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Ax=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new e;return i.useNonNullable=!0,i}group(i,r=null){let o=this._reduceControls(i),s={};return JA(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Uh(o,s)}record(i,r=null){let o=this._reduceControls(i);return new z_(o,r)}control(i,r,o){let s={};return this.useNonNullable?(JA(r)?s=r:(s.validators=r,s.asyncValidators=o),new gl(i,Re(ee({},s),{nonNullable:!0}))):new gl(i,r,o)}array(i,r,o){let s=i.map(a=>this._createControl(a));return new W_(s,r,o)}_reduceControls(i){let r={};return Object.keys(i).forEach(o=>{r[o]=this._createControl(i[o])}),r}_createControl(i){if(i instanceof gl)return i;if(i instanceof Ys)return i;if(Array.isArray(i)){let r=i[0],o=i.length>1?i[1]:null,s=i.length>2?i[2]:null;return this.control(r,o,s)}else return this.control(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var si=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:zh,useValue:i.callSetDisabledState??Gh}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Xe({imports:[Sx]});let t=e;return t})(),xx=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Ix,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:zh,useValue:i.callSetDisabledState??Gh}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Xe({imports:[Sx]});let t=e;return t})();function D$(t,e){if(t&1&&(Z(0,"tr")(1,"td"),He(2),Q(),Z(3,"td"),He(4),Q(),Z(5,"td"),He(6),Q(),Z(7,"td"),He(8),Q()()),t&2){let n=e.$implicit;be(2),Ls(n.editDate.toLocaleString()),be(2),Ls(n.editType),be(2),Ls(n.beforeEdit),be(2),Ls(n.afterEdit)}}var Rx=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["edit-history"]],inputs:{editHistory:"editHistory"},standalone:!0,features:[pe],decls:13,vars:1,consts:[[1,"mk-text-4xl","mk-pt-5","mk-pb-5"],[1,"mk-w-full"],[1,"mk-text-xl","mk-bg-blue-500"],[1,"mk-w-48"],[1,"mk-w-32"],[4,"ngFor","ngForOf"]],template:function(r,o){r&1&&(Z(0,"h1",0),He(1,` EDIT HISTORY
`),Q(),Z(2,"table",1)(3,"tr",2)(4,"th",3),He(5,"Date"),Q(),Z(6,"th",4),He(7,"Action"),Q(),Z(8,"th"),He(9,"Before"),Q(),Z(10,"th"),He(11,"After"),Q()(),dn(12,D$,9,4,"tr",5),Q()),r&2&&(be(12),ke("ngForOf",o.editHistory))},dependencies:[js],styles:["table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-width:2px;border-style:solid;--tw-border-opacity: 1;border-color:rgb(var(--color-borderColor)/ var(--tw-border-opacity))}"]});let t=e;return t})();var Li=class{constructor(e,n,i,r){this.editDate=e,this.editType=n,this.beforeEdit=i,this.afterEdit=r}};var vr=function(t){return t.RENAME="Rename",t.STATUS_CHANGE="Status Change",t.STATUS_CHANGE_AND_RENAME="Status Change and Rename",t.REPLANNED="Replanned",t}(vr||{});var Xs=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["generic-button"]],inputs:{content:"content",classes:"classes"},standalone:!0,features:[pe],decls:2,vars:2,consts:[[1,"mk-block",3,"ngClass"]],template:function(r,o){r&1&&(Z(0,"button",0),He(1),Q()),r&2&&(ke("ngClass",o.classes),be(),fr(" ",o.content,`
`))},dependencies:[ph],encapsulation:2});let t=e;return t})();var Kh=(()=>{let e=class e{constructor(){this._taskSubject=new z,this.task$=this._taskSubject.asObservable()}updateTask(i){console.log("Service"+i),this._taskSubject.next(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Qh=(()=>{let e=class e{setCurrentTask(i){this.currentTask=i}getCurrentTask(){return nt(this.currentTask)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var b$=()=>["mk-right-2.5","mk-bottom-2.5","mk-absolute","mk-blue-button"],C$=()=>["mk-right-32","mk-bottom-2.5","mk-absolute","mk-gray-button"];function T$(t,e){if(t&1&&(Z(0,"option",12),He(1),Q()),t&2){let n=e.$implicit;ke("value",n),be(),fr(" ",n," ")}}var Px=(()=>{let e=class e{constructor(i,r,o,s,a){this.dialogRef=i,this.fb=r,this.editTaskService=o,this.editTaskCurrentService=s,this.destroyRef=a,this.taskStatusOptions=Object.values(Fi)}ngOnInit(){this.form=this.fb.group({taskSummary:[this.task.summary,[wo.required,wo.minLength(1),wo.maxLength(30)]],taskStatus:[this.task.status,wo.required]}),window.addEventListener("keyup",this.onKeyUp.bind(this)),this.observeCurrentTask()}ngOnDestroy(){window.removeEventListener("keyup",this.onKeyUp.bind(this))}onKeyUp(i){i.key==="Escape"?this.onCloseButton():i.key==="Enter"&&this.onSaveButton()}onSaveButton(){this.dialogRef.close(this.form.value);let{taskSummary:i,taskStatus:r}=this.form.value,o=this.task.editHistory;this.task.summary!==i&&this.task.status!==r?o=[...o,new Li(new Date,vr.STATUS_CHANGE,this.task.status,r),new Li(new Date,vr.RENAME,this.task.summary,i)]:this.task.status!==r?o=[...o,new Li(new Date,vr.STATUS_CHANGE,this.task.status,r)]:this.task.summary!==i&&(o=[...o,new Li(new Date,vr.RENAME,this.task.summary,i)]),this.editTaskService.updateTask(new Ks(this.task.id,i,r,o))}onCloseButton(){this.dialogRef.close()}observeCurrentTask(){this.editTaskCurrentService.getCurrentTask().pipe(Ht(this.destroyRef)).subscribe(i=>{this.task=i})}};e.\u0275fac=function(r){return new(r||e)(N(fl),N(Ax),N(Kh),N(Qh),N(wt))},e.\u0275cmp=fe({type:e,selectors:[["edit-modal"]],standalone:!0,features:[pe],decls:16,vars:11,consts:[[1,"mk-h-full","mk-w-full","mk-p-3","mk-rounded-3xl","mk-bg-background"],[1,"mk-text-4xl"],[3,"formGroup"],[1,"mk-flex","mk-flex-col","mk-pt-5"],["for","task-name-input",1,"mk-pb-1"],["type","text","id","task-name-input","name","task-name-input",1,"mk-w-[90%]","mk-h-10","mk-border-solid","mk-border-borderColor","mk-border-2","mk-rounded-lg","mk-text-3xl","mk-pl-1.5","mk-bg-background",3,"formControlName"],[1,"mk-pt-5","mk-flex","mk-flex-col"],["for","status-select"],["id","status-select",1,"mk-w-1/2","mk-h-10","mk-border-solid","mk-border-borderColor","mk-border-2","mk-rounded-lg","mk-text-3xl","mk-pl-1.5","mk-bg-background",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"editHistory"],[3,"click","content","classes"],[3,"value"]],template:function(r,o){r&1&&(Z(0,"div",0)(1,"h1",1),He(2," EDIT TASK "),Q(),Z(3,"form",2)(4,"div",3)(5,"label",4),He(6," Task Name "),Q(),at(7,"input",5),Q(),Z(8,"div",6)(9,"label",7),He(10," Select Status "),Q(),Z(11,"select",8),dn(12,T$,2,2,"option",9),Q()(),at(13,"edit-history",10),Z(14,"generic-button",11),Me("click",function(){return o.onSaveButton()}),Q(),Z(15,"generic-button",11),Me("click",function(){return o.onCloseButton()}),Q()()()),r&2&&(be(3),ke("formGroup",o.form),be(4),ke("formControlName","taskSummary"),be(4),ke("formControlName","taskStatus"),be(),ke("ngForOf",o.taskStatusOptions),be(),ke("editHistory",o.task.editHistory),be(),ke("content","Save")("classes",ho(9,b$)),be(),ke("content","Close")("classes",ho(10,C$)))},dependencies:[xx,Ex,bx,Tx,_r,Wh,Zs,px,ev,tv,gt,js,Rx,Xs],encapsulation:2});let t=e;return t})();var Nx=(()=>{let e=class e{constructor(i,r,o){this.matDialog=i,this.renderer=r,this.editTaskCurrentService=o}onEditClick(i){let r=this.matDialog.open(Px);r.addPanelClass(["mk-h-[800px]","mk-w-[1000px]","mk-rounded-3xl"]),r.componentInstance.task=this.task,r.disableClose=!0,this.editTaskCurrentService.setCurrentTask(this.task),this.changeDialogStyles(r)}changeDialogStyles(i){let r=document.querySelector(".mat-mdc-dialog-surface");i.afterOpened().subscribe(()=>{this.renderer.addClass(r,"!mk-rounded-3xl"),this.renderer.addClass(r,"mk-border-borderColor"),this.renderer.addClass(r,"mk-border-2"),this.renderer.addClass(r,"mk-border-solid")})}};e.\u0275fac=function(r){return new(r||e)(N(HA),N(ii),N(Qh))},e.\u0275cmp=fe({type:e,selectors:[["edit-button"]],inputs:{task:"task"},standalone:!0,features:[pe],decls:2,vars:0,consts:[[1,"mk-w-20","mk-h-9","mk-text-2xl","mk-blue-button",3,"click"]],template:function(r,o){r&1&&(Z(0,"button",0),Me("click",function(a){return o.onEditClick(a)}),He(1,` EDIT
`),Q())},encapsulation:2});let t=e;return t})();var S$=["*"],Ox=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["task-card"]],inputs:{task:"task"},standalone:!0,features:[pe],ngContentSelectors:S$,decls:3,vars:1,consts:[[1,"mk-text-3xl","mk-flex","mk-justify-between"],[1,"mk-pr-2",3,"task"]],template:function(r,o){r&1&&(Bc(),Z(0,"div",0),Uc(1),at(2,"edit-button",1),Q()),r&2&&(be(2),ke("task",o.task))},dependencies:[gt,Nx],encapsulation:2});let t=e;return t})();function lv(t,e,n){for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];r?t.setProperty(i,r,n?.has(i)?"important":""):t.removeProperty(i)}return t}function Js(t,e){let n=e?"":"none";lv(t.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":n,"-ms-user-select":n,"-webkit-user-select":n,"-moz-user-select":n})}function Fx(t,e,n){lv(t.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},n)}function Jh(t,e){return e&&e!="none"?t+" "+e:t}function Lx(t,e){t.style.width=`${e.width}px`,t.style.height=`${e.height}px`,t.style.transform=ef(e.left,e.top)}function ef(t,e){return`translate3d(${Math.round(t)}px, ${Math.round(e)}px, 0)`}function uv(t){let e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function rv(t,e,n){let{top:i,bottom:r,left:o,right:s}=t;return n>=i&&n<=r&&e>=o&&e<=s}function wl(t,e,n){t.top+=e,t.bottom=t.top+t.height,t.left+=n,t.right=t.left+t.width}function Vx(t,e,n,i){let{top:r,right:o,bottom:s,left:a,width:c,height:u}=t,d=c*e,f=u*e;return i>r-f&&i<s+f&&n>a-d&&n<o+d}var tf=class{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(n=>{this.positions.set(n,{scrollPosition:{top:n.scrollTop,left:n.scrollLeft},clientRect:uv(n)})})}handleScroll(e){let n=tn(e),i=this.positions.get(n);if(!i)return null;let r=i.scrollPosition,o,s;if(n===this._document){let u=this.getViewportScrollPosition();o=u.top,s=u.left}else o=n.scrollTop,s=n.scrollLeft;let a=r.top-o,c=r.left-s;return this.positions.forEach((u,d)=>{u.clientRect&&n!==d&&n.contains(d)&&wl(u.clientRect,a,c)}),r.top=o,r.left=s,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Zx(t){let e=t.cloneNode(!0),n=e.querySelectorAll("[id]"),i=t.nodeName.toLowerCase();e.removeAttribute("id");for(let r=0;r<n.length;r++)n[r].removeAttribute("id");return i==="canvas"?Ux(t,e):(i==="input"||i==="select"||i==="textarea")&&Bx(t,e),jx("canvas",t,e,Ux),jx("input, textarea, select",t,e,Bx),e}function jx(t,e,n,i){let r=e.querySelectorAll(t);if(r.length){let o=n.querySelectorAll(t);for(let s=0;s<r.length;s++)i(r[s],o[s])}}var A$=0;function Bx(t,e){e.type!=="file"&&(e.value=t.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${A$++}`)}function Ux(t,e){let n=e.getContext("2d");if(n)try{n.drawImage(t,0,0)}catch{}}function Xx(t,e){let n=t.rootNodes;if(n.length===1&&n[0].nodeType===e.ELEMENT_NODE)return n[0];let i=e.createElement("div");return n.forEach(r=>i.appendChild(r)),i}function $x(t){let e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function x$(t){let e=getComputedStyle(t),n=iv(e,"transition-property"),i=n.find(a=>a==="transform"||a==="all");if(!i)return 0;let r=n.indexOf(i),o=iv(e,"transition-duration"),s=iv(e,"transition-delay");return $x(o[r])+$x(s[r])}function iv(t,e){return t.getPropertyValue(e).split(",").map(i=>i.trim())}var R$=new Set(["position"]),ov=class{constructor(e,n,i,r,o,s,a,c,u){this._document=e,this._rootElement=n,this._direction=i,this._initialDomRect=r,this._previewTemplate=o,this._previewClass=s,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=u}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),"showPopover"in this._preview&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return x$(this._preview)}addEventListener(e,n){this._preview.addEventListener(e,n)}removeEventListener(e,n){this._preview.removeEventListener(e,n)}_createPreview(){let e=this._previewTemplate,n=this._previewClass,i=e?e.template:null,r;if(i&&e){let o=e.matchSize?this._initialDomRect:null,s=e.viewContainer.createEmbeddedView(i,e.context);s.detectChanges(),r=Xx(s,this._document),this._previewEmbeddedView=s,e.matchSize?Lx(r,o):r.style.transform=ef(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=Zx(this._rootElement),Lx(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return lv(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},R$),Js(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("popover","manual"),r.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(o=>r.classList.add(o)):r.classList.add(n)),r}},Hx=pr({passive:!0}),Yh=pr({passive:!1}),qx=pr({passive:!1,capture:!0}),M$=800,zx=new Set(["position"]),sv=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(n=>Js(n,e)))}constructor(e,n,i,r,o,s){this._config=n,this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new z,this._pointerMoveSubscription=Pe.EMPTY,this._pointerUpSubscription=Pe.EMPTY,this._scrollSubscription=Pe.EMPTY,this._resizeSubscription=Pe.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new z,this.started=new z,this.released=new z,this.ended=new z,this.entered=new z,this.exited=new z,this.dropped=new z,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){let c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{let c=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){let d=Math.abs(c.x-this._pickupPositionOnPage.x),f=Math.abs(c.y-this._pickupPositionOnPage.y);if(d+f>=this._config.dragStartThreshold){let y=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),I=this._dropContainer;if(!y){this._endDragSequence(a);return}(!I||!I.isDragging()&&!I.isReceiving())&&(a.cancelable&&a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.cancelable&&a.preventDefault();let u=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(u),this._dropContainer)this._updateActiveDropContainer(u,c);else{let d=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,f=this._activeTransform;f.x=u.x-d.x+this._passiveTransform.x,f.y=u.y-d.y+this._passiveTransform.y,this._applyRootElementTransform(f.x,f.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:u,event:a,distance:this._getDragDistance(u),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){let c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(e).withParent(n.parentDragRef||null),this._parentPositions=new tf(i),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(i=>lt(i)),this._handles.forEach(i=>Js(i,this.disabled)),this._toggleNativeDragInteractions();let n=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&n.add(i)}),this._disabledHandles=n,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let n=lt(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{n.addEventListener("mousedown",this._pointerDown,Yh),n.addEventListener("touchstart",this._pointerDown,Hx),n.addEventListener("dragstart",this._nativeDragStart,Yh)}),this._initialTransform=void 0,this._rootElement=n),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?lt(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Js(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Js(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._getShadowRoot()?.removeEventListener("selectstart",Wx,qx)}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let n=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(n),dropPoint:n,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){vl(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let n=this._getShadowRoot(),i=this._dropContainer;if(n&&this._ngZone.runOutsideAngular(()=>{n.addEventListener("selectstart",Wx,qx)}),i){let r=this._rootElement,o=r.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment("");o.insertBefore(a,r),this._initialTransform=r.style.transform||"",this._preview=new ov(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3),this._preview.attach(this._getPreviewInsertionPoint(o,n)),Fx(r,!1,zx),this._document.body.appendChild(o.replaceChild(s,r)),this.started.next({source:this,event:e}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(e,n){this._parentDragRef&&n.stopPropagation();let i=this.isDragging(),r=vl(n),o=!r&&n.button!==0,s=this._rootElement,a=tn(n),c=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+M$>Date.now(),u=r?j_(n):V_(n);if(a&&a.draggable&&n.type==="mousedown"&&n.preventDefault(),i||o||c||u)return;if(this._handles.length){let m=s.style;this._rootElementTapHighlight=m.webkitTapHighlightColor||"",m.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(m=>this._updateOnScroll(m)),this._boundaryElement&&(this._boundaryRect=uv(this._boundaryElement));let d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,n);let f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(n);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,n)}_cleanupDragArtifacts(e){Fx(this._rootElement,!0,zx),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let n=this._dropContainer,i=n.getItemIndex(this),r=this._getPointerPositionOnPage(e),o=this._getDragDistance(r),s=n._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:e}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:n,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:r,event:e}),n.drop(this,i,this._initialIndex,this._initialContainer,s,o,r,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:n},{x:i,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,n);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,n)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,e,n,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,e,n,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,n):this._applyPreviewTransform(e-this._pickupPositionInElement.x,n-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let n=this._preview.getTransitionDuration();return n===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let r=s=>{(!s||tn(s)===this._preview&&s.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(o))},o=setTimeout(r,n*1.5);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,n=e?e.template:null,i;return n?(this._placeholderRef=e.viewContainer.createEmbeddedView(n,e.context),this._placeholderRef.detectChanges(),i=Xx(this._placeholderRef,this._document)):i=Zx(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(e,n,i){let r=n===this._rootElement?null:n,o=r?r.getBoundingClientRect():e,s=vl(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition(),c=s.pageX-o.left-a.left,u=s.pageY-o.top-a.top;return{x:o.left-e.left+c,y:o.top-e.top+u}}_getPointerPositionOnPage(e){let n=this._getViewportScrollPosition(),i=vl(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,r=i.pageX-n.left,o=i.pageY-n.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=o,a.matrixTransform(s.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(e){let n=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:r}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||n==="x"?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||n==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:u}=this._getPreviewRect(),d=a.top+s,f=a.bottom-(u-s),m=a.left+o,y=a.right-(c-o);i=Gx(i,m,y),r=Gx(r,d,f)}return{x:i,y:r}}_updatePointerDirectionDelta(e){let{x:n,y:i}=e,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(n-o.x),a=Math.abs(i-o.y);return s>this._config.pointerDirectionChangeThreshold&&(r.x=n>o.x?1:-1,o.x=n),a>this._config.pointerDirectionChangeThreshold&&(r.y=i>o.y?1:-1,o.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Js(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,Yh),e.removeEventListener("touchstart",this._pointerDown,Hx),e.removeEventListener("dragstart",this._nativeDragStart,Yh)}_applyRootElementTransform(e,n){let i=ef(e,n),r=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=r.transform&&r.transform!="none"?r.transform:""),r.transform=Jh(i,this._initialTransform)}_applyPreviewTransform(e,n){let i=this._previewTemplate?.template?void 0:this._initialTransform,r=ef(e,n);this._preview.setTransform(Jh(r,i))}_getDragDistance(e){let n=this._pickupPositionOnPage;return n?{x:e.x-n.x,y:e.y-n.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:n}=this._passiveTransform;if(e===0&&n===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(r.width===0&&r.height===0||i.width===0&&i.height===0)return;let o=r.left-i.left,s=i.right-r.right,a=r.top-i.top,c=i.bottom-r.bottom;r.width>i.width?(o>0&&(e+=o),s>0&&(e-=s)):e=0,r.height>i.height?(a>0&&(n+=a),c>0&&(n-=c)):n=0,(e!==this._passiveTransform.x||n!==this._passiveTransform.y)&&this.setFreeDragPosition({y:n,x:e})}_getDragStartDelay(e){let n=this.dragStartDelay;return typeof n=="number"?n:vl(e)?n.touch:n?n.mouse:0}_updateOnScroll(e){let n=this._parentPositions.handleScroll(e);if(n){let i=tn(e);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&wl(this._boundaryRect,n.top,n.left),this._pickupPositionOnPage.x+=n.left,this._pickupPositionOnPage.y+=n.top,this._dropContainer||(this._activeTransform.x-=n.left,this._activeTransform.y-=n.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=rl(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,n){let i=this._previewContainer||"global";if(i==="parent")return e;if(i==="global"){let r=this._document;return n||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return lt(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(e){return this._handles.find(n=>e.target&&(e.target===n||n.contains(e.target)))}};function Gx(t,e,n){return Math.max(e,Math.min(n,t))}function vl(t){return t.type[0]==="t"}function Wx(t){t.preventDefault()}function dv(t,e,n){let i=nf(e,t.length-1),r=nf(n,t.length-1);if(i===r)return;let o=t[i],s=r<i?-1:1;for(let a=i;a!==r;a+=s)t[a]=t[a+s];t[r]=o}function Jx(t,e,n,i){let r=nf(n,t.length-1),o=nf(i,e.length);t.length&&e.splice(o,0,t.splice(r,1)[0])}function nf(t,e){return Math.max(0,Math.min(e,t))}var av=class{constructor(e,n){this._element=e,this._dragDropRegistry=n,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,n,i,r){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,n,i,r);if(s===-1&&o.length>0)return null;let a=this.orientation==="horizontal",c=o.findIndex(A=>A.drag===e),u=o[s],d=o[c].clientRect,f=u.clientRect,m=c>s?1:-1,y=this._getItemOffsetPx(d,f,m),I=this._getSiblingOffsetPx(c,o,m),x=o.slice();return dv(o,c,s),o.forEach((A,j)=>{if(x[j]===A)return;let q=A.drag===e,V=q?y:I,W=q?e.getPlaceholderElement():A.drag.getRootElement();A.offset+=V,a?(W.style.transform=Jh(`translate3d(${Math.round(A.offset)}px, 0, 0)`,A.initialTransform),wl(A.clientRect,0,V)):(W.style.transform=Jh(`translate3d(0, ${Math.round(A.offset)}px, 0)`,A.initialTransform),wl(A.clientRect,V,0))}),this._previousSwap.overlaps=rv(f,n,i),this._previousSwap.drag=u.drag,this._previousSwap.delta=a?r.x:r.y,{previousIndex:c,currentIndex:s}}enter(e,n,i,r){let o=r==null||r<0?this._getItemIndexFromPointerPosition(e,n,i):r,s=this._activeDraggables,a=s.indexOf(e),c=e.getPlaceholderElement(),u=s[o];if(u===e&&(u=s[o+1]),!u&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(n,i)&&(u=s[0]),a>-1&&s.splice(a,1),u&&!this._dragDropRegistry.isDragging(u)){let d=u.getRootElement();d.parentElement.insertBefore(c,d),s.splice(o,0,e)}else lt(this._element).appendChild(c),s.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{let n=e.getRootElement();if(n){let i=this._itemPositions.find(r=>r.drag===e)?.initialTransform;n.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===e)}updateOnScroll(e,n){this._itemPositions.forEach(({clientRect:i})=>{wl(i,e,n)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(n=>{let i=n.getVisibleElement();return{drag:n,offset:0,initialTransform:i.style.transform||"",clientRect:uv(i)}}).sort((n,i)=>e?n.clientRect.left-i.clientRect.left:n.clientRect.top-i.clientRect.top)}_getItemOffsetPx(e,n,i){let r=this.orientation==="horizontal",o=r?n.left-e.left:n.top-e.top;return i===-1&&(o+=r?n.width-e.width:n.height-e.height),o}_getSiblingOffsetPx(e,n,i){let r=this.orientation==="horizontal",o=n[e].clientRect,s=n[e+i*-1],a=o[r?"width":"height"]*i;if(s){let c=r?"left":"top",u=r?"right":"bottom";i===-1?a-=s.clientRect[c]-o[u]:a+=o[c]-s.clientRect[u]}return a}_shouldEnterAsFirstChild(e,n){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,r=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let s=i[i.length-1].clientRect;return r?e>=s.right:n>=s.bottom}else{let s=i[0].clientRect;return r?e<=s.left:n<=s.top}}_getItemIndexFromPointerPosition(e,n,i,r){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===e)return!1;if(r){let u=o?r.x:r.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&u===this._previousSwap.delta)return!1}return o?n>=Math.floor(c.left)&&n<Math.floor(c.right):i>=Math.floor(c.top)&&i<Math.floor(c.bottom)});return s===-1||!this._sortPredicate(s,e)?-1:s}},Kx=.05,eR=.05,bn=function(t){return t[t.NONE=0]="NONE",t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t}(bn||{}),qt=function(t){return t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t}(qt||{}),cv=class{constructor(e,n,i,r,o){this._dragDropRegistry=n,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new z,this.entered=new z,this.exited=new z,this.dropped=new z,this.sorted=new z,this.receivingStarted=new z,this.receivingStopped=new z,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Pe.EMPTY,this._verticalScrollDirection=bn.NONE,this._horizontalScrollDirection=qt.NONE,this._stopScrollTimers=new z,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),Gm(0,Xu).pipe(cn(this._stopScrollTimers)).subscribe(()=>{let s=this._scrollNode,a=this.autoScrollStep;this._verticalScrollDirection===bn.UP?s.scrollBy(0,-a):this._verticalScrollDirection===bn.DOWN&&s.scrollBy(0,a),this._horizontalScrollDirection===qt.LEFT?s.scrollBy(-a,0):this._horizontalScrollDirection===qt.RIGHT&&s.scrollBy(a,0)})},this.element=lt(e),this._document=i,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new tf(i),this._sortStrategy=new av(this.element,n),this._sortStrategy.withSortPredicate((s,a)=>this.sortPredicate(s,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,n,i,r){this._draggingStarted(),r==null&&this.sortingDisabled&&(r=this._draggables.indexOf(e)),this._sortStrategy.enter(e,n,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,n,i,r,o,s,a,c={}){this._reset(),this.dropped.next({item:e,currentIndex:n,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:o,distance:s,dropPoint:a,event:c})}withItems(e){let n=this._draggables;return this._draggables=e,e.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(n.filter(r=>r.isDragging()).every(r=>e.indexOf(r)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){let n=lt(this.element);return this._scrollableElements=e.indexOf(n)===-1?[n,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,n,i,r){if(this.sortingDisabled||!this._domRect||!Vx(this._domRect,Kx,n,i))return;let o=this._sortStrategy.sort(e,n,i,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,n){if(this.autoScrollDisabled)return;let i,r=bn.NONE,o=qt.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||i||Vx(s.clientRect,Kx,e,n)&&([r,o]=k$(a,s.clientRect,this._sortStrategy.direction,e,n),(r||o)&&(i=a))}),!r&&!o){let{width:s,height:a}=this._viewportRuler.getViewportSize(),c={width:s,height:a,top:0,right:s,bottom:a,left:0};r=tR(c,n),o=nR(c,e),i=window}i&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=i,(r||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=lt(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){let e=lt(this.element);this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;let e=lt(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(n=>n._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,n){return this._domRect!=null&&rv(this._domRect,e,n)}_getSiblingContainerFromPosition(e,n,i){return this._siblings.find(r=>r._canReceive(e,n,i))}_canReceive(e,n,i){if(!this._domRect||!rv(this._domRect,n,i)||!this.enterPredicate(e,this))return!1;let r=this._getShadowRoot().elementFromPoint(n,i);if(!r)return!1;let o=lt(this.element);return r===o||o.contains(r)}_startReceiving(e,n){let i=this._activeSiblings;!i.has(e)&&n.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:n}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let n=this._parentPositions.handleScroll(e);n&&this._sortStrategy.updateOnScroll(n.top,n.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=rl(lt(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(n=>n.isDragging());this._siblings.forEach(n=>n._startReceiving(this,e))}};function tR(t,e){let{top:n,bottom:i,height:r}=t,o=r*eR;return e>=n-o&&e<=n+o?bn.UP:e>=i-o&&e<=i+o?bn.DOWN:bn.NONE}function nR(t,e){let{left:n,right:i,width:r}=t,o=r*eR;return e>=n-o&&e<=n+o?qt.LEFT:e>=i-o&&e<=i+o?qt.RIGHT:qt.NONE}function k$(t,e,n,i,r){let o=tR(e,r),s=nR(e,i),a=bn.NONE,c=qt.NONE;if(o){let u=t.scrollTop;o===bn.UP?u>0&&(a=bn.UP):t.scrollHeight-u>t.clientHeight&&(a=bn.DOWN)}if(s){let u=t.scrollLeft;n==="rtl"?s===qt.RIGHT?u<0&&(c=qt.RIGHT):t.scrollWidth+u>t.clientWidth&&(c=qt.LEFT):s===qt.LEFT?u>0&&(c=qt.LEFT):t.scrollWidth-u>t.clientWidth&&(c=qt.RIGHT)}return[a,c]}var Zh=pr({passive:!1,capture:!0}),Xh=new Set,P$=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],standalone:!0,features:[pe],decls:0,vars:0,template:function(r,o){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit}}"],encapsulation:2,changeDetection:0});let t=e;return t})(),N$=(()=>{let e=class e{constructor(i,r){this._ngZone=i,this._appRef=Y(fo),this._environmentInjector=Y(Jn),this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new z,this.pointerUp=new z,this.scroll=new z,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=r}registerDropContainer(i){this._dropInstances.has(i)||this._dropInstances.add(i)}registerDragItem(i){this._dragInstances.add(i),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Zh)})}removeDropContainer(i){this._dropInstances.delete(i)}removeDragItem(i){this._dragInstances.delete(i),this.stopDragging(i),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Zh)}startDragging(i,r){if(!(this._activeDragInstances.indexOf(i)>-1)&&(this._loadResets(),this._activeDragInstances.push(i),this._activeDragInstances.length===1)){let o=r.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Zh}),o||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:Zh}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,a)=>{this._document.addEventListener(a,s.handler,s.options)})})}}stopDragging(i){let r=this._activeDragInstances.indexOf(i);r>-1&&(this._activeDragInstances.splice(r,1),this._activeDragInstances.length===0&&this._clearGlobalListeners())}isDragging(i){return this._activeDragInstances.indexOf(i)>-1}scrolled(i){let r=[this.scroll];return i&&i!==this._document&&r.push(new ne(o=>this._ngZone.runOutsideAngular(()=>{let a=c=>{this._activeDragInstances.length&&o.next(c)};return i.addEventListener("scroll",a,!0),()=>{i.removeEventListener("scroll",a,!0)}}))),Yt(...r)}ngOnDestroy(){this._dragInstances.forEach(i=>this.removeDragItem(i)),this._dropInstances.forEach(i=>this.removeDropContainer(i)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((i,r)=>{this._document.removeEventListener(r,i.handler,i.options)}),this._globalListeners.clear()}_loadResets(){if(!Xh.has(this._appRef)){Xh.add(this._appRef);let i=wS(P$,{environmentInjector:this._environmentInjector});this._appRef.onDestroy(()=>{Xh.delete(this._appRef),Xh.size===0&&i.destroy()})}}};e.\u0275fac=function(r){return new(r||e)(C(te),C(_e))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),O$={dragStartThreshold:5,pointerDirectionChangeThreshold:5},hv=(()=>{let e=class e{constructor(i,r,o,s){this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s}createDrag(i,r=O$){return new sv(i,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(i){return new cv(i,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}};e.\u0275fac=function(r){return new(r||e)(C(_e),C(te),C(sl),C(N$))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Qx=new O("CDK_DRAG_PARENT");var F$=new O("CdkDragHandle");var iR=new O("CDK_DRAG_CONFIG"),L$="cdk-drag",rR=new O("CdkDropList"),oR=(()=>{let e=class e{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(i){this._disabled=i,this._dragRef.disabled=this._disabled}constructor(i,r,o,s,a,c,u,d,f,m,y){this.element=i,this.dropContainer=r,this._ngZone=s,this._viewContainerRef=a,this._dir=u,this._changeDetectorRef=f,this._selfHandle=m,this._parentDrag=y,this._destroyed=new z,this._handles=new sn([]),this.started=new we,this.released=new we,this.ended=new we,this.entered=new we,this.exited=new we,this.dropped=new we,this.moved=new ne(I=>{let x=this._dragRef.moved.pipe(ye(A=>({source:this,pointerPosition:A.pointerPosition,event:A.event,delta:A.delta,distance:A.distance}))).subscribe(I);return()=>{x.unsubscribe()}}),this._dragRef=d.createDrag(i,{dragStartThreshold:c&&c.dragStartThreshold!=null?c.dragStartThreshold:5,pointerDirectionChangeThreshold:c&&c.pointerDirectionChangeThreshold!=null?c.pointerDirectionChangeThreshold:5,zIndex:c?.zIndex}),this._dragRef.data=this,e._dragInstances.push(this),c&&this._assignDefaults(c),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(i){this._dragRef.setFreeDragPosition(i)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ot(1),cn(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(i){let r=i.rootElementSelector,o=i.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let i=e._dragInstances.indexOf(this);i>-1&&e._dragInstances.splice(i,1),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(i){let r=this._handles.getValue();r.push(i),this._handles.next(r)}_removeHandle(i){let r=this._handles.getValue(),o=r.indexOf(i);o>-1&&(r.splice(o,1),this._handles.next(r))}_setPreviewTemplate(i){this._previewTemplate=i}_resetPreviewTemplate(i){i===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(i){this._placeholderTemplate=i}_resetPlaceholderTemplate(i){i===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let i=this.element.nativeElement,r=i;this.rootElementSelector&&(r=i.closest!==void 0?i.closest(this.rootElementSelector):i.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||i)}_getBoundaryElement(){let i=this.boundaryElement;return i?typeof i=="string"?this.element.nativeElement.closest(i):lt(i):null}_syncInputs(i){i.beforeStarted.subscribe(()=>{if(!i.isDragging()){let r=this._dir,o=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.dragStartDelay=typeof o=="object"&&o?o:go(o),i.constrainPosition=this.constrainPosition,i.previewClass=this.previewClass,i.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),r&&i.withDirection(r.value)}}),i.beforeStarted.pipe(Ot(1)).subscribe(()=>{if(this._parentDrag){i.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains(L$)){i.withParent(e._dragInstances.find(o=>o.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(i){i.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),i.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),i.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),i.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),i.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(i){let{lockAxis:r,dragStartDelay:o,constrainPosition:s,previewClass:a,boundaryElement:c,draggingDisabled:u,rootElementSelector:d,previewContainer:f}=i;this.disabled=u??!1,this.dragStartDelay=o||0,r&&(this.lockAxis=r),s&&(this.constrainPosition=s),a&&(this.previewClass=a),c&&(this.boundaryElement=c),d&&(this.rootElementSelector=d),f&&(this.previewContainer=f)}_setupHandlesListener(){this._handles.pipe(ys(i=>{let r=i.map(o=>o.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Tt(i=>Yt(...i.map(r=>r._stateChanges.pipe(an(r))))),cn(this._destroyed)).subscribe(i=>{let r=this._dragRef,o=i.element.nativeElement;i.disabled?r.disableHandle(o):r.enableHandle(o)})}};e._dragInstances=[],e.\u0275fac=function(r){return new(r||e)(N(Oe),N(rR,12),N(_e),N(te),N(un),N(iR,8),N(mr,8),N(hv),N(ct),N(F$,10),N(Qx,12))},e.\u0275dir=Le({type:e,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,o){r&2&&ri("cdk-drag-disabled",o.disabled)("cdk-drag-dragging",o._dragRef.isDragging())},inputs:{data:[le.None,"cdkDragData","data"],lockAxis:[le.None,"cdkDragLockAxis","lockAxis"],rootElementSelector:[le.None,"cdkDragRootElement","rootElementSelector"],boundaryElement:[le.None,"cdkDragBoundary","boundaryElement"],dragStartDelay:[le.None,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[le.None,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[le.HasDecoratorInputTransform,"cdkDragDisabled","disabled",oi],constrainPosition:[le.None,"cdkDragConstrainPosition","constrainPosition"],previewClass:[le.None,"cdkDragPreviewClass","previewClass"],previewContainer:[le.None,"cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[At([{provide:Qx,useExisting:e}]),uo,In]});let t=e;return t})(),Yx=new O("CdkDropListGroup");var V$=0,ea=(()=>{let e=class e{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(i){this._dropListRef.disabled=this._disabled=i}constructor(i,r,o,s,a,c,u){this.element=i,this._changeDetectorRef=o,this._scrollDispatcher=s,this._dir=a,this._group=c,this._destroyed=new z,this.connectedTo=[],this.id=`cdk-drop-list-${V$++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new we,this.entered=new we,this.exited=new we,this.sorted=new we,this._unsortedItems=new Set,this._dropListRef=r.createDropList(i),this._dropListRef.data=this,u&&this._assignDefaults(u),this._dropListRef.enterPredicate=(d,f)=>this.enterPredicate(d.data,f.data),this._dropListRef.sortPredicate=(d,f,m)=>this.sortPredicate(d,f.data,m.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),c&&c._items.add(this)}addItem(i){this._unsortedItems.add(i),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(i){this._unsortedItems.delete(i),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((i,r)=>i._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let i=e._dropLists.indexOf(this);i>-1&&e._dropLists.splice(i,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(i){this._dir&&this._dir.change.pipe(an(this._dir.value),cn(this._destroyed)).subscribe(r=>i.withDirection(r)),i.beforeStarted.subscribe(()=>{let r=nl(this.connectedTo).map(o=>{if(typeof o=="string"){let s=e._dropLists.find(a=>a.id===o);return s}return o});if(this._group&&this._group._items.forEach(o=>{r.indexOf(o)===-1&&r.push(o)}),!this._scrollableParentsResolved){let o=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(o),this._scrollableParentsResolved=!0}i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.sortingDisabled=this.sortingDisabled,i.autoScrollDisabled=this.autoScrollDisabled,i.autoScrollStep=go(this.autoScrollStep,2),i.connectedTo(r.filter(o=>o&&o!==this).map(o=>o._dropListRef)).withOrientation(this.orientation)})}_handleEvents(i){i.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),i.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),i.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),i.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),Yt(i.receivingStarted,i.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(i){let{lockAxis:r,draggingDisabled:o,sortingDisabled:s,listAutoScrollDisabled:a,listOrientation:c}=i;this.disabled=o??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=a??!1,this.orientation=c||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(i=>i._dragRef))}};e._dropLists=[],e.\u0275fac=function(r){return new(r||e)(N(Oe),N(hv),N(ct),N(Ah),N(mr,8),N(Yx,12),N(iR,8))},e.\u0275dir=Le({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,o){r&2&&(ki("id",o.id),ri("cdk-drop-list-disabled",o.disabled)("cdk-drop-list-dragging",o._dropListRef.isDragging())("cdk-drop-list-receiving",o._dropListRef.isReceiving()))},inputs:{connectedTo:[le.None,"cdkDropListConnectedTo","connectedTo"],data:[le.None,"cdkDropListData","data"],orientation:[le.None,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[le.None,"cdkDropListLockAxis","lockAxis"],disabled:[le.HasDecoratorInputTransform,"cdkDropListDisabled","disabled",oi],sortingDisabled:[le.HasDecoratorInputTransform,"cdkDropListSortingDisabled","sortingDisabled",oi],enterPredicate:[le.None,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[le.None,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[le.HasDecoratorInputTransform,"cdkDropListAutoScrollDisabled","autoScrollDisabled",oi],autoScrollStep:[le.None,"cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[At([{provide:Yx,useValue:void 0},{provide:rR,useExisting:e}]),uo]});let t=e;return t})();var rf=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Xe({providers:[hv],imports:[DA]});let t=e;return t})();var B$=(t,e,n)=>({"mk-bg-gray-500":t,"mk-bg-blue-700":e,"mk-bg-green-700":n});function U$(t,e){if(t&1&&(Z(0,"task-card",1),He(1),Q()),t&2){let n=e.$implicit,i=hS();ke("ngClass",pS(4,B$,n.status===i.TaskStatus.TODO,n.status===i.TaskStatus.INPROGRESS,n.status===i.TaskStatus.DONE))("cdkDragData",n)("task",n),be(),fr(" ",n.summary,`
`)}}var ta=(()=>{let e=class e{constructor(i,r,o){this.changeDetectorRef=i,this.destroyRef=r,this.editTaskService=o,this.listOfTasks=[],this.TaskStatus=Fi}ngOnInit(){this.observeUpdatedTask()}observeUpdatedTask(){this.editTaskService.task$.pipe(Ht(this.destroyRef)).subscribe(i=>{let r=this.listOfTasks.findIndex(o=>o.id===i.id);this.listOfTasks[r]=i,this.changeDetectorRef.detectChanges()})}};e.\u0275fac=function(r){return new(r||e)(N(ct),N(wt),N(Kh))},e.\u0275cmp=fe({type:e,selectors:[["task-list"]],inputs:{listOfTasks:"listOfTasks"},standalone:!0,features:[pe],decls:1,vars:1,consts:[["class","mk-h-11 mk-w-[97%] mk-border-solid mk-border-2 mk-border-borderColor mk-mt-1 mk-rounded-xl mk-pl-1","cdkDrag","",3,"ngClass","cdkDragData","task",4,"ngFor","ngForOf"],["cdkDrag","",1,"mk-h-11","mk-w-[97%]","mk-border-solid","mk-border-2","mk-border-borderColor","mk-mt-1","mk-rounded-xl","mk-pl-1",3,"ngClass","cdkDragData","task"]],template:function(r,o){r&1&&dn(0,U$,2,8,"task-card",0),r&2&&ke("ngForOf",o.listOfTasks)},dependencies:[gt,ph,js,Ox,rf,oR],styles:["[_nghost-%COMP%]{display:flex;height:750px;width:500px;flex-direction:column;align-items:center;border-radius:1.5rem;border-width:2px;border-style:solid;--tw-border-opacity: 1;border-color:rgb(var(--color-borderColor)/ var(--tw-border-opacity))}"]});let t=e;return t})();var $$=["*"],of=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["list-header"]],standalone:!0,features:[pe],ngContentSelectors:$$,decls:2,vars:0,consts:[[1,"mk-text-6xl"]],template:function(r,o){r&1&&(Bc(),Z(0,"h2",0),Uc(1),Q())},dependencies:[gt],encapsulation:2});let t=e;return t})();function H$(t,e){t&1&&at(0,"img",1)}function q$(t,e){t&1&&at(0,"i",2)}var sR=(()=>{let e=class e{constructor(i,r,o,s){this.themeService=i,this.destroyRef=r,this.changeDetectorRef=o,this.rendererFactory2=s,this.isDarkMode=!1}ngOnInit(){this.observeIsDarkMode()}toggleTheme(){this.themeService.setDarkMode(!this.isDarkMode)}updateHtmlRootTheme(i){let r=this.rendererFactory2.createRenderer(null,null),o=r.selectRootElement("html",!0);i?r.setAttribute(o,"theme-mode","dark"):r.removeAttribute(o,"theme-mode")}observeIsDarkMode(){this.themeService.getDarkMode().pipe(Ht(this.destroyRef)).subscribe(i=>{this.isDarkMode=i,this.updateHtmlRootTheme(this.isDarkMode),this.changeDetectorRef.detectChanges()})}};e.\u0275fac=function(r){return new(r||e)(N(_A),N(wt),N(ct),N(Ai))},e.\u0275cmp=fe({type:e,selectors:[["theme-mode-switcher"]],standalone:!0,features:[pe],decls:3,vars:1,consts:[[1,"mk-rounded-3xl","mk-transition-all","mk-text-5xl","mk-w-12",3,"click"],["src","../../../../assets/light-mode-icon.png","alt","Light mode"],[1,"fa-solid","fa-moon"]],template:function(r,o){r&1&&(Z(0,"button",0),Me("click",function(){return o.toggleTheme()}),dn(1,H$,1,0,"img",1)(2,q$,1,0),Q()),r&2&&(be(),aS(1,o.isDarkMode?1:2))},encapsulation:2,changeDetection:0});let t=e;return t})();var sf,z$=new Uint8Array(16);function fv(){if(!sf&&(sf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!sf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sf(z$)}var xt=[];for(let t=0;t<256;++t)xt.push((t+256).toString(16).slice(1));function aR(t,e=0){return xt[t[e+0]]+xt[t[e+1]]+xt[t[e+2]]+xt[t[e+3]]+"-"+xt[t[e+4]]+xt[t[e+5]]+"-"+xt[t[e+6]]+xt[t[e+7]]+"-"+xt[t[e+8]]+xt[t[e+9]]+"-"+xt[t[e+10]]+xt[t[e+11]]+xt[t[e+12]]+xt[t[e+13]]+xt[t[e+14]]+xt[t[e+15]]}var G$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),pv={randomUUID:G$};function W$(t,e,n){if(pv.randomUUID&&!e&&!t)return pv.randomUUID();t=t||{};let i=t.random||(t.rng||fv)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return aR(i)}var mv=W$;var K$="firebase",Q$="10.12.2";ze(K$,Q$,"app");var jn=new lr("ANGULARFIRE2_VERSION"),cR=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function ia(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var bo=(t,e)=>{let n=e?[e]:Fu(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},Vn=class{constructor(){return bo(Y$)}},Y$="app-check";function na(){}var af=class{zone;delegate;constructor(e,n=Ec){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(s){r.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,i)}},gv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",na,{},na,na)),n.pipe(ys({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Cn=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new af(Zone.current)),this.insideAngular=n.run(()=>new af(Zone.current,Kn)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(C(te))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cf(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Z$(t){return cf().ngZone.runOutsideAngular(()=>t())}function Do(t){return cf().ngZone.run(()=>t())}function zt(t){return X$(cf())(t)}function X$(t){return function(n){return n=n.lift(new gv(t.ngZone)),n.pipe(gn(t.outsideAngular),Bt(t.insideAngular))}}var J$=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Do(()=>t.apply(void 0,i))},wr=(t,e)=>function(){let n,i=arguments;for(let o=0;o<arguments.length;o++)typeof i[o]=="function"&&(e&&(n||=Do(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",na,{},na,na))),i[o]=J$(i[o],n));let r=Z$(()=>t.apply(this,i));if(!e)if(r instanceof ne){let o=cf();return r.pipe(gn(o.outsideAngular),Bt(o.insideAngular))}else return Do(()=>r);return r instanceof ne?r.pipe(zt):r instanceof Promise?Do(()=>new Promise((o,s)=>r.then(a=>Do(()=>o(a)),a=>Do(()=>s(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:Do(()=>r)};var Bn=class{constructor(e){return e}},Vi=class{constructor(){return Fu()}};function eH(t){return t&&t.length===1?t[0]:new Bn(er())}var yv=new O("angularfire2._apps"),tH={provide:Bn,useFactory:eH,deps:[[new vt,yv]]},nH={provide:Vi,deps:[[new vt,yv]]};function iH(t){return(e,n)=>{let i=n.get($t);ze("angularfire",jn.full,"core"),ze("angularfire",jn.full,"app"),ze("angular",Yy.full,i.toString());let r=e.runOutsideAngular(()=>t(n));return new Bn(r)}}function _v(t,...e){return Xt([tH,nH,{provide:yv,useFactory:iH(t),multi:!0,deps:[te,We,Cn,...e]}])}var vv=wr(qb,!0);var rH=new Map,oH={activated:!1,tokenObservers:[]},sH={initialized:!1,enabled:!1};function Un(t){return rH.get(t)||Object.assign({},oH)}function pR(){return sH}var aH="https://content-firebaseappcheck.googleapis.com/v1";var cH="exchangeDebugToken",uR={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},tte=24*60*60*1e3;var Ev=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return T(this,null,function*(){this.stop();try{this.pending=new Cm,this.pending.promise.catch(n=>{}),yield lH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Cm,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function lH(t){return new Promise(e=>{setTimeout(e,t)})}var uH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Er=new os("appCheck","AppCheck",uH);function mR(t){if(!Un(t).activated)throw Er.create("use-before-activation",{appName:t.name})}function gR(i,r){return T(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(y){throw Er.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw Er.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(y){throw Er.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Er.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,m=Date.now();return{token:u.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function yR(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${aH}/projects/${n}/apps/${i}:${cH}?key=${r}`,body:{debug_token:e}}}var dH="firebase-app-check-database",hH=1,Iv="firebase-app-check-store";var lf=null;function fH(){return lf||(lf=new Promise((t,e)=>{try{let n=indexedDB.open(dH,hH);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(Er.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Iv,{keyPath:"compositeKey"})}}}catch(n){e(Er.create("storage-open",{originalErrorMessage:n?.message}))}}),lf)}function pH(t,e){return mH(gH(t),e)}function mH(t,e){return T(this,null,function*(){let i=(yield fH()).transaction(Iv,"readwrite"),o=i.objectStore(Iv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},i.onerror=c=>{var u;a(Er.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function gH(t){return`${t.options.appId}-${t.name}`}var Dv=new Nu("@firebase/app-check");function wv(t,e){return rs()?pH(t,e).catch(n=>{Dv.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function _R(){return pR().enabled}function vR(){return T(this,null,function*(){let t=pR();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var yH={error:"UNKNOWN_ERROR"};function _H(t){return Vb.encodeString(JSON.stringify(t),!1)}function bv(t,e=!1){return T(this,null,function*(){let n=t.app;mR(n);let i=Un(n),r=i.token,o;if(r&&!El(r)&&(i.token=void 0,r=void 0),!r){let c=yield i.cachedTokenPromise;c&&(El(c)?r=c:yield wv(n,void 0))}if(!e&&r&&El(r))return{token:r.token};let s=!1;if(_R()){i.exchangeTokenPromise||(i.exchangeTokenPromise=gR(yR(n,yield vR()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let c=yield i.exchangeTokenPromise;return yield wv(n,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield Un(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Dv.warn(c.message):Dv.error(c),o=c}let a;return r?o?El(r)?a={token:r.token,internalError:o}:a=hR(o):(a={token:r.token},i.token=r,yield wv(n,r)):a=hR(o),s&&IH(n,a),a})}function vH(t){return T(this,null,function*(){let e=t.app;mR(e);let{provider:n}=Un(e);if(_R()){let i=yield vR(),{token:r}=yield gR(yR(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function wH(t,e,n,i){let{app:r}=t,o=Un(r),s={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&El(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),dR(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>dR(t))}function wR(t,e){let n=Un(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function dR(t){let{app:e}=t,n=Un(e),i=n.tokenRefresher;i||(i=EH(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function EH(t){let{app:e}=t;return new Ev(()=>T(this,null,function*(){let n=Un(e),i;if(n.token?i=yield bv(t,!0):i=yield bv(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=Un(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},uR.RETRIAL_MIN_WAIT,uR.RETRIAL_MAX_WAIT)}function IH(t,e){let n=Un(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function El(t){return t.expireTimeMillis-Date.now()>0}function hR(t){return{token:_H(yH),error:t}}var Cv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Un(this.app);for(let n of e)wR(this.app,n.next);return Promise.resolve()}};function DH(t,e){return new Cv(t,e)}function bH(t){return{getToken:e=>bv(t,e),getLimitedUseToken:()=>vH(t),addTokenListener:e=>wH(t,"INTERNAL",e),removeTokenListener:e=>wR(t.app,e)}}var CH="@firebase/app-check",TH="0.8.4";var SH="app-check",fR="app-check-internal";function AH(){Mn(new on(SH,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return DH(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(fR).initialize()})),Mn(new on(fR,t=>{let e=t.getProvider("app-check").getImmediate();return bH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ze(CH,TH)}AH();var xH=["localhost","0.0.0.0","127.0.0.1"],fte=typeof window<"u"&&xH.includes(window.location.hostname);var RH="firebase",MH="10.12.2";Wn.registerVersion(RH,MH,"app-compat");var kH=["ngOnDestroy"],DR=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if(kH.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>n.run(()=>u)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(d=>{let f=d?.(...u);return i?.spy?.apply&&i.spy.apply(o,u,f),f})})})});var Tv=class{constructor(e){return e}},Ir=new O("angularfire2.app.options"),uf=new O("angularfire2.app.name");function df(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let s=Wn.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>Wn.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;PH("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Tv(s)}var PH=(t,...e)=>{Vs()&&typeof console<"u"&&console[t](...e)};function hf(t,e,n,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return NH(r,s)||(IR("error",`${e} was already initialized on the ${n} Firebase App with different settings.${OH?" You may need to reload as Firebase is not HMR aware.":""}`),IR("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([t,a,r]),a}}function NH(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var OH=typeof module<"u"&&!!module.hot,IR=(t,...e)=>{Vs()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Sv=new O("angularfire2.auth.use-emulator"),Av=new O("angularfire2.auth.settings"),xv=new O("angularfire2.auth.tenant-id"),Rv=new O("angularfire2.auth.langugage-code"),Mv=new O("angularfire2.auth.use-device-language"),kv=new O("angularfire.auth.persistence"),Pv=(t,e,n,i,r,o,s,a)=>hf(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),i&&(c.tenantId=i),c.languageCode=r,o&&c.useDeviceLanguage(),s)for(let[u,d]of Object.entries(s))c.settings[u]=d;return a&&c.setPersistence(a),c},[n,i,r,o,s,a]),bR=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,s,a,c,u,d,f,m,y){let I=new z,x=nt(void 0).pipe(Bt(s.outsideAngular),Tt(()=>o.runOutsideAngular(()=>import("./chunk-377FJDQD.js"))),ye(()=>df(n,o,i)),ye(A=>Pv(A,o,a,u,d,f,c,m)),Dc({bufferSize:1,refCount:!1}));if(mo(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=nt(null);else{x.pipe(yd()).subscribe();let A=x.pipe(Tt(V=>V.getRedirectResult().then(W=>W,()=>null)),zt,Dc({bufferSize:1,refCount:!1})),j=x.pipe(Tt(V=>new ne(W=>({unsubscribe:o.runOutsideAngular(()=>V.onAuthStateChanged(ie=>W.next(ie),ie=>W.error(ie),()=>W.complete()))})))),q=x.pipe(Tt(V=>new ne(W=>({unsubscribe:o.runOutsideAngular(()=>V.onIdTokenChanged(ie=>W.next(ie),ie=>W.error(ie),()=>W.complete()))}))));this.authState=A.pipe(vd(j),gn(s.outsideAngular),Bt(s.insideAngular)),this.user=A.pipe(vd(q),gn(s.outsideAngular),Bt(s.insideAngular)),this.idToken=this.user.pipe(Tt(V=>V?Ct(V.getIdToken()):nt(null))),this.idTokenResult=this.user.pipe(Tt(V=>V?Ct(V.getIdTokenResult()):nt(null))),this.credential=Yt(A,I,this.authState.pipe(Ge(V=>!V))).pipe(ye(V=>V?.user?V:null),gn(s.outsideAngular),Bt(s.insideAngular))}return DR(this,x,o,{spy:{apply:(A,j,q)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&q.then(V=>I.next(V))}}})}static \u0275fac=function(i){return new(i||t)(C(Ir),C(uf,8),C($t),C(te),C(Cn),C(Sv,8),C(Av,8),C(xv,8),C(Rv,8),C(Mv,8),C(kv,8),C(Vn,8))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var CR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},TR={};var Dr,Nv;(function(){var t;function e(E,_){function w(){}w.prototype=_.prototype,E.D=_.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(D,b,R){for(var v=Array(arguments.length-2),_i=2;_i<arguments.length;_i++)v[_i-2]=arguments[_i];return _.prototype[b].apply(D,v)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,_,w){w||(w=0);var D=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)D[b]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(b=0;16>b;++b)D[b]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=E.g[0],w=E.g[1],b=E.g[2];var R=E.g[3],v=_+(R^w&(b^R))+D[0]+3614090360&4294967295;_=w+(v<<7&4294967295|v>>>25),v=R+(b^_&(w^b))+D[1]+3905402710&4294967295,R=_+(v<<12&4294967295|v>>>20),v=b+(w^R&(_^w))+D[2]+606105819&4294967295,b=R+(v<<17&4294967295|v>>>15),v=w+(_^b&(R^_))+D[3]+3250441966&4294967295,w=b+(v<<22&4294967295|v>>>10),v=_+(R^w&(b^R))+D[4]+4118548399&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(b^_&(w^b))+D[5]+1200080426&4294967295,R=_+(v<<12&4294967295|v>>>20),v=b+(w^R&(_^w))+D[6]+2821735955&4294967295,b=R+(v<<17&4294967295|v>>>15),v=w+(_^b&(R^_))+D[7]+4249261313&4294967295,w=b+(v<<22&4294967295|v>>>10),v=_+(R^w&(b^R))+D[8]+1770035416&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(b^_&(w^b))+D[9]+2336552879&4294967295,R=_+(v<<12&4294967295|v>>>20),v=b+(w^R&(_^w))+D[10]+4294925233&4294967295,b=R+(v<<17&4294967295|v>>>15),v=w+(_^b&(R^_))+D[11]+2304563134&4294967295,w=b+(v<<22&4294967295|v>>>10),v=_+(R^w&(b^R))+D[12]+1804603682&4294967295,_=w+(v<<7&4294967295|v>>>25),v=R+(b^_&(w^b))+D[13]+4254626195&4294967295,R=_+(v<<12&4294967295|v>>>20),v=b+(w^R&(_^w))+D[14]+2792965006&4294967295,b=R+(v<<17&4294967295|v>>>15),v=w+(_^b&(R^_))+D[15]+1236535329&4294967295,w=b+(v<<22&4294967295|v>>>10),v=_+(b^R&(w^b))+D[1]+4129170786&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^b&(_^w))+D[6]+3225465664&4294967295,R=_+(v<<9&4294967295|v>>>23),v=b+(_^w&(R^_))+D[11]+643717713&4294967295,b=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(b^R))+D[0]+3921069994&4294967295,w=b+(v<<20&4294967295|v>>>12),v=_+(b^R&(w^b))+D[5]+3593408605&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^b&(_^w))+D[10]+38016083&4294967295,R=_+(v<<9&4294967295|v>>>23),v=b+(_^w&(R^_))+D[15]+3634488961&4294967295,b=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(b^R))+D[4]+3889429448&4294967295,w=b+(v<<20&4294967295|v>>>12),v=_+(b^R&(w^b))+D[9]+568446438&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^b&(_^w))+D[14]+3275163606&4294967295,R=_+(v<<9&4294967295|v>>>23),v=b+(_^w&(R^_))+D[3]+4107603335&4294967295,b=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(b^R))+D[8]+1163531501&4294967295,w=b+(v<<20&4294967295|v>>>12),v=_+(b^R&(w^b))+D[13]+2850285829&4294967295,_=w+(v<<5&4294967295|v>>>27),v=R+(w^b&(_^w))+D[2]+4243563512&4294967295,R=_+(v<<9&4294967295|v>>>23),v=b+(_^w&(R^_))+D[7]+1735328473&4294967295,b=R+(v<<14&4294967295|v>>>18),v=w+(R^_&(b^R))+D[12]+2368359562&4294967295,w=b+(v<<20&4294967295|v>>>12),v=_+(w^b^R)+D[5]+4294588738&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^b)+D[8]+2272392833&4294967295,R=_+(v<<11&4294967295|v>>>21),v=b+(R^_^w)+D[11]+1839030562&4294967295,b=R+(v<<16&4294967295|v>>>16),v=w+(b^R^_)+D[14]+4259657740&4294967295,w=b+(v<<23&4294967295|v>>>9),v=_+(w^b^R)+D[1]+2763975236&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^b)+D[4]+1272893353&4294967295,R=_+(v<<11&4294967295|v>>>21),v=b+(R^_^w)+D[7]+4139469664&4294967295,b=R+(v<<16&4294967295|v>>>16),v=w+(b^R^_)+D[10]+3200236656&4294967295,w=b+(v<<23&4294967295|v>>>9),v=_+(w^b^R)+D[13]+681279174&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^b)+D[0]+3936430074&4294967295,R=_+(v<<11&4294967295|v>>>21),v=b+(R^_^w)+D[3]+3572445317&4294967295,b=R+(v<<16&4294967295|v>>>16),v=w+(b^R^_)+D[6]+76029189&4294967295,w=b+(v<<23&4294967295|v>>>9),v=_+(w^b^R)+D[9]+3654602809&4294967295,_=w+(v<<4&4294967295|v>>>28),v=R+(_^w^b)+D[12]+3873151461&4294967295,R=_+(v<<11&4294967295|v>>>21),v=b+(R^_^w)+D[15]+530742520&4294967295,b=R+(v<<16&4294967295|v>>>16),v=w+(b^R^_)+D[2]+3299628645&4294967295,w=b+(v<<23&4294967295|v>>>9),v=_+(b^(w|~R))+D[0]+4096336452&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~b))+D[7]+1126891415&4294967295,R=_+(v<<10&4294967295|v>>>22),v=b+(_^(R|~w))+D[14]+2878612391&4294967295,b=R+(v<<15&4294967295|v>>>17),v=w+(R^(b|~_))+D[5]+4237533241&4294967295,w=b+(v<<21&4294967295|v>>>11),v=_+(b^(w|~R))+D[12]+1700485571&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~b))+D[3]+2399980690&4294967295,R=_+(v<<10&4294967295|v>>>22),v=b+(_^(R|~w))+D[10]+4293915773&4294967295,b=R+(v<<15&4294967295|v>>>17),v=w+(R^(b|~_))+D[1]+2240044497&4294967295,w=b+(v<<21&4294967295|v>>>11),v=_+(b^(w|~R))+D[8]+1873313359&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~b))+D[15]+4264355552&4294967295,R=_+(v<<10&4294967295|v>>>22),v=b+(_^(R|~w))+D[6]+2734768916&4294967295,b=R+(v<<15&4294967295|v>>>17),v=w+(R^(b|~_))+D[13]+1309151649&4294967295,w=b+(v<<21&4294967295|v>>>11),v=_+(b^(w|~R))+D[4]+4149444226&4294967295,_=w+(v<<6&4294967295|v>>>26),v=R+(w^(_|~b))+D[11]+3174756917&4294967295,R=_+(v<<10&4294967295|v>>>22),v=b+(_^(R|~w))+D[2]+718787259&4294967295,b=R+(v<<15&4294967295|v>>>17),v=w+(R^(b|~_))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(b+(v<<21&4294967295|v>>>11))&4294967295,E.g[2]=E.g[2]+b&4294967295,E.g[3]=E.g[3]+R&4294967295}i.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var w=_-this.blockSize,D=this.B,b=this.h,R=0;R<_;){if(b==0)for(;R<=w;)r(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<_;)if(D[b++]=E.charCodeAt(R++),b==this.blockSize){r(this,D),b=0;break}}else for(;R<_;)if(D[b++]=E[R++],b==this.blockSize){r(this,D),b=0;break}}this.h=b,this.o+=_},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var w=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=w&255,w/=256;for(this.u(E),E=Array(16),_=w=0;4>_;++_)for(var D=0;32>D;D+=8)E[w++]=this.g[_]>>>D&255;return E};function o(E,_){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=_(E)}function s(E,_){this.h=_;for(var w=[],D=!0,b=E.length-1;0<=b;b--){var R=E[b]|0;D&&R==_||(w[b]=R,D=!1)}this.g=w}var a={};function c(E){return-128<=E&&128>E?o(E,function(_){return new s([_|0],0>_?-1:0)}):new s([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return A(u(-E));for(var _=[],w=1,D=0;E>=w;D++)_[D]=E/w|0,w*=4294967296;return new s(_,0)}function d(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return A(d(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(_,8)),D=f,b=0;b<E.length;b+=8){var R=Math.min(8,E.length-b),v=parseInt(E.substring(b,b+R),_);8>R?(R=u(Math.pow(_,R)),D=D.j(R).add(u(v))):(D=D.j(w),D=D.add(u(v)))}return D}var f=c(0),m=c(1),y=c(16777216);t=s.prototype,t.m=function(){if(x(this))return-A(this).m();for(var E=0,_=1,w=0;w<this.g.length;w++){var D=this.i(w);E+=(0<=D?D:4294967296+D)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(I(this))return"0";if(x(this))return"-"+A(this).toString(E);for(var _=u(Math.pow(E,6)),w=this,D="";;){var b=W(w,_).g;w=j(w,b.j(_));var R=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=b,I(w))return R+D;for(;6>R.length;)R="0"+R;D=R+D}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function I(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function x(E){return E.h==-1}t.l=function(E){return E=j(this,E),x(E)?-1:I(E)?0:1};function A(E){for(var _=E.g.length,w=[],D=0;D<_;D++)w[D]=~E.g[D];return new s(w,~E.h).add(m)}t.abs=function(){return x(this)?A(this):this},t.add=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],D=0,b=0;b<=_;b++){var R=D+(this.i(b)&65535)+(E.i(b)&65535),v=(R>>>16)+(this.i(b)>>>16)+(E.i(b)>>>16);D=v>>>16,R&=65535,v&=65535,w[b]=v<<16|R}return new s(w,w[w.length-1]&-2147483648?-1:0)};function j(E,_){return E.add(A(_))}t.j=function(E){if(I(this)||I(E))return f;if(x(this))return x(E)?A(this).j(A(E)):A(A(this).j(E));if(x(E))return A(this.j(A(E)));if(0>this.l(y)&&0>E.l(y))return u(this.m()*E.m());for(var _=this.g.length+E.g.length,w=[],D=0;D<2*_;D++)w[D]=0;for(D=0;D<this.g.length;D++)for(var b=0;b<E.g.length;b++){var R=this.i(D)>>>16,v=this.i(D)&65535,_i=E.i(b)>>>16,Qa=E.i(b)&65535;w[2*D+2*b]+=v*Qa,q(w,2*D+2*b),w[2*D+2*b+1]+=R*Qa,q(w,2*D+2*b+1),w[2*D+2*b+1]+=v*_i,q(w,2*D+2*b+1),w[2*D+2*b+2]+=R*_i,q(w,2*D+2*b+2)}for(D=0;D<_;D++)w[D]=w[2*D+1]<<16|w[2*D];for(D=_;D<2*_;D++)w[D]=0;return new s(w,0)};function q(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function V(E,_){this.g=E,this.h=_}function W(E,_){if(I(_))throw Error("division by zero");if(I(E))return new V(f,f);if(x(E))return _=W(A(E),_),new V(A(_.g),A(_.h));if(x(_))return _=W(E,A(_)),new V(A(_.g),_.h);if(30<E.g.length){if(x(E)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var w=m,D=_;0>=D.l(E);)w=ie(w),D=ie(D);var b=J(w,1),R=J(D,1);for(D=J(D,2),w=J(w,2);!I(D);){var v=R.add(D);0>=v.l(E)&&(b=b.add(w),R=v),D=J(D,1),w=J(w,1)}return _=j(E,b.j(_)),new V(b,_)}for(b=f;0<=E.l(_);){for(w=Math.max(1,Math.floor(E.m()/_.m())),D=Math.ceil(Math.log(w)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),R=u(w),v=R.j(_);x(v)||0<v.l(E);)w-=D,R=u(w),v=R.j(_);I(R)&&(R=m),b=b.add(R),E=j(E,v)}return new V(b,E)}t.A=function(E){return W(this,E).h},t.and=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],D=0;D<_;D++)w[D]=this.i(D)&E.i(D);return new s(w,this.h&E.h)},t.or=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],D=0;D<_;D++)w[D]=this.i(D)|E.i(D);return new s(w,this.h|E.h)},t.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],D=0;D<_;D++)w[D]=this.i(D)^E.i(D);return new s(w,this.h^E.h)};function ie(E){for(var _=E.g.length+1,w=[],D=0;D<_;D++)w[D]=E.i(D)<<1|E.i(D-1)>>>31;return new s(w,E.h)}function J(E,_){var w=_>>5;_%=32;for(var D=E.g.length-w,b=[],R=0;R<D;R++)b[R]=0<_?E.i(R+w)>>>_|E.i(R+w+1)<<32-_:E.i(R+w);return new s(b,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Nv=TR.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Dr=TR.Integer=s}).apply(typeof CR<"u"?CR:typeof self<"u"?self:typeof window<"u"?window:{});var ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ji={};var Ov,Fv,ra,Lv,Il,pf,Vv,jv,Bv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ff=="object"&&ff];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var i=n(this);function r(l,h){if(h)e:{var p=i;l=l.split(".");for(var g=0;g<l.length-1;g++){var S=l[g];if(!(S in p))break e;p=p[S]}l=l[l.length-1],g=p[l],h=h(g),h!=g&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var p=0,g=!1,S={next:function(){if(!g&&p<l.length){var k=p++;return{value:h(k,l[k]),done:!1}}return g=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}r("Array.prototype.values",function(l){return l||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,g),l.apply(h,S)}}return function(){return l.apply(h,arguments)}}function m(l,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function y(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),l.apply(this,g)}}function I(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(g,S,k){for(var U=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)U[Fe-2]=arguments[Fe];return h.prototype[S].apply(g,U)}}function x(l){let h=l.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=l[g];return p}return[]}function A(l,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(c(g)){let S=l.length||0,k=g.length||0;l.length=S+k;for(let U=0;U<k;U++)l[S+U]=g[U]}else l.push(g)}}class j{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function q(l){return/^[\s\xa0]*$/.test(l)}function V(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function W(l){return W[" "](l),l}W[" "]=function(){};var ie=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function J(l,h,p){for(let g in l)h.call(p,l[g],g,l)}function E(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function _(l){let h={};for(let p in l)h[p]=l[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(l,h){let p,g;for(let S=1;S<arguments.length;S++){g=arguments[S];for(p in g)l[p]=g[p];for(let k=0;k<w.length;k++)p=w[k],Object.prototype.hasOwnProperty.call(g,p)&&(l[p]=g[p])}}function b(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function R(l){a.setTimeout(()=>{throw l},0)}function v(){var l=Jp;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class _i{constructor(){this.h=this.g=null}add(h,p){let g=Qa.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var Qa=new j(()=>new SN,l=>l.reset());class SN{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ya,Za=!1,Jp=new _i,ND=()=>{let l=a.Promise.resolve(void 0);Ya=()=>{l.then(AN)}};var AN=()=>{for(var l;l=v();){try{l.h.call(l.g)}catch(p){R(p)}var h=Qa;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}Za=!1};function Qi(){this.s=this.s,this.C=this.C}Qi.prototype.s=!1,Qi.prototype.ma=function(){this.s||(this.s=!0,this.N())},Qi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Mt(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var xN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function Xa(l,h){if(Mt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,g=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(ie){e:{try{W(h.nodeName);var S=!0;break e}catch{}S=!1}S||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:RN[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Xa.aa.h.call(this)}}I(Xa,Mt);var RN={2:"touch",3:"pen",4:"mouse"};Xa.prototype.h=function(){Xa.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ja="closure_listenable_"+(1e6*Math.random()|0),MN=0;function kN(l,h,p,g,S){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=S,this.key=++MN,this.da=this.fa=!1}function mu(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function gu(l){this.src=l,this.g={},this.h=0}gu.prototype.add=function(l,h,p,g,S){var k=l.toString();l=this.g[k],l||(l=this.g[k]=[],this.h++);var U=tm(l,h,g,S);return-1<U?(h=l[U],p||(h.fa=!1)):(h=new kN(h,this.src,k,!!g,S),h.fa=p,l.push(h)),h};function em(l,h){var p=h.type;if(p in l.g){var g=l.g[p],S=Array.prototype.indexOf.call(g,h,void 0),k;(k=0<=S)&&Array.prototype.splice.call(g,S,1),k&&(mu(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function tm(l,h,p,g){for(var S=0;S<l.length;++S){var k=l[S];if(!k.da&&k.listener==h&&k.capture==!!p&&k.ha==g)return S}return-1}var nm="closure_lm_"+(1e6*Math.random()|0),im={};function OD(l,h,p,g,S){if(g&&g.once)return LD(l,h,p,g,S);if(Array.isArray(h)){for(var k=0;k<h.length;k++)OD(l,h[k],p,g,S);return null}return p=am(p),l&&l[Ja]?l.K(h,p,u(g)?!!g.capture:!!g,S):FD(l,h,p,!1,g,S)}function FD(l,h,p,g,S,k){if(!h)throw Error("Invalid event type");var U=u(S)?!!S.capture:!!S,Fe=om(l);if(Fe||(l[nm]=Fe=new gu(l)),p=Fe.add(h,p,g,U,k),p.proxy)return p;if(g=PN(),p.proxy=g,g.src=l,g.listener=p,l.addEventListener)xN||(S=U),S===void 0&&(S=!1),l.addEventListener(h.toString(),g,S);else if(l.attachEvent)l.attachEvent(jD(h.toString()),g);else if(l.addListener&&l.removeListener)l.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function PN(){function l(p){return h.call(l.src,l.listener,p)}let h=NN;return l}function LD(l,h,p,g,S){if(Array.isArray(h)){for(var k=0;k<h.length;k++)LD(l,h[k],p,g,S);return null}return p=am(p),l&&l[Ja]?l.L(h,p,u(g)?!!g.capture:!!g,S):FD(l,h,p,!0,g,S)}function VD(l,h,p,g,S){if(Array.isArray(h))for(var k=0;k<h.length;k++)VD(l,h[k],p,g,S);else g=u(g)?!!g.capture:!!g,p=am(p),l&&l[Ja]?(l=l.i,h=String(h).toString(),h in l.g&&(k=l.g[h],p=tm(k,p,g,S),-1<p&&(mu(k[p]),Array.prototype.splice.call(k,p,1),k.length==0&&(delete l.g[h],l.h--)))):l&&(l=om(l))&&(h=l.g[h.toString()],l=-1,h&&(l=tm(h,p,g,S)),(p=-1<l?h[l]:null)&&rm(p))}function rm(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Ja])em(h.i,l);else{var p=l.type,g=l.proxy;h.removeEventListener?h.removeEventListener(p,g,l.capture):h.detachEvent?h.detachEvent(jD(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=om(h))?(em(p,l),p.h==0&&(p.src=null,h[nm]=null)):mu(l)}}}function jD(l){return l in im?im[l]:im[l]="on"+l}function NN(l,h){if(l.da)l=!0;else{h=new Xa(h,this);var p=l.listener,g=l.ha||l.src;l.fa&&rm(l),l=p.call(g,h)}return l}function om(l){return l=l[nm],l instanceof gu?l:null}var sm="__closure_events_fn_"+(1e9*Math.random()>>>0);function am(l){return typeof l=="function"?l:(l[sm]||(l[sm]=function(h){return l.handleEvent(h)}),l[sm])}function kt(){Qi.call(this),this.i=new gu(this),this.M=this,this.F=null}I(kt,Qi),kt.prototype[Ja]=!0,kt.prototype.removeEventListener=function(l,h,p,g){VD(this,l,h,p,g)};function Vt(l,h){var p,g=l.F;if(g)for(p=[];g;g=g.F)p.push(g);if(l=l.M,g=h.type||h,typeof h=="string")h=new Mt(h,l);else if(h instanceof Mt)h.target=h.target||l;else{var S=h;h=new Mt(g,l),D(h,S)}if(S=!0,p)for(var k=p.length-1;0<=k;k--){var U=h.g=p[k];S=yu(U,g,!0,h)&&S}if(U=h.g=l,S=yu(U,g,!0,h)&&S,S=yu(U,g,!1,h)&&S,p)for(k=0;k<p.length;k++)U=h.g=p[k],S=yu(U,g,!1,h)&&S}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],g=0;g<p.length;g++)mu(p[g]);delete l.g[h],l.h--}}this.F=null},kt.prototype.K=function(l,h,p,g){return this.i.add(String(l),h,!1,p,g)},kt.prototype.L=function(l,h,p,g){return this.i.add(String(l),h,!0,p,g)};function yu(l,h,p,g){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var S=!0,k=0;k<h.length;++k){var U=h[k];if(U&&!U.da&&U.capture==p){var Fe=U.listener,bt=U.ha||U.src;U.fa&&em(l.i,U),S=Fe.call(bt,g)!==!1&&S}}return S&&!g.defaultPrevented}function BD(l,h,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function UD(l){l.g=BD(()=>{l.g=null,l.i&&(l.i=!1,UD(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class ON extends Qi{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:UD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ec(l){Qi.call(this),this.h=l,this.g={}}I(ec,Qi);var $D=[];function HD(l){J(l.g,function(h,p){this.g.hasOwnProperty(p)&&rm(h)},l),l.g={}}ec.prototype.N=function(){ec.aa.N.call(this),HD(this)},ec.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cm=a.JSON.stringify,FN=a.JSON.parse,LN=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function lm(){}lm.prototype.h=null;function qD(l){return l.h||(l.h=l.i())}function zD(){}var tc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function um(){Mt.call(this,"d")}I(um,Mt);function dm(){Mt.call(this,"c")}I(dm,Mt);var qr={},GD=null;function _u(){return GD=GD||new kt}qr.La="serverreachability";function WD(l){Mt.call(this,qr.La,l)}I(WD,Mt);function nc(l){let h=_u();Vt(h,new WD(h))}qr.STAT_EVENT="statevent";function KD(l,h){Mt.call(this,qr.STAT_EVENT,l),this.stat=h}I(KD,Mt);function jt(l){let h=_u();Vt(h,new KD(h,l))}qr.Ma="timingevent";function QD(l,h){Mt.call(this,qr.Ma,l),this.size=h}I(QD,Mt);function ic(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function rc(){this.g=!0}rc.prototype.xa=function(){this.g=!1};function VN(l,h,p,g,S,k){l.info(function(){if(l.g)if(k)for(var U="",Fe=k.split("&"),bt=0;bt<Fe.length;bt++){var xe=Fe[bt].split("=");if(1<xe.length){var Pt=xe[0];xe=xe[1];var Nt=Pt.split("_");U=2<=Nt.length&&Nt[1]=="type"?U+(Pt+"="+xe+"&"):U+(Pt+"=redacted&")}}else U=null;else U=k;return"XMLHTTP REQ ("+g+") [attempt "+S+"]: "+h+`
`+p+`
`+U})}function jN(l,h,p,g,S,k,U){l.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+S+"]: "+h+`
`+p+`
`+k+" "+U})}function es(l,h,p,g){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+UN(l,p)+(g?" "+g:"")})}function BN(l,h){l.info(function(){return"TIMEOUT: "+h})}rc.prototype.info=function(){};function UN(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var g=p[l];if(!(2>g.length)){var S=g[1];if(Array.isArray(S)&&!(1>S.length)){var k=S[0];if(k!="noop"&&k!="stop"&&k!="close")for(var U=1;U<S.length;U++)S[U]=""}}}}return cm(p)}catch{return h}}var vu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},YD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hm;function wu(){}I(wu,lm),wu.prototype.g=function(){return new XMLHttpRequest},wu.prototype.i=function(){return{}},hm=new wu;function Yi(l,h,p,g){this.j=l,this.i=h,this.l=p,this.R=g||1,this.U=new ec(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ZD}function ZD(){this.i=null,this.g="",this.h=!1}var XD={},fm={};function pm(l,h,p){l.L=1,l.v=bu(vi(h)),l.m=p,l.P=!0,JD(l,null)}function JD(l,h){l.F=Date.now(),Eu(l),l.A=vi(l.v);var p=l.A,g=l.R;Array.isArray(g)||(g=[String(g)]),fb(p.i,"t",g),l.C=0,p=l.j.J,l.h=new ZD,l.g=Mb(l.j,p?h:null,!l.m),0<l.O&&(l.M=new ON(m(l.Y,l,l.g),l.O)),h=l.U,p=l.g,g=l.ca;var S="readystatechange";Array.isArray(S)||(S&&($D[0]=S.toString()),S=$D);for(var k=0;k<S.length;k++){var U=OD(p,S[k],g||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),nc(),VN(l.i,l.u,l.A,l.l,l.R,l.m)}Yi.prototype.ca=function(l){l=l.target;let h=this.M;h&&wi(l)==3?h.j():this.Y(l)},Yi.prototype.Y=function(l){try{if(l==this.g)e:{let Nt=wi(this.g);var h=this.g.Ba();let is=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||wb(this.g)))){this.J||Nt!=4||h==7||(h==8||0>=is?nc(3):nc(2)),mm(this);var p=this.g.Z();this.X=p;t:if(eb(this)){var g=wb(this.g);l="";var S=g.length,k=wi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zr(this),oc(this);var U="";break t}this.h.i=new a.TextDecoder}for(h=0;h<S;h++)this.h.h=!0,l+=this.h.i.decode(g[h],{stream:!(k&&h==S-1)});g.length=0,this.h.g+=l,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,jN(this.i,this.u,this.A,this.l,this.R,Nt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,bt=this.g;if((Fe=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Fe)){var xe=Fe;break t}}xe=null}if(p=xe)es(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gm(this,p);else{this.o=!1,this.s=3,jt(12),zr(this),oc(this);break e}}if(this.P){p=!0;let Rn;for(;!this.J&&this.C<U.length;)if(Rn=$N(this,U),Rn==fm){Nt==4&&(this.s=4,jt(14),p=!1),es(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==XD){this.s=4,jt(15),es(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else es(this.i,this.l,Rn,null),gm(this,Rn);if(eb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||U.length!=0||this.h.h||(this.s=1,jt(16),p=!1),this.o=this.o&&p,!p)es(this.i,this.l,U,"[Invalid Chunked Response]"),zr(this),oc(this);else if(0<U.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Im(Pt),Pt.M=!0,jt(11))}}else es(this.i,this.l,U,null),gm(this,U);Nt==4&&zr(this),this.o&&!this.J&&(Nt==4?Sb(this.j,this):(this.o=!1,Eu(this)))}else oO(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),zr(this),oc(this)}}}catch{}finally{}};function eb(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function $N(l,h){var p=l.C,g=h.indexOf(`
`,p);return g==-1?fm:(p=Number(h.substring(p,g)),isNaN(p)?XD:(g+=1,g+p>h.length?fm:(h=h.slice(g,g+p),l.C=g+p,h)))}Yi.prototype.cancel=function(){this.J=!0,zr(this)};function Eu(l){l.S=Date.now()+l.I,tb(l,l.I)}function tb(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ic(m(l.ba,l),h)}function mm(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Yi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(BN(this.i,this.A),this.L!=2&&(nc(),jt(17)),zr(this),this.s=2,oc(this)):tb(this,this.S-l)};function oc(l){l.j.G==0||l.J||Sb(l.j,l)}function zr(l){mm(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,HD(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function gm(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||ym(p.h,l))){if(!l.K&&ym(p.h,l)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var S=g;if(S[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)xu(p),Su(p);else break e;Em(p),jt(18)}}else p.za=S[1],0<p.za-p.T&&37500>S[2]&&p.F&&p.v==0&&!p.C&&(p.C=ic(m(p.Za,p),6e3));if(1>=rb(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Wr(p,11)}else if((l.K||p.g==l)&&xu(p),!q(h))for(S=p.Da.g.parse(h),h=0;h<S.length;h++){let xe=S[h];if(p.T=xe[0],xe=xe[1],p.G==2)if(xe[0]=="c"){p.K=xe[1],p.ia=xe[2];let Pt=xe[3];Pt!=null&&(p.la=Pt,p.j.info("VER="+p.la));let Nt=xe[4];Nt!=null&&(p.Aa=Nt,p.j.info("SVER="+p.Aa));let is=xe[5];is!=null&&typeof is=="number"&&0<is&&(g=1.5*is,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let Rn=l.g;if(Rn){let Mu=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mu){var k=g.h;k.g||Mu.indexOf("spdy")==-1&&Mu.indexOf("quic")==-1&&Mu.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(_m(k,k.h),k.h=null))}if(g.D){let Dm=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Dm&&(g.ya=Dm,Be(g.I,g.D,Dm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var U=l;if(g.qa=Rb(g,g.J?g.ia:null,g.W),U.K){ob(g.h,U);var Fe=U,bt=g.L;bt&&(Fe.I=bt),Fe.B&&(mm(Fe),Eu(Fe)),g.g=U}else Cb(g);0<p.i.length&&Au(p)}else xe[0]!="stop"&&xe[0]!="close"||Wr(p,7);else p.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Wr(p,7):wm(p):xe[0]!="noop"&&p.l&&p.l.ta(xe),p.v=0)}}nc(4)}catch{}}var HN=class{constructor(l,h){this.g=l,this.map=h}};function nb(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ib(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function rb(l){return l.h?1:l.g?l.g.size:0}function ym(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function _m(l,h){l.g?l.g.add(h):l.h=h}function ob(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}nb.prototype.cancel=function(){if(this.i=sb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function sb(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return x(l.i)}function qN(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,g=0;g<p;g++)h.push(l[g]);return h}h=[],p=0;for(g in l)h[p++]=l[g];return h}function zN(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let g in l)h[p++]=g;return h}}}function ab(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=zN(l),g=qN(l),S=g.length,k=0;k<S;k++)h.call(void 0,g[k],p&&p[k],l)}var cb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GN(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var g=l[p].indexOf("="),S=null;if(0<=g){var k=l[p].substring(0,g);S=l[p].substring(g+1)}else k=l[p];h(k,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function Gr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Gr){this.h=l.h,Iu(this,l.j),this.o=l.o,this.g=l.g,Du(this,l.s),this.l=l.l;var h=l.i,p=new cc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),lb(this,p),this.m=l.m}else l&&(h=String(l).match(cb))?(this.h=!1,Iu(this,h[1]||"",!0),this.o=sc(h[2]||""),this.g=sc(h[3]||"",!0),Du(this,h[4]),this.l=sc(h[5]||"",!0),lb(this,h[6]||"",!0),this.m=sc(h[7]||"")):(this.h=!1,this.i=new cc(null,this.h))}Gr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(ac(h,ub,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(ac(h,ub,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(ac(p,p.charAt(0)=="/"?QN:KN,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",ac(p,ZN)),l.join("")};function vi(l){return new Gr(l)}function Iu(l,h,p){l.j=p?sc(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Du(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function lb(l,h,p){h instanceof cc?(l.i=h,XN(l.i,l.h)):(p||(h=ac(h,YN)),l.i=new cc(h,l.h))}function Be(l,h,p){l.i.set(h,p)}function bu(l){return Be(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function sc(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ac(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,WN),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function WN(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ub=/[#\/\?@]/g,KN=/[#\?:]/g,QN=/[#\?]/g,YN=/[#\?@]/g,ZN=/#/g;function cc(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Zi(l){l.g||(l.g=new Map,l.h=0,l.i&&GN(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=cc.prototype,t.add=function(l,h){Zi(this),this.i=null,l=ts(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function db(l,h){Zi(l),h=ts(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function hb(l,h){return Zi(l),h=ts(l,h),l.g.has(h)}t.forEach=function(l,h){Zi(this),this.g.forEach(function(p,g){p.forEach(function(S){l.call(h,S,g,this)},this)},this)},t.na=function(){Zi(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let S=l[g];for(let k=0;k<S.length;k++)p.push(h[g])}return p},t.V=function(l){Zi(this);let h=[];if(typeof l=="string")hb(this,l)&&(h=h.concat(this.g.get(ts(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return Zi(this),this.i=null,l=ts(this,l),hb(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function fb(l,h,p){db(l,h),0<p.length&&(l.i=null,l.g.set(ts(l,h),x(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let k=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var S=k;U[g]!==""&&(S+="="+encodeURIComponent(String(U[g]))),l.push(S)}}return this.i=l.join("&")};function ts(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function XN(l,h){h&&!l.j&&(Zi(l),l.i=null,l.g.forEach(function(p,g){var S=g.toLowerCase();g!=S&&(db(this,g),fb(this,S,p))},l)),l.j=h}function JN(l,h){let p=new rc;if(a.Image){let g=new Image;g.onload=y(Xi,p,"TestLoadImage: loaded",!0,h,g),g.onerror=y(Xi,p,"TestLoadImage: error",!1,h,g),g.onabort=y(Xi,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=y(Xi,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=l}else h(!1)}function eO(l,h){let p=new rc,g=new AbortController,S=setTimeout(()=>{g.abort(),Xi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:g.signal}).then(k=>{clearTimeout(S),k.ok?Xi(p,"TestPingServer: ok",!0,h):Xi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(S),Xi(p,"TestPingServer: error",!1,h)})}function Xi(l,h,p,g,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),g(p)}catch{}}function tO(){this.g=new LN}function nO(l,h,p){let g=p||"";try{ab(l,function(S,k){let U=S;u(S)&&(U=cm(S)),h.push(g+k+"="+encodeURIComponent(U))})}catch(S){throw h.push(g+"type="+encodeURIComponent("_badmap")),S}}function lc(l){this.l=l.Ub||null,this.j=l.eb||!1}I(lc,lm),lc.prototype.g=function(){return new Cu(this.l,this.j)},lc.prototype.i=function(l){return function(){return l}}({});function Cu(l,h){kt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Cu,kt),t=Cu.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,dc(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uc(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,dc(this)),this.g&&(this.readyState=3,dc(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pb(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function pb(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?uc(this):dc(this),this.readyState==3&&pb(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,uc(this))},t.Qa=function(l){this.g&&(this.response=l,uc(this))},t.ga=function(){this.g&&uc(this)};function uc(l){l.readyState=4,l.l=null,l.j=null,l.v=null,dc(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function dc(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Cu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function mb(l){let h="";return J(l,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function vm(l,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=mb(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Be(l,h,p))}function Ye(l){kt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ye,kt);var iO=/^https?$/i,rO=["POST","PUT"];t=Ye.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hm.g(),this.v=this.o?qD(this.o):qD(hm),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(k){gb(this,k);return}if(l=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var S in g)p.set(S,g[S]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let k of g.keys())p.set(k,g.get(k));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(k=>k.toLowerCase()=="content-type"),S=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(rO,h,void 0))||g||S||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,U]of p)this.g.setRequestHeader(k,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vb(this),this.u=!0,this.g.send(l),this.u=!1}catch(k){gb(this,k)}};function gb(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,yb(l),Tu(l)}function yb(l){l.A||(l.A=!0,Vt(l,"complete"),Vt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Vt(this,"complete"),Vt(this,"abort"),Tu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tu(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?_b(this):this.bb())},t.bb=function(){_b(this)};function _b(l){if(l.h&&typeof s<"u"&&(!l.v[1]||wi(l)!=4||l.Z()!=2)){if(l.u&&wi(l)==4)BD(l.Ea,0,l);else if(Vt(l,"readystatechange"),wi(l)==4){l.h=!1;try{let U=l.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=U===0){var S=String(l.D).match(cb)[1]||null;!S&&a.self&&a.self.location&&(S=a.self.location.protocol.slice(0,-1)),g=!iO.test(S?S.toLowerCase():"")}p=g}if(p)Vt(l,"complete"),Vt(l,"success");else{l.m=6;try{var k=2<wi(l)?l.g.statusText:""}catch{k=""}l.l=k+" ["+l.Z()+"]",yb(l)}}finally{Tu(l)}}}}function Tu(l,h){if(l.g){vb(l);let p=l.g,g=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Vt(l,"ready");try{p.onreadystatechange=g}catch{}}}function vb(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function wi(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<wi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),FN(h)}};function wb(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function oO(l){let h={};l=(l.g&&2<=wi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<l.length;g++){if(q(l[g]))continue;var p=b(l[g]);let S=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let k=h[S]||[];h[S]=k,k.push(p)}E(h,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hc(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Eb(l){this.Aa=0,this.i=[],this.j=new rc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hc("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hc("baseRetryDelayMs",5e3,l),this.cb=hc("retryDelaySeedMs",1e4,l),this.Wa=hc("forwardChannelMaxRetries",2,l),this.wa=hc("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new nb(l&&l.concurrentRequestLimit),this.Da=new tO,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Eb.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,g){jt(0),this.W=l,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=Rb(this,null,this.W),Au(this)};function wm(l){if(Ib(l),l.G==3){var h=l.U++,p=vi(l.I);if(Be(p,"SID",l.K),Be(p,"RID",h),Be(p,"TYPE","terminate"),fc(l,p),h=new Yi(l,l.j,h),h.L=2,h.v=bu(vi(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=Mb(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Eu(h)}xb(l)}function Su(l){l.g&&(Im(l),l.g.cancel(),l.g=null)}function Ib(l){Su(l),l.u&&(a.clearTimeout(l.u),l.u=null),xu(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Au(l){if(!ib(l.h)&&!l.s){l.s=!0;var h=l.Ga;Ya||ND(),Za||(Ya(),Za=!0),Jp.add(h,l),l.B=0}}function sO(l,h){return rb(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ic(m(l.Ga,l,h),Ab(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let S=new Yi(this,this.j,l),k=this.o;if(this.S&&(k?(k=_(k),D(k,this.S)):k=this.S),this.m!==null||this.O||(S.H=k,k=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=bb(this,S,h),p=vi(this.I),Be(p,"RID",l),Be(p,"CVER",22),this.D&&Be(p,"X-HTTP-Session-Id",this.D),fc(this,p),k&&(this.O?h="headers="+encodeURIComponent(String(mb(k)))+"&"+h:this.m&&vm(p,this.m,k)),_m(this.h,S),this.Ua&&Be(p,"TYPE","init"),this.P?(Be(p,"$req",h),Be(p,"SID","null"),S.T=!0,pm(S,p,null)):pm(S,p,h),this.G=2}}else this.G==3&&(l?Db(this,l):this.i.length==0||ib(this.h)||Db(this))};function Db(l,h){var p;h?p=h.l:p=l.U++;let g=vi(l.I);Be(g,"SID",l.K),Be(g,"RID",p),Be(g,"AID",l.T),fc(l,g),l.m&&l.o&&vm(g,l.m,l.o),p=new Yi(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=bb(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),_m(l.h,p),pm(p,g,h)}function fc(l,h){l.H&&J(l.H,function(p,g){Be(h,g,p)}),l.l&&ab({},function(p,g){Be(h,g,p)})}function bb(l,h,p){p=Math.min(l.i.length,p);var g=l.l?m(l.l.Na,l.l,l):null;e:{var S=l.i;let k=-1;for(;;){let U=["count="+p];k==-1?0<p?(k=S[0].g,U.push("ofs="+k)):k=0:U.push("ofs="+k);let Fe=!0;for(let bt=0;bt<p;bt++){let xe=S[bt].g,Pt=S[bt].map;if(xe-=k,0>xe)k=Math.max(0,S[bt].g-100),Fe=!1;else try{nO(Pt,U,"req"+xe+"_")}catch{g&&g(Pt)}}if(Fe){g=U.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,g}function Cb(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Ya||ND(),Za||(Ya(),Za=!0),Jp.add(h,l),l.v=0}}function Em(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ic(m(l.Fa,l),Ab(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Tb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ic(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Su(this),Tb(this))};function Im(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Tb(l){l.g=new Yi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=vi(l.qa);Be(h,"RID","rpc"),Be(h,"SID",l.K),Be(h,"AID",l.T),Be(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Be(h,"TO",l.ja),Be(h,"TYPE","xmlhttp"),fc(l,h),l.m&&l.o&&vm(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=bu(vi(h)),p.m=null,p.P=!0,JD(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Su(this),Em(this),jt(19))};function xu(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Sb(l,h){var p=null;if(l.g==h){xu(l),Im(l),l.g=null;var g=2}else if(ym(l.h,h))p=h.D,ob(l.h,h),g=1;else return;if(l.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var S=l.B;g=_u(),Vt(g,new QD(g,p)),Au(l)}else Cb(l);else if(S=h.s,S==3||S==0&&0<h.X||!(g==1&&sO(l,h)||g==2&&Em(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),S){case 1:Wr(l,5);break;case 4:Wr(l,10);break;case 3:Wr(l,6);break;default:Wr(l,2)}}}function Ab(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Wr(l,h){if(l.j.info("Error code "+h),h==2){var p=m(l.fb,l),g=l.Xa;let S=!g;g=new Gr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Iu(g,"https"),bu(g),S?JN(g.toString(),p):eO(g.toString(),p)}else jt(2);l.G=0,l.l&&l.l.sa(h),xb(l),Ib(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function xb(l){if(l.G=0,l.ka=[],l.l){let h=sb(l.h);(h.length!=0||l.i.length!=0)&&(A(l.ka,h),A(l.ka,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.ra()}}function Rb(l,h,p){var g=p instanceof Gr?vi(p):new Gr(p);if(g.g!="")h&&(g.g=h+"."+g.g),Du(g,g.s);else{var S=a.location;g=S.protocol,h=h?h+"."+S.hostname:S.hostname,S=+S.port;var k=new Gr(null);g&&Iu(k,g),h&&(k.g=h),S&&Du(k,S),p&&(k.l=p),g=k}return p=l.D,h=l.ya,p&&h&&Be(g,p,h),Be(g,"VER",l.la),fc(l,g),g}function Mb(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Ye(new lc({eb:p})):new Ye(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kb(){}t=kb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ru(){}Ru.prototype.g=function(l,h){return new rn(l,h)};function rn(l,h){kt.call(this),this.g=new Eb(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!q(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!q(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new ns(this)}I(rn,kt),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){wm(this.g)},rn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=cm(l),l=p);h.i.push(new HN(h.Ya++,l)),h.G==3&&Au(h)},rn.prototype.N=function(){this.g.l=null,delete this.j,wm(this.g),delete this.g,rn.aa.N.call(this)};function Pb(l){um.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}I(Pb,um);function Nb(){dm.call(this),this.status=1}I(Nb,dm);function ns(l){this.g=l}I(ns,kb),ns.prototype.ua=function(){Vt(this.g,"a")},ns.prototype.ta=function(l){Vt(this.g,new Pb(l))},ns.prototype.sa=function(l){Vt(this.g,new Nb)},ns.prototype.ra=function(){Vt(this.g,"b")},Ru.prototype.createWebChannel=Ru.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,Bv=ji.createWebChannelTransport=function(){return new Ru},jv=ji.getStatEventTarget=function(){return _u()},Vv=ji.Event=qr,pf=ji.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vu.NO_ERROR=0,vu.TIMEOUT=8,vu.HTTP_ERROR=6,Il=ji.ErrorCode=vu,YD.COMPLETE="complete",Lv=ji.EventType=YD,zD.EventType=tc,tc.OPEN="a",tc.CLOSE="b",tc.ERROR="c",tc.MESSAGE="d",kt.prototype.listen=kt.prototype.K,ra=ji.WebChannel=zD,Fv=ji.FetchXmlHttpFactory=lc,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,Ov=ji.XhrIo=Ye}).apply(typeof ff<"u"?ff:typeof self<"u"?self:typeof window<"u"?window:{});var SR="@firebase/firestore";var ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");var Oa="10.12.1";var Rr=new Nu("@firebase/firestore");function la(){return Rr.logLevel}function HE(t){Rr.setLogLevel(t)}function L(t,...e){if(Rr.logLevel<=Gn.DEBUG){let n=e.map(qE);Rr.debug(`Firestore (${Oa}): ${t}`,...n)}}function rt(t,...e){if(Rr.logLevel<=Gn.ERROR){let n=e.map(qE);Rr.error(`Firestore (${Oa}): ${t}`,...n)}}function Sn(t,...e){if(Rr.logLevel<=Gn.WARN){let n=e.map(qE);Rr.warn(`Firestore (${Oa}): ${t}`,...n)}}function qE(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function G(t="Unexpected state"){let e=`FIRESTORE (${Oa}) INTERNAL ASSERTION FAILED: `+t;throw rt(e),new Error(e)}function K(t,e){t||G()}function SM(t,e){t||G()}function H(t,e){return t}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends Pu{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ft=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Cf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},zv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}},Gv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Wv=class{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),o=new ft;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ft,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>T(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ft)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(K(typeof i.accessToken=="string"),new Cf(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new ht(e)}},Kv=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Qv=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new Kv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Yv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Zv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,L("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(K(typeof n.token=="string"),this.R=n.token,new Yv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function LH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var Tf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=LH(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function ue(t,e){return t<e?-1:t>e?1:0}function _a(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function AM(t){return t+"\0"}var Qe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Qe(0,0))}static max(){return new t(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Sf=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&G(),i===void 0?i=e.length-n:i>e.length-n&&G(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),s=n.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Te=class t extends Sf{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new F(P.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},VH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ot=class t extends Sf{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return VH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new F(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},s=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new F(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new F(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new F(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var $=class t{constructor(e){this.path=e}static fromPath(e){return new t(Te.fromString(e))}static fromName(e){return new t(Te.fromString(e).popFirst(5))}static empty(){return new t(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Te(e.slice()))}};var va=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function Xv(t){return t.fields.find(e=>e.kind===2)}function To(t){return t.fields.filter(e=>e.kind!==2)}va.UNKNOWN_ID=-1;var ma=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Nl=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,An.min())}};function xM(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=X.fromTimestamp(i===1e9?new Qe(n+1,0):new Qe(n,i));return new An(r,$.empty(),e)}function RM(t){return new An(t.readTime,t.key,-1)}var An=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(X.min(),$.empty(),-1)}static max(){return new t(X.max(),$.empty(),-1)}};function zE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}var MM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Af=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Br(t){return T(this,null,function*(){if(t.code!==P.FAILED_PRECONDITION||t.message!==MM)throw t;L("LocalStore","Unexpectedly lost primary lease")})}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,s=!1;e.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&n()},c=>i(c))}),s=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(d=>{s[u]=d,++a,a===o&&i(s)},d=>r(d))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};var xf=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new ft,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ko(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=GE(i.target.error);this.V.reject(new ko(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(o){throw new ko(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(L("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new ew(n)}},Mr=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(pc())===12.2&&rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return L("SimpleDb","Removing database:",e),So(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!rs())return!1;if(t.C())return!0;let e=pc(),n=t.S(e),i=0<n&&n<10,r=kM(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return T(this,null,function*(){return this.db||(L("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;n(s)},r.onblocked=()=>{i(new ko(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new F(P.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new F(P.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new ko(e,s))},r.onupgradeneeded=o=>{L("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,r.transaction,o.oldVersion,this.version).next(()=>{L("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return T(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=xf.open(this.db,e,o?"readonly":"readwrite",i),c=r(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),M.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(L("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function kM(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var Jv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return So(this.B.delete())}},ko=class extends F{constructor(e,n){super(P.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Ur(t){return t.name==="IndexedDbTransactionError"}var ew=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(L("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(L("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),So(i)}add(e){return L("SimpleDb","ADD",this.store.name,e,e),So(this.store.add(e))}get(e){return So(this.store.get(e)).next(n=>(n===void 0&&(n=null),L("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return L("SimpleDb","DELETE",this.store.name,e),So(this.store.delete(e))}count(){return L("SimpleDb","COUNT",this.store.name),So(this.store.count())}U(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new M((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(i),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new M((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}j(e,n){L("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.H=!1;let r=this.cursor(i);return this.W(r,(o,s,a)=>a.delete())}J(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.W(r,n)}Y(e){let n=this.cursor({});return new M((i,r)=>{n.onerror=o=>{let s=GE(o.target.error);r(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}W(e,n){let i=[];return new M((r,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let c=new Jv(a),u=n(a.primaryKey,a.value,c);if(u instanceof M){let d=u.catch(f=>(c.done(),M.reject(f)));i.push(d)}c.isDone?r():c.K===null?a.continue():a.continue(c.K)}}).next(()=>M.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function So(t){return new M((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=GE(i.target.error);n(r)}})}var AR=!1;function GE(t){let e=Mr.S(pc());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AR||(AR=!0,setTimeout(()=>{throw i},0)),i}}return t}var tw=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){L("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>T(this,null,function*(){this.task=null;try{L("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){Ur(n)?L("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Br(n)}yield this.X(6e4)}))}},nw=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return T(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let i=new Set,r=n,o=!0;return M.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!i.has(s))return L("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(r,o)).next(a=>(L("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let i=e;return n.changes.forEach((r,o)=>{let s=RM(o);zE(s,i)>0&&(i=s)}),new An(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var hn=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function nu(t){return t==null}function Ol(t){return t===0&&1/t==-1/0}function PM(t){return typeof t=="number"&&Number.isInteger(t)&&!Ol(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Gt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xR(e)),e=jH(t.get(n),e);return xR(e)}function jH(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function xR(t){return t+""}function ai(t){let e=t.length;if(K(e>=2),e===2)return K(t.charAt(0)===""&&t.charAt(1)===""),Te.emptyPath();let n=e-2,i=[],r="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&G(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=t.substring(o,s),r+="\0";break;case"":r+=t.substring(o,s+1);break;default:G()}o=s+2}return new Te(i)}var RR=["userId","batchId"];function vf(t,e){return[t,Gt(e)]}function NM(t,e,n){return[t,Gt(e),n]}var BH={},UH=["prefixPath","collectionGroup","readTime","documentId"],$H=["prefixPath","collectionGroup","documentId"],HH=["collectionGroup","readTime","prefixPath","documentId"],qH=["canonicalId","targetId"],zH=["targetId","path"],GH=["path","targetId"],WH=["collectionId","parent"],KH=["indexId","uid"],QH=["uid","sequenceNumber"],YH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ZH=["indexId","uid","orderedDocumentKey"],XH=["userId","collectionPath","documentId"],JH=["userId","collectionPath","largestBatchId"],eq=["userId","collectionGroup","largestBatchId"],OM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tq=[...OM,"documentOverlays"],FM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LM=FM,VM=[...LM,"indexConfiguration","indexState","indexEntries"],nq=VM;var Fl=class extends Af{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function Dt(t,e){let n=H(t);return Mr.F(n._e,e)}function MR(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var qe=class t{constructor(e,n){this.comparator=e,this.root=n||li.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,li.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,li.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pa(this.root,e,this.comparator,!1)}getReverseIterator(){return new pa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pa(this.root,e,this.comparator,!0)}},pa=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},li=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();let e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}};li.EMPTY=null,li.RED=!0,li.BLACK=!1;li.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,n,i,r,o){return this}insert(e,n,i){return new li(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ve=class t{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rf(this.data.getIterator())}getIteratorFrom(e){return new Rf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Rf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function oa(t){return t.hasNext()?t.getNext():void 0}var fn=class t{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ve(ot.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _a(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var Mf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function BM(){return typeof atob<"u"}var It=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Mf("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var iq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(t){if(K(!!t),typeof t=="string"){let e=0,n=iq.exec(t);if(K(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function kr(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}function Ep(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function WE(t){let e=t.mapValue.fields.__previous_value__;return Ep(e)?WE(e):e}function Ll(t){let e=$i(t.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}var iw=class{constructor(e,n,i,r,o,s,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Pr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ar={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wf={nullValue:"NULL_VALUE"};function Po(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ep(t)?4:UM(t)?9007199254740991:10:G()}function hi(t,e){if(t===e)return!0;let n=Po(t);if(n!==Po(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ll(t).isEqual(Ll(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=$i(r.timestampValue),a=$i(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return kr(r.bytesValue).isEqual(kr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return et(r.geoPointValue.latitude)===et(o.geoPointValue.latitude)&&et(r.geoPointValue.longitude)===et(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return et(r.integerValue)===et(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=et(r.doubleValue),a=et(o.doubleValue);return s===a?Ol(s)===Ol(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return _a(t.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(MR(s)!==MR(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!hi(s[c],a[c])))return!1;return!0}(t,e);default:return G()}}function Vl(t,e){return(t.values||[]).find(n=>hi(n,e))!==void 0}function Nr(t,e){if(t===e)return 0;let n=Po(t),i=Po(e);if(n!==i)return ue(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=et(o.integerValue||o.doubleValue),c=et(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return kR(t.timestampValue,e.timestampValue);case 4:return kR(Ll(t),Ll(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(o,s){let a=kr(o),c=kr(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=ue(a[u],c[u]);if(d!==0)return d}return ue(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ue(et(o.latitude),et(s.latitude));return a!==0?a:ue(et(o.longitude),et(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let u=0;u<a.length&&u<c.length;++u){let d=Nr(a[u],c[u]);if(d)return d}return ue(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Ar.mapValue&&s===Ar.mapValue)return 0;if(o===Ar.mapValue)return 1;if(s===Ar.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let m=ue(c[f],d[f]);if(m!==0)return m;let y=Nr(a[c[f]],u[d[f]]);if(y!==0)return y}return ue(c.length,d.length)}(t.mapValue,e.mapValue);default:throw G()}}function kR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);let n=$i(t),i=$i(e),r=ue(n.seconds,i.seconds);return r!==0?r:ue(n.nanos,i.nanos)}function wa(t){return rw(t)}function rw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=$i(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=rw(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${rw(n.fields[s])}`;return r+"}"}(t.mapValue):G()}function No(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ow(t){return!!t&&"integerValue"in t}function jl(t){return!!t&&"arrayValue"in t}function PR(t){return!!t&&"nullValue"in t}function NR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ef(t){return!!t&&"mapValue"in t}function xl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return qo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=xl(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function UM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function rq(t){return"nullValue"in t?wf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?No(Pr.empty(),$.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:G()}function oq(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?No(Pr.empty(),$.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ar:G()}function OR(t,e){let n=Nr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function FR(t,e){let n=Nr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Lt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Ef(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xl(n)}setAll(e){let n=ot.emptyPath(),i={},r=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}s?i[a.lastSegment()]=xl(s):r.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());Ef(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Ef(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){qo(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t(xl(this.value))}};function $M(t){let e=[];return qo(t.fields,(n,i)=>{let r=new ot([n]);if(Ef(i)){let o=$M(i.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new fn(e)}var pt=class t{constructor(e,n,i,r,o,s,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,X.min(),X.min(),X.min(),Lt.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,X.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,X.min(),X.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,X.min(),X.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fi=class{constructor(e,n){this.position=e,this.inclusive=n}};function LR(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],s=t.position[r];if(o.field.isKeyField()?i=$.comparator($.fromName(s.referenceValue),n.key):i=Nr(s,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function VR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hi(t.position[n],e.position[n]))return!1;return!0}var Oo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function sq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var kf=class{},Ee=class t extends kf{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new cw(e,n,i):n==="array-contains"?new dw(e,i):n==="in"?new Pf(e,i):n==="not-in"?new hw(e,i):n==="array-contains-any"?new fw(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new lw(e,i):new uw(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Nr(n,this.value)):n!==null&&Po(this.value)===Po(n)&&this.matchesComparison(Nr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ne=class t extends kf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Ea(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ea(t){return t.op==="and"}function sw(t){return t.op==="or"}function KE(t){return HM(t)&&Ea(t)}function HM(t){for(let e of t.filters)if(e instanceof Ne)return!1;return!0}function aw(t){if(t instanceof Ee)return t.field.canonicalString()+t.op.toString()+wa(t.value);if(KE(t))return t.filters.map(e=>aw(e)).join(",");{let e=t.filters.map(n=>aw(n)).join(",");return`${t.op}(${e})`}}function qM(t,e){return t instanceof Ee?function(i,r){return r instanceof Ee&&i.op===r.op&&i.field.isEqual(r.field)&&hi(i.value,r.value)}(t,e):t instanceof Ne?function(i,r){return r instanceof Ne&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&qM(s,r.filters[a]),!0):!1}(t,e):void G()}function zM(t,e){let n=t.filters.concat(e);return Ne.create(n,t.op)}function GM(t){return t instanceof Ee?function(n){return`${n.field.canonicalString()} ${n.op} ${wa(n.value)}`}(t):t instanceof Ne?function(n){return n.op.toString()+" {"+n.getFilters().map(GM).join(" ,")+"}"}(t):"Filter"}var cw=class extends Ee{constructor(e,n,i){super(e,n,i),this.key=$.fromName(i.referenceValue)}matches(e){let n=$.comparator(e.key,this.key);return this.matchesComparison(n)}},lw=class extends Ee{constructor(e,n){super(e,"in",n),this.keys=WM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},uw=class extends Ee{constructor(e,n){super(e,"not-in",n),this.keys=WM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function WM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>$.fromName(i.referenceValue))}var dw=class extends Ee{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return jl(n)&&Vl(n.arrayValue,this.value)}},Pf=class extends Ee{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Vl(this.value.arrayValue,n)}},hw=class extends Ee{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Vl(this.value.arrayValue,n)}},fw=class extends Ee{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!jl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Vl(this.value.arrayValue,i))}};var pw=class{constructor(e,n=null,i=[],r=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function mw(t,e=null,n=[],i=[],r=null,o=null,s=null){return new pw(t,e,n,i,r,o,s)}function Fo(t){let e=H(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>aw(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),nu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>wa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>wa(i)).join(",")),e.ue=n}return e.ue}function iu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!VR(t.startAt,e.startAt)&&VR(t.endAt,e.endAt)}function Nf(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Of(t,e){return t.filters.filter(n=>n instanceof Ee&&n.field.isEqual(e))}function jR(t,e,n){let i=wf,r=!0;for(let o of Of(t,e)){let s=wf,a=!0;switch(o.op){case"<":case"<=":s=rq(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=wf}OR({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];OR({value:i,inclusive:r},{value:s,inclusive:n.inclusive})<0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}function BR(t,e,n){let i=Ar,r=!0;for(let o of Of(t,e)){let s=Ar,a=!0;switch(o.op){case">=":case">":s=oq(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ar}FR({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];FR({value:i,inclusive:r},{value:s,inclusive:n.inclusive})>0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}var $n=class{constructor(e,n=null,i=[],r=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function KM(t,e,n,i,r,o,s,a){return new $n(t,e,n,i,r,o,s,a)}function Fa(t){return new $n(t)}function UR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function QE(t){return t.collectionGroup!==null}function ga(t){let e=H(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ve(ot.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Oo(o,i))}),n.has(ot.keyField().canonicalString())||e.ce.push(new Oo(ot.keyField(),i))}return e.ce}function Wt(t){let e=H(t);return e.le||(e.le=aq(e,ga(t))),e.le}function aq(t,e){if(t.limitType==="F")return mw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new Oo(r.field,o)});let n=t.endAt?new fi(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new fi(t.startAt.position,t.startAt.inclusive):null;return mw(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function gw(t,e){let n=t.filters.concat([e]);return new $n(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ff(t,e,n){return new $n(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ru(t,e){return iu(Wt(t),Wt(e))&&t.limitType===e.limitType}function QM(t){return`${Fo(Wt(t))}|lt:${t.limitType}`}function ua(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>GM(r)).join(", ")}]`),nu(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>wa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>wa(r)).join(",")),`Target(${i})`}(Wt(t))}; limitType=${t.limitType})`}function ou(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):$.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of ga(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(s,a,c){let u=LR(s,a,c);return s.inclusive?u<=0:u<0}(i.startAt,ga(i),r)||i.endAt&&!function(s,a,c){let u=LR(s,a,c);return s.inclusive?u>=0:u>0}(i.endAt,ga(i),r))}(t,e)}function YM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZM(t){return(e,n)=>{let i=!1;for(let r of ga(t)){let o=cq(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function cq(t,e,n){let i=t.field.isKeyField()?$.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Nr(c,u):G()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return G()}}var pi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){qo(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return jM(this.inner)}size(){return this.innerSize}};var lq=new qe($.comparator);function nn(){return lq}var XM=new qe($.comparator);function Sl(...t){let e=XM;for(let n of t)e=e.insert(n.key,n);return e}function JM(t){let e=XM;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ci(){return Rl()}function ek(){return Rl()}function Rl(){return new pi(t=>t.toString(),(t,e)=>t.isEqual(e))}var uq=new qe($.comparator),dq=new Ve($.comparator);function de(...t){let e=dq;for(let n of t)e=e.add(n);return e}var hq=new Ve(ue);function YE(){return hq}function tk(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ol(e)?"-0":e}}function nk(t){return{integerValue:""+t}}function ik(t,e){return PM(e)?nk(e):tk(t,e)}var Ia=class{constructor(){this._=void 0}};function fq(t,e,n){return t instanceof Or?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Ep(o)&&(o=WE(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Hi?ok(t,e):t instanceof qi?sk(t,e):function(r,o){let s=rk(r,o),a=$R(s)+$R(r.Pe);return ow(s)&&ow(r.Pe)?nk(a):tk(r.serializer,a)}(t,e)}function pq(t,e,n){return t instanceof Hi?ok(t,e):t instanceof qi?sk(t,e):n}function rk(t,e){return t instanceof Fr?function(i){return ow(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var Or=class extends Ia{},Hi=class extends Ia{constructor(e){super(),this.elements=e}};function ok(t,e){let n=ak(e);for(let i of t.elements)n.some(r=>hi(r,i))||n.push(i);return{arrayValue:{values:n}}}var qi=class extends Ia{constructor(e){super(),this.elements=e}};function sk(t,e){let n=ak(e);for(let i of t.elements)n=n.filter(r=>!hi(r,i));return{arrayValue:{values:n}}}var Fr=class extends Ia{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function $R(t){return et(t.integerValue||t.doubleValue)}function ak(t){return jl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Lo=class{constructor(e,n){this.field=e,this.transform=n}};function mq(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Hi&&r instanceof Hi||i instanceof qi&&r instanceof qi?_a(i.elements,r.elements,hi):i instanceof Fr&&r instanceof Fr?hi(i.Pe,r.Pe):i instanceof Or&&r instanceof Or}(t.transform,e.transform)}var yw=class{constructor(e,n){this.version=e,this.transformResults=n}},tt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function If(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Da=class{};function ck(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vr(t.key,tt.none()):new Lr(t.key,t.data,tt.none());{let n=t.data,i=Lt.empty(),r=new Ve(ot.comparator);for(let o of e.fields)if(!r.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new Hn(t.key,i,new fn(r.toArray()),tt.none())}}function gq(t,e,n){t instanceof Lr?function(r,o,s){let a=r.value.clone(),c=qR(r.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hn?function(r,o,s){if(!If(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=qR(r.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(lk(r)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Ml(t,e,n,i){return t instanceof Lr?function(o,s,a,c){if(!If(o.precondition,s))return a;let u=o.value.clone(),d=zR(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof Hn?function(o,s,a,c){if(!If(o.precondition,s))return a;let u=zR(o.fieldTransforms,c,s),d=s.data;return d.setAll(lk(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,i):function(o,s,a){return If(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function yq(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=rk(i.transform,r||null);o!=null&&(n===null&&(n=Lt.empty()),n.set(i.field,o))}return n||null}function HR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&_a(i,r,(o,s)=>mq(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Lr=class extends Da{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Hn=class extends Da{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function lk(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function qR(t,e,n){let i=new Map;K(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],s=o.transform,a=e.data.field(o.field);i.set(o.field,pq(s,a,n[r]))}return i}function zR(t,e,n){let i=new Map;for(let r of t){let o=r.transform,s=n.data.field(r.field);i.set(r.field,fq(o,s,e))}return i}var Vr=class extends Da{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Bl=class extends Da{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ul=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&gq(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ml(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=Ml(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=ek();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(r.key)?null:a;let c=ck(s,a);c!==null&&i.set(r.key,c),s.isValidDocument()||s.convertToNoDocument(X.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&_a(this.mutations,e.mutations,(n,i)=>HR(n,i))&&_a(this.baseMutations,e.baseMutations,(n,i)=>HR(n,i))}},_w=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){K(e.mutations.length===i.length);let r=function(){return uq}(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new t(e,n,i,r)}};var $l=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var vw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ut,Ce;function uk(t){switch(t){default:return G();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function dk(t){if(t===void 0)return rt("GRPC error has no .code"),P.UNKNOWN;switch(t){case ut.OK:return P.OK;case ut.CANCELLED:return P.CANCELLED;case ut.UNKNOWN:return P.UNKNOWN;case ut.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case ut.INTERNAL:return P.INTERNAL;case ut.UNAVAILABLE:return P.UNAVAILABLE;case ut.UNAUTHENTICATED:return P.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case ut.NOT_FOUND:return P.NOT_FOUND;case ut.ALREADY_EXISTS:return P.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return P.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case ut.ABORTED:return P.ABORTED;case ut.OUT_OF_RANGE:return P.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return P.UNIMPLEMENTED;case ut.DATA_LOSS:return P.DATA_LOSS;default:return G()}}(Ce=ut||(ut={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";var GR=null;function hk(){return new TextEncoder}var _q=new Dr([4294967295,4294967295],0);function WR(t){let e=hk().encode(t),n=new Nv;return n.update(e),new Uint8Array(n.digest())}function KR(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Dr([n,i],0),new Dr([r,o],0)]}var ww=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Mo(`Invalid padding: ${n}`);if(i<0)throw new Mo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Mo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Mo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Dr.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Dr.fromNumber(i)));return r.compare(_q)===1&&(r=new Dr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=WR(e),[i,r]=KR(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,r,n);return i.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=WR(e),[i,r]=KR(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},Mo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Hl=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,ql.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(X.min(),r,new qe(ue),nn(),de())}},ql=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,de(),de(),de())}};var ya=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},Lf=class{constructor(e,n){this.targetId=e,this.me=n}},Vf=class{constructor(e,n,i=It.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},jf=class{constructor(){this.fe=0,this.ge=YR(),this.pe=It.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=de(),n=de(),i=de();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:G()}}),new ql(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=YR()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Ew=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=nn(),this.qe=QR(),this.Qe=new qe(ue)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let o=r.target;if(Nf(o))if(i===0){let s=new $(o.path);this.Ue(n,s,pt.newNoDocument(s,X.min()))}else K(i===1);else{let s=this.Ye(n);if(s!==i){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}GR?.et(function(d,f,m,y,I){var x,A,j,q,V,W;let ie={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},J=f.unchangedNames;return J&&(ie.bloomFilter={applied:I===0,hashCount:(x=J?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(q=(j=(A=J?.bits)===null||A===void 0?void 0:A.bitmap)===null||j===void 0?void 0:j.length)!==null&&q!==void 0?q:0,padding:(W=(V=J?.bits)===null||V===void 0?void 0:V.padding)!==null&&W!==void 0?W:0,mightContain:E=>{var _;return(_=y?.mightContain(E))!==null&&_!==void 0&&_}}),ie}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,s,a;try{s=kr(i).toUint8Array()}catch(c){if(c instanceof Mf)return Sn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ww(s,r,o)}catch(c){return Sn(c instanceof Mo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Nf(a.target)){let c=new $(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,pt.newNoDocument(c,e))}o.be&&(n.set(s,o.Ce()),o.ve())}});let i=de();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let r=new Hl(e,n,this.Qe,this.ke,i);return this.ke=nn(),this.qe=QR(),this.Qe=new qe(ue),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new jf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ve(ue),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new jf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function QR(){return new qe($.comparator)}function YR(){return new qe($.comparator)}var vq={asc:"ASCENDING",desc:"DESCENDING"},wq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Eq={and:"AND",or:"OR"},Iw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Dw(t,e){return t.useProto3Json||nu(e)?e:{value:e}}function ba(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Iq(t,e){return ba(t,e.toTimestamp())}function st(t){return K(!!t),X.fromTimestamp(function(n){let i=$i(n);return new Qe(i.seconds,i.nanos)}(t))}function ZE(t,e){return bw(t,e).canonicalString()}function bw(t,e){let n=function(r){return new Te(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pk(t){let e=Te.fromString(t);return K(bk(e)),e}function zl(t,e){return ZE(t.databaseId,e.path)}function ui(t,e){let n=pk(e);if(n.get(1)!==t.databaseId.projectId)throw new F(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(yk(n))}function mk(t,e){return ZE(t.databaseId,e)}function gk(t){let e=pk(t);return e.length===4?Te.emptyPath():yk(e)}function Cw(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yk(t){return K(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ZR(t,e,n){return{name:zl(t,e),fields:n.value.mapValue.fields}}function _k(t,e,n){let i=ui(t,e.name),r=st(e.updateTime),o=e.createTime?st(e.createTime):X.min(),s=new Lt({mapValue:{fields:e.fields}}),a=pt.newFoundDocument(i,r,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Dq(t,e){return"found"in e?function(i,r){K(!!r.found),r.found.name,r.found.updateTime;let o=ui(i,r.found.name),s=st(r.found.updateTime),a=r.found.createTime?st(r.found.createTime):X.min(),c=new Lt({mapValue:{fields:r.found.fields}});return pt.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(i,r){K(!!r.missing),K(!!r.readTime);let o=ui(i,r.missing),s=st(r.readTime);return pt.newNoDocument(o,s)}(t,e):G()}function bq(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(K(d===void 0||typeof d=="string"),It.fromBase64String(d||"")):(K(d===void 0||d instanceof Buffer||d instanceof Uint8Array),It.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?P.UNKNOWN:dk(u.code);return new F(d,u.message||"")}(s);n=new Vf(i,r,o,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=ui(t,i.document.name),o=st(i.document.updateTime),s=i.document.createTime?st(i.document.createTime):X.min(),a=new Lt({mapValue:{fields:i.document.fields}}),c=pt.newFoundDocument(r,o,s,a),u=i.targetIds||[],d=i.removedTargetIds||[];n=new ya(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=ui(t,i.document),o=i.readTime?st(i.readTime):X.min(),s=pt.newNoDocument(r,o),a=i.removedTargetIds||[];n=new ya([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=ui(t,i.document),o=i.removedTargetIds||[];n=new ya([],o,r,null)}else{if(!("filter"in e))return G();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new vw(r,o),a=i.targetId;n=new Lf(a,s)}}return n}function Gl(t,e){let n;if(e instanceof Lr)n={update:ZR(t,e.key,e.value)};else if(e instanceof Vr)n={delete:zl(t,e.key)};else if(e instanceof Hn)n={update:ZR(t,e.key,e.data),updateMask:Rq(e.fieldMask)};else{if(!(e instanceof Bl))return G();n={verify:zl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof Or)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw G()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:Iq(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G()}(t,e.precondition)),n}function Tw(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?tt.updateTime(st(o.updateTime)):o.exists!==void 0?tt.exists(o.exists):tt.none()}(e.currentDocument):tt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,a){let c=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),c=new Or;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Hi(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new qi(d)}else"increment"in a?c=new Fr(s,a.increment):G();let u=ot.fromServerFormat(a.fieldPath);return new Lo(u,c)}(t,r)):[];if(e.update){e.update.name;let r=ui(t,e.update.name),o=new Lt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let u=c.fieldPaths||[];return new fn(u.map(d=>ot.fromServerFormat(d)))}(e.updateMask);return new Hn(r,o,s,n,i)}return new Lr(r,o,n,i)}if(e.delete){let r=ui(t,e.delete);return new Vr(r,n)}if(e.verify){let r=ui(t,e.verify);return new Bl(r,n)}return G()}function Cq(t,e){return t&&t.length>0?(K(e!==void 0),t.map(n=>function(r,o){let s=r.updateTime?st(r.updateTime):st(o);return s.isEqual(X.min())&&(s=st(o)),new yw(s,r.transformResults||[])}(n,e))):[]}function vk(t,e){return{documents:[mk(t,e.path)]}}function wk(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=mk(t,r);let o=function(u){if(u.length!==0)return Dk(Ne.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:da(m.field),direction:Sq(m.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=Dw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function Ek(t){let e=gk(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){K(i===1);let d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(f){let m=Ik(f);return m instanceof Ne&&KE(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(m=>function(I){return new Oo(ha(I.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,nu(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){let m=!!f.before,y=f.values||[];return new fi(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){let m=!f.before,y=f.values||[];return new fi(y,m)}(n.endAt)),KM(e,r,s,o,a,"F",c,u)}function Tq(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ik(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=ha(n.unaryFilter.field);return Ee.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=ha(n.unaryFilter.field);return Ee.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ha(n.unaryFilter.field);return Ee.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ha(n.unaryFilter.field);return Ee.create(s,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(t):t.fieldFilter!==void 0?function(n){return Ee.create(ha(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ne.create(n.compositeFilter.filters.map(i=>Ik(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(t):G()}function Sq(t){return vq[t]}function Aq(t){return wq[t]}function xq(t){return Eq[t]}function da(t){return{fieldPath:t.canonicalString()}}function ha(t){return ot.fromServerFormat(t.fieldPath)}function Dk(t){return t instanceof Ee?function(n){if(n.op==="=="){if(NR(n.value))return{unaryFilter:{field:da(n.field),op:"IS_NAN"}};if(PR(n.value))return{unaryFilter:{field:da(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(NR(n.value))return{unaryFilter:{field:da(n.field),op:"IS_NOT_NAN"}};if(PR(n.value))return{unaryFilter:{field:da(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:da(n.field),op:Aq(n.op),value:n.value}}}(t):t instanceof Ne?function(n){let i=n.getFilters().map(r=>Dk(r));return i.length===1?i[0]:{compositeFilter:{op:xq(n.op),filters:i}}}(t):G()}function Rq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ca=class t{constructor(e,n,i,r,o=X.min(),s=X.min(),a=It.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Bf=class{constructor(e){this.ct=e}};function Mq(t,e){let n;if(e.document)n=_k(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=$.fromSegments(e.noDocument.path),r=jo(e.noDocument.readTime);n=pt.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return G();{let i=$.fromSegments(e.unknownDocument.path),r=jo(e.unknownDocument.version);n=pt.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let o=new Qe(r[0],r[1]);return X.fromTimestamp(o)}(e.readTime)),n}function XR(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Uf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,s){return{name:zl(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ba(o,s.version.toTimestamp()),createTime:ba(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Vo(e.version)};else{if(!e.isUnknownDocument())return G();i.unknownDocument={path:n.path.toArray(),version:Vo(e.version)}}return i}function Uf(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Vo(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jo(t){let e=new Qe(t.seconds,t.nanoseconds);return X.fromTimestamp(e)}function Ao(t,e){let n=(e.baseMutations||[]).map(o=>Tw(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>Tw(t.ct,o)),r=Qe.fromMillis(e.localWriteTimeMs);return new Ul(e.batchId,r,n,i)}function Al(t){let e=jo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?jo(t.lastLimboFreeSnapshotVersion):X.min(),i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return K(o.documents.length===1),Wt(Fa(gk(o.documents[0])))}(t.query):function(o){return Wt(Ek(o))}(t.query),new Ca(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,It.fromBase64String(t.resumeToken))}function Ck(t,e){let n=Vo(e.snapshotVersion),i=Vo(e.lastLimboFreeSnapshotVersion),r;r=Nf(e.target)?vk(t.ct,e.target):wk(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fo(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function XE(t){let e=Ek({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ff(e,e.limit,"L"):e}function Uv(t,e){return new $l(e.largestBatchId,Tw(t.ct,e.overlayMutation))}function JR(t,e){let n=e.path.lastSegment();return[t,Gt(e.path.popLast()),n]}function eM(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:Vo(i.readTime),documentKey:Gt(i.documentKey.path),largestBatchId:i.largestBatchId}}var Sw=class{getBundleMetadata(e,n){return tM(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:jo(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return tM(e).put(function(r){return{bundleId:r.id,createTime:Vo(st(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return nM(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:XE(o.bundledQuery),readTime:jo(o.readTime)}}(i)})}saveNamedQuery(e,n){return nM(e).put(function(r){return{name:r.name,readTime:Vo(st(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function tM(t){return Dt(t,"bundles")}function nM(t){return Dt(t,"namedQueries")}var $f=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return Dl(e).get(JR(this.userId,n)).next(i=>i?Uv(this.serializer,i):null)}getOverlays(e,n){let i=ci();return M.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((o,s)=>{let a=new $l(n,s);r.push(this.ht(e,a))}),M.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(s=>r.add(Gt(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(Dl(e).j("collectionPathOverlayIndex",a))}),M.waitFor(o)}getOverlaysForCollection(e,n,i){let r=ci(),o=Gt(n),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Dl(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let u=Uv(this.serializer,c);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let o=ci(),s,a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Dl(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,d)=>{let f=Uv(this.serializer,u);o.size()<r||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,n){return Dl(e).put(function(r,o,s){let[a,c,u]=JR(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Gl(r.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Dl(t){return Dt(t,"documentOverlays")}var Bi=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(et(e.integerValue));else if("doubleValue"in e){let i=et(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Ol(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"&&(i=$i(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(kr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?UM(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):G()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),$.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Bi.bt=new Bi;function kq(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function iM(t){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let s=kq(255&i[o]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}var Aw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{let r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{let r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(e){let n=this.Bt(e),i=iM(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(e){let n=this.Bt(e),i=iM(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},xw=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},Rw=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},xo=class{constructor(){this.Gt=new Aw,this.zt=new xw(this.Gt),this.jt=new Rw(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Ro=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function br(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=rM(t.arrayValue,e.arrayValue),n!==0?n:(n=rM(t.directionalValue,e.directionalValue),n!==0?n:$.comparator(t.documentKey,e.documentKey)))}function rM(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var Hf=class{constructor(e){this.Yt=new Ve((n,i)=>ot.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(K(e.collectionGroup===this.collectionId),this.en)return!1;let n=Xv(e);if(n!==void 0&&!this.nn(n))return!1;let i=To(e),r=new Set,o=0,s=0;for(;o<i.length&&this.nn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let c=i[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<i.length;++o){let a=i[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ve(ot.comparator),n=[];for(let i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new ma(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new ma(i.field,0))}for(let i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new ma(i.field,i.dir==="asc"?0:1)));return new va(va.UNKNOWN_ID,this.collectionId,n,Nl.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function Tk(t){var e,n;if(K(t instanceof Ee||t instanceof Ne),t instanceof Ee){if(t instanceof Pf){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Ee.create(t.field,"==",o)))||[];return Ne.create(r,"or")}return t}let i=t.filters.map(r=>Tk(r));return Ne.create(i,t.op)}function Pq(t){if(t.getFilters().length===0)return[];let e=Pw(Tk(t));return K(Sk(e)),Mw(e)||kw(e)?[e]:e.getFilters()}function Mw(t){return t instanceof Ee}function kw(t){return t instanceof Ne&&KE(t)}function Sk(t){return Mw(t)||kw(t)||function(n){if(n instanceof Ne&&sw(n)){for(let i of n.getFilters())if(!Mw(i)&&!kw(i))return!1;return!0}return!1}(t)}function Pw(t){if(K(t instanceof Ee||t instanceof Ne),t instanceof Ee)return t;if(t.filters.length===1)return Pw(t.filters[0]);let e=t.filters.map(i=>Pw(i)),n=Ne.create(e,t.op);return n=qf(n),Sk(n)?n:(K(n instanceof Ne),K(Ea(n)),K(n.filters.length>1),n.filters.reduce((i,r)=>JE(i,r)))}function JE(t,e){let n;return K(t instanceof Ee||t instanceof Ne),K(e instanceof Ee||e instanceof Ne),n=t instanceof Ee?e instanceof Ee?function(r,o){return Ne.create([r,o],"and")}(t,e):oM(t,e):e instanceof Ee?oM(e,t):function(r,o){if(K(r.filters.length>0&&o.filters.length>0),Ea(r)&&Ea(o))return zM(r,o.getFilters());let s=sw(r)?r:o,a=sw(r)?o:r,c=s.filters.map(u=>JE(u,a));return Ne.create(c,"or")}(t,e),qf(n)}function oM(t,e){if(Ea(e))return zM(e,t.getFilters());{let n=e.filters.map(i=>JE(t,i));return Ne.create(n,"or")}}function qf(t){if(K(t instanceof Ee||t instanceof Ne),t instanceof Ee)return t;let e=t.getFilters();if(e.length===1)return qf(e[0]);if(HM(t))return t;let n=e.map(r=>qf(r)),i=[];return n.forEach(r=>{r instanceof Ee?i.push(r):r instanceof Ne&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Ne.create(i,t.op)}var Nw=class{constructor(){this._n=new Wl}addToCollectionParentIndex(e,n){return this._n.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(An.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(An.min())}updateCollectionGroup(e,n,i){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},Wl=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ve(Te.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ve(Te.comparator)).toArray()}};var mf=new Uint8Array(0),Ow=class{constructor(e,n){this.databaseId=n,this.an=new Wl,this.un=new pi(i=>Fo(i),(i,r)=>iu(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:i,parent:Gt(r)};return sM(e).put(o)}return M.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[AM(n),""],!1,!0);return sM(e).U(r).next(o=>{for(let s of o){if(s.collectionId!==n)break;i.push(ai(s.parent))}return i})}addFieldIndex(e,n){let i=bl(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let s=aa(e);return o.next(a=>{s.put(eM(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let i=bl(e),r=aa(e),o=sa(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=bl(e),i=sa(e),r=aa(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return M.forEach(this.cn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new Hf(i).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let i=sa(e),r=!0,o=new Map;return M.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=de(),a=[];return M.forEach(o,(c,u)=>{L("IndexedDbIndexManager",`Using index ${function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`}(c)} to execute ${Fo(n)}`);let d=function(V,W){let ie=Xv(W);if(ie===void 0)return null;for(let J of Of(V,ie.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null}(u,c),f=function(V,W){let ie=new Map;for(let J of To(W))for(let E of Of(V,J.fieldPath))switch(E.op){case"==":case"in":ie.set(J.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return ie.set(J.fieldPath.canonicalString(),E.value),Array.from(ie.values())}return null}(u,c),m=function(V,W){let ie=[],J=!0;for(let E of To(W)){let _=E.kind===0?jR(V,E.fieldPath,V.startAt):BR(V,E.fieldPath,V.startAt);ie.push(_.value),J&&(J=_.inclusive)}return new fi(ie,J)}(u,c),y=function(V,W){let ie=[],J=!0;for(let E of To(W)){let _=E.kind===0?BR(V,E.fieldPath,V.endAt):jR(V,E.fieldPath,V.endAt);ie.push(_.value),J&&(J=_.inclusive)}return new fi(ie,J)}(u,c),I=this.hn(c,u,m),x=this.hn(c,u,y),A=this.Pn(c,u,f),j=this.In(c.indexId,d,I,m.inclusive,x,y.inclusive,A);return M.forEach(j,q=>i.G(q,n.limit).next(V=>{V.forEach(W=>{let ie=$.fromSegments(W.documentKey);s.has(ie)||(s=s.add(ie),a.push(ie))})}))}).next(()=>a)}return M.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=Pq(Ne.create(e.filters,"and")).map(i=>mw(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,i,r,o,s,a){let c=(n!=null?n.length:1)*Math.max(i.length,o.length),u=c/(n!=null?n.length:1),d=[];for(let f=0;f<c;++f){let m=n?this.Tn(n[f/u]):mf,y=this.En(e,m,i[f%u],r),I=this.dn(e,m,o[f%u],s),x=a.map(A=>this.En(e,m,A,!0));d.push(...this.createRange(y,I,x))}return d}En(e,n,i,r){let o=new Ro(e,$.empty(),n,i);return r?o:o.Jt()}dn(e,n,i,r){let o=new Ro(e,$.empty(),n,i);return r?o.Jt():o}ln(e,n){let i=new Hf(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let s=null;for(let a of o)i.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let i=2,r=this.cn(n);return M.forEach(r,o=>this.ln(e,o).next(s=>{s?i!==0&&s.fields.length<function(c){let u=new Ve(ot.comparator),d=!1;for(let f of c.filters)for(let m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:u=u.add(m.field));for(let f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(e,n){let i=new xo;for(let r of To(e)){let o=n.data.field(r.fieldPath);if(o==null)return null;let s=i.Ht(r.kind);Bi.bt.Pt(o,s)}return i.Wt()}Tn(e){let n=new xo;return Bi.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let i=new xo;return Bi.bt.Pt(No(this.databaseId,n),i.Ht(function(o){let s=To(o);return s.length===0?0:s[s.length-1].kind}(e))),i.Wt()}Pn(e,n,i){if(i===null)return[];let r=[];r.push(new xo);let o=0;for(let s of To(e)){let a=i[o++];for(let c of r)if(this.Vn(n,s.fieldPath)&&jl(a))r=this.mn(r,s,a);else{let u=c.Ht(s.kind);Bi.bt.Pt(a,u)}}return this.fn(r)}hn(e,n,i){return this.Pn(e,n,i.position)}fn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Wt();return n}mn(e,n,i){let r=[...e],o=[];for(let s of i.arrayValue.values||[])for(let a of r){let c=new xo;c.seed(a.Wt()),Bi.bt.Pt(s,c.Ht(n.kind)),o.push(c)}return o}Vn(e,n){return!!e.filters.find(i=>i instanceof Ee&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=bl(e),r=aa(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{let s=[];return M.forEach(o,a=>r.get([a.indexId,this.uid]).next(c=>{s.push(function(d,f){let m=f?new Nl(f.sequenceNumber,new An(jo(f.readTime),new $(ai(f.documentKey)),f.largestBatchId)):Nl.empty(),y=d.fields.map(([I,x])=>new ma(ot.fromServerFormat(I),x));return new va(d.indexId,d.collectionGroup,y,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:ue(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=bl(e),o=aa(e);return this.gn(e).next(s=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,c=>o.put(eM(c.indexId,this.uid,s,i)))))}updateIndexEntries(e,n){let i=new Map;return M.forEach(n,(r,o)=>{let s=i.get(r.collectionGroup);return(s?M.resolve(s):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),M.forEach(a,c=>this.pn(e,r,c).next(u=>{let d=this.yn(o,c);return u.isEqual(d)?M.resolve():this.wn(e,o,c,u,d)}))))})}Sn(e,n,i,r){return sa(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(e,n,i,r){return sa(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(e,n,i){let r=sa(e),o=new Ve(br);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(s,a)=>{o=o.add(new Ro(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let i=new Ve(br),r=this.An(n,e);if(r==null)return i;let o=Xv(n);if(o!=null){let s=e.data.field(o.fieldPath);if(jl(s))for(let a of s.arrayValue.values||[])i=i.add(new Ro(n.indexId,e.key,this.Tn(a),r))}else i=i.add(new Ro(n.indexId,e.key,mf,r));return i}wn(e,n,i,r,o){L("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,u,d,f,m){let y=c.getIterator(),I=u.getIterator(),x=oa(y),A=oa(I);for(;x||A;){let j=!1,q=!1;if(x&&A){let V=d(x,A);V<0?q=!0:V>0&&(j=!0)}else x!=null?q=!0:j=!0;j?(f(A),A=oa(I)):q?(m(x),x=oa(y)):(x=oa(y),A=oa(I))}}(r,o,br,a=>{s.push(this.Sn(e,n,i,a))},a=>{s.push(this.bn(e,n,i,a))}),M.waitFor(s)}gn(e){let n=1;return aa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((s,a)=>br(s,a)).filter((s,a,c)=>!a||br(s,c[a-1])!==0);let r=[];r.push(e);for(let s of i){let a=br(s,e),c=br(s,n);if(a===0)r[0]=e.Jt();else if(a>0&&c<0)r.push(s),r.push(s.Jt());else if(c>0)break}r.push(n);let o=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,mf,[]],c=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,mf,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,n){return br(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(aM)}getMinOffset(e,n){return M.mapArray(this.cn(n),i=>this.ln(e,i).next(r=>r||G())).next(aM)}};function sM(t){return Dt(t,"collectionParents")}function sa(t){return Dt(t,"indexEntries")}function bl(t){return Dt(t,"indexConfiguration")}function aa(t){return Dt(t,"indexState")}function aM(t){K(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;zE(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new An(e.readTime,e.documentKey,n)}var cM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tn=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Ak(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=i.J({range:s},(d,f,m)=>(a++,m.delete()));o.push(c.next(()=>{K(a===1)}));let u=[];for(let d of n.mutations){let f=NM(e,d.key.path,n.batchId);o.push(r.delete(f)),u.push(d.key)}return M.waitFor(o).next(()=>u)}function zf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw G();e=t.noDocument}return JSON.stringify(e).length}Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(41943040,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);var Gf=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,n,i,r){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cr(e).J({index:"userMutationsIndex",range:i},(r,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let o=fa(e),s=Cr(e);return s.add({}).next(a=>{K(typeof a=="number");let c=new Ul(a,n,i,r),u=function(y,I,x){let A=x.baseMutations.map(q=>Gl(y.ct,q)),j=x.mutations.map(q=>Gl(y.ct,q));return{userId:I,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:A,mutations:j}}(this.serializer,this.userId,c),d=[],f=new Ve((m,y)=>ue(m.canonicalString(),y.canonicalString()));for(let m of r){let y=NM(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),d.push(s.put(u)),d.push(o.put(y,BH))}return f.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),M.waitFor(d).next(()=>c)})}lookupMutationBatch(e,n){return Cr(e).get(n).next(i=>i?(K(i.userId===this.userId),Ao(this.serializer,i)):null)}vn(e,n){return this.Cn[n]?M.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Cr(e).J({index:"userMutationsIndex",range:r},(s,a,c)=>{a.userId===this.userId&&(K(a.batchId>=i),o=Ao(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Cr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cr(e).U("userMutationsIndex",n).next(i=>i.map(r=>Ao(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=vf(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return fa(e).J({range:r},(s,a,c)=>{let[u,d,f]=s,m=ai(d);if(u===this.userId&&n.path.isEqual(m))return Cr(e).get(f).next(y=>{if(!y)throw G();K(y.userId===this.userId),o.push(Ao(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ve(ue),r=[];return n.forEach(o=>{let s=vf(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=fa(e).J({range:a},(u,d,f)=>{let[m,y,I]=u,x=ai(y);m===this.userId&&o.path.isEqual(x)?i=i.add(I):f.done()});r.push(c)}),M.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=vf(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new Ve(ue);return fa(e).J({range:s},(c,u,d)=>{let[f,m,y]=c,I=ai(m);f===this.userId&&i.isPrefixOf(I)?I.length===r&&(a=a.add(y)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let i=[],r=[];return n.forEach(o=>{r.push(Cr(e).get(o).next(s=>{if(s===null)throw G();K(s.userId===this.userId),i.push(Ao(this.serializer,s))}))}),M.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return Ak(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),M.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return fa(e).J({range:i},(o,s,a)=>{if(o[0]===this.userId){let c=ai(o[1]);r.push(c)}else a.done()}).next(()=>{K(r.length===0)})})}containsKey(e,n){return xk(e,this.userId,n)}xn(e){return Rk(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function xk(t,e,n){let i=vf(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return fa(t).J({range:o,H:!0},(a,c,u)=>{let[d,f,m]=a;d===e&&f===r&&(s=!0),u.done()}).next(()=>s)}function Cr(t){return Dt(t,"mutations")}function fa(t){return Dt(t,"documentMutations")}function Rk(t){return Dt(t,"mutationQueues")}var Ta=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Fw=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let i=new Ta(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>X.fromTimestamp(new Qe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(e,r)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(e,i))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ca(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(K(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,n,i){let r=0,o=[];return ca(e).J((s,a)=>{let c=Al(a);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,o.push(this.removeTargetData(e,c)))}).next(()=>M.waitFor(o)).next(()=>r)}forEachTarget(e,n){return ca(e).J((i,r)=>{let o=Al(r);n(o)})}Bn(e){return lM(e).get("targetGlobalKey").next(n=>(K(n!==null),n))}kn(e,n){return lM(e).put("targetGlobalKey",n)}qn(e,n){return ca(e).put(Ck(this.serializer,n))}Qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=Fo(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return ca(e).J({range:r,index:"queryTargetsIndex"},(s,a,c)=>{let u=Al(a);iu(n,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,n,i){let r=[],o=Tr(e);return n.forEach(s=>{let a=Gt(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,s))}),M.waitFor(r)}removeMatchingKeys(e,n,i){let r=Tr(e);return M.forEach(n,o=>{let s=Gt(o.path);return M.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){let i=Tr(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Tr(e),o=de();return r.J({range:i,H:!0},(s,a,c)=>{let u=ai(s[1]),d=new $(u);o=o.add(d)}).next(()=>o)}containsKey(e,n){let i=Gt(n.path),r=IDBKeyRange.bound([i],[AM(i)],!1,!0),o=0;return Tr(e).J({index:"documentTargetsIndex",H:!0,range:r},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(e,n){return ca(e).get(n).next(i=>i?Al(i):null)}};function ca(t){return Dt(t,"targets")}function lM(t){return Dt(t,"targetGlobal")}function Tr(t){return Dt(t,"targetDocuments")}function uM([t,e],[n,i]){let r=ue(t,n);return r===0?ue(e,i):r}var Lw=class{constructor(e){this.Kn=e,this.buffer=new Ve(uM),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();uM(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},Vw=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){L("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>T(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ur(n)?L("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Br(n)}yield this.zn(3e5)}))}},jw=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return M.resolve(hn.oe);let i=new Lw(n);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(cM)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cM):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let i,r,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,s=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(e,i,n))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(u=Date.now(),la()<=Gn.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:f})))}};function Nq(t,e){return new jw(t,e)}var Bw=class{constructor(e,n){this.db=e,this.garbageCollector=Nq(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Zn(e){let n=0;return this.Jn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(i,r)=>n(r))}addReference(e,n,i){return gf(e,i)}removeReference(e,n,i){return gf(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return gf(e,n)}er(e,n){return function(r,o){let s=!1;return Rk(r).Y(a=>xk(r,a,o).next(c=>(c&&(s=!0),M.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let c=this.er(e,s).next(u=>{if(!u)return o++,i.getEntry(e,s).next(()=>(i.removeEntry(s,X.min()),Tr(e).delete(function(f){return[0,Gt(f.path)]}(s))))});r.push(c)}}).next(()=>M.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return gf(e,n)}Xn(e,n){let i=Tr(e),r,o=hn.oe;return i.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==hn.oe&&n(new $(ai(r)),o),o=u,r=c):o=hn.oe}).next(()=>{o!==hn.oe&&n(new $(ai(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function gf(t,e){return Tr(t).put(function(i,r){return{targetId:0,path:Gt(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var Wf=class{constructor(){this.changes=new pi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?M.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Uw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return Co(e).put(i)}removeEntry(e,n,i){return Co(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Uf(s),a[a.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.tr(e,i)))}getEntry(e,n){let i=pt.newInvalidDocument(n);return Co(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cl(n))},(r,o)=>{i=this.nr(n,o)}).next(()=>i)}rr(e,n){let i={size:0,document:pt.newInvalidDocument(n)};return Co(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cl(n))},(r,o)=>{i={document:this.nr(n,o),size:zf(o)}}).next(()=>i)}getEntries(e,n){let i=nn();return this.ir(e,n,(r,o)=>{let s=this.nr(r,o);i=i.insert(r,s)}).next(()=>i)}sr(e,n){let i=nn(),r=new qe($.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);i=i.insert(o,a),r=r.insert(o,zf(s))}).next(()=>({documents:i,_r:r}))}ir(e,n,i){if(n.isEmpty())return M.resolve();let r=new Ve(fM);n.forEach(c=>r=r.add(c));let o=IDBKeyRange.bound(Cl(r.first()),Cl(r.last())),s=r.getIterator(),a=s.getNext();return Co(e).J({index:"documentKeyIndex",range:o},(c,u,d)=>{let f=$.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&fM(a,f)<0;)i(a,null),a=s.getNext();a&&a.isEqual(f)&&(i(a,u),a=s.hasNext()?s.getNext():null),a?d.$(Cl(a)):d.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Uf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Co(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let d=nn();for(let f of u){let m=this.nr($.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(ou(n,m)||r.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,n,i,r){let o=nn(),s=hM(n,i),a=hM(n,An.max());return Co(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,u,d)=>{let f=this.nr($.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(f.key,f),o.size===r&&d.done()}).next(()=>o)}newChangeBuffer(e){return new $w(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return dM(e).get("remoteDocumentGlobalKey").next(n=>(K(!!n),n))}tr(e,n){return dM(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let i=Mq(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(X.min())))return i}return pt.newInvalidDocument(e)}};function Mk(t){return new Uw(t)}var $w=class extends Wf{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new pi(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new Ve((o,s)=>ue(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=XR(this.ar.serializer,s);r=r.add(o.path.popLast());let u=zf(c);i+=u-a.size,n.push(this.ar.addEntry(e,o,c))}else if(i-=a.size,this.trackRemovals){let c=XR(this.ar.serializer,s.convertToNoDocument(X.min()));n.push(this.ar.addEntry(e,o,c))}}),r.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,i)),M.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:i,_r:r})=>(r.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function dM(t){return Dt(t,"remoteDocumentGlobal")}function Co(t){return Dt(t,"remoteDocumentsV14")}function Cl(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hM(t,e){let n=e.documentKey.path.toArray();return[t,Uf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function fM(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=ue(n[o],i[o]),r)return r;return r=ue(n.length,i.length),r||(r=ue(n[n.length-2],i[i.length-2]),r||ue(n[n.length-1],i[i.length-1]))}var Hw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Kf=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ml(i.mutation,r,fn.empty(),Qe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,de()).next(()=>i))}getLocalViewOfDocuments(e,n,i=de()){let r=ci();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let s=Sl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let i=ci();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,de()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,i,r){let o=nn(),s=Rl(),a=function(){return Rl()}();return n.forEach((c,u)=>{let d=i.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof Hn)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),Ml(d.mutation,u,d.mutation.getFieldMask(),Qe.now())):s.set(u.key,fn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var f;return a.set(u,new Hw(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let i=Rl(),r=new qe((s,a)=>s-a),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let d=i.get(c)||fn.empty();d=a.applyToLocalView(u,d),i.set(c,d);let f=(r.get(a.batchId)||de()).add(c);r=r.insert(a.batchId,f)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=ek();d.forEach(m=>{if(!o.has(m)){let y=ck(n.get(m),i.get(m));y!==null&&f.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return M.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):QE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):M.resolve(ci()),a=-1,c=o;return s.next(u=>M.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,de())).next(d=>({batchId:a,changes:JM(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(i=>{let r=Sl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,s=Sl();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,c=>{let u=function(f,m){return new $n(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(d=>{d.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,pt.newInvalidDocument(d)))});let a=Sl();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&Ml(d.mutation,u,fn.empty(),Qe.now()),ou(n,u)&&(a=a.insert(c,u))}),a})}};var qw=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return M.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:st(r.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:XE(r.bundledQuery),readTime:st(r.readTime)}}(n)),M.resolve()}};var zw=class{constructor(){this.overlays=new qe($.comparator),this.hr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let i=ci();return M.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),M.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(i)),M.resolve()}getOverlaysForCollection(e,n,i){let r=ci(),o=n.length+1,s=new $(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return M.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new qe((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let d=o.get(u.largestBatchId);d===null&&(d=ci(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=ci(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=r)););return M.resolve(a)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new $l(n,i));let o=this.hr.get(n);o===void 0&&(o=de(),this.hr.set(n,o)),this.hr.set(n,o.add(i.key))}};var Kl=class{constructor(){this.Pr=new Ve(dt.Ir),this.Tr=new Ve(dt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new dt(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new dt(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new $(new Te([])),i=new dt(n,e),r=new dt(n,e+1),o=[];return this.Tr.forEachInRange([i,r],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new $(new Te([])),i=new dt(n,e),r=new dt(n,e+1),o=de();return this.Tr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new dt(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},dt=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return $.comparator(e.key,n.key)||ue(e.pr,n.pr)}static Er(e,n){return ue(e.pr,n.pr)||$.comparator(e.key,n.key)}};var Gw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ve(dt.Ir)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ul(o,n,i,r);this.mutationQueue.push(s);for(let a of r)this.wr=this.wr.add(new dt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,n){return M.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),o=r<0?0:r;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new dt(n,0),r=new dt(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([i,r],s=>{let a=this.Sr(s.pr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ve(ue);return n.forEach(r=>{let o=new dt(r,0),s=new dt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{i=i.add(a.pr)})}),M.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;$.isDocumentKey(o)||(o=o.child(""));let s=new dt(new $(o),0),a=new Ve(ue);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(c.pr)),!0)},s),M.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){K(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return M.forEach(n.mutations,r=>{let o=new dt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new dt(n,0),r=this.wr.firstAfterOrEqual(i);return M.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Ww=class{constructor(e){this.vr=e,this.docs=function(){return new qe($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,s=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return M.resolve(i?i.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let i=nn();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():pt.newInvalidDocument(r))}),M.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=nn(),s=n.path,a=new $(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||zE(RM(d),i)<=0||(r.has(d.key)||ou(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,n,i,r){G()}Fr(e,n){return M.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Kw(this)}getSize(e){return M.resolve(this.size)}},Kw=class extends Wf{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),M.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Qw=class{constructor(e){this.persistence=e,this.Mr=new pi(n=>Fo(n),iu),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Kl,this.targetCount=0,this.Lr=Ta.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),M.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Ta(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.qn(n),M.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),M.waitFor(o).next(()=>r)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return M.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),M.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),M.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return M.resolve(i)}containsKey(e,n){return M.resolve(this.Nr.containsKey(n))}};var Qf=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new hn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Qw(this),this.indexManager=new Nw,this.remoteDocumentCache=function(r){return new Ww(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Bf(n),this.$r=new qw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new Gw(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){L("MemoryPersistence","Starting transaction:",e);let r=new Yw(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(e,n){return M.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},Yw=class extends Af{constructor(e){super(),this.currentSequenceNumber=e}},Yf=class t{constructor(e){this.persistence=e,this.zr=new Kl,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw G()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),M.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),M.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,i=>{let r=$.fromPath(i);return this.Yr(e,r).next(o=>{o||n.removeEntry(r,X.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return M.or([()=>M.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Zw=class{constructor(e){this.serializer=e}O(e,n,i,r){let o=new xf("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RR,{unique:!0}),c.createObjectStore("documentMutations")}(e),pM(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=M.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),pM(e)),s=s.next(()=>function(c){let u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:X.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RR,{unique:!0});let f=u.store("mutations"),m=d.map(y=>f.put(y));return M.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(s=s.next(()=>this.Xr(o))),i<6&&r>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),i<7&&r>=7&&(s=s.next(()=>this.ti(o))),i<8&&r>=8&&(s=s.next(()=>this.ni(e,o))),i<9&&r>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(s=s.next(()=>this.ri(o))),i<11&&r>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:XH});u.createIndex("collectionPathOverlayIndex",JH,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",eq,{unique:!1})})(e)})),i<13&&r>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:UH});u.createIndex("documentKeyIndex",$H),u.createIndex("collectionGroupIndex",HH)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.si(e,o))),i<15&&r>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:KH}).createIndex("sequenceNumberIndex",QH,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:YH}).createIndex("documentKeyIndex",ZH,{unique:!1})}(e))),i<16&&r>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),s}ei(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=zf(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>M.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",s).next(a=>M.forEach(a,c=>{K(c.userId===o.userId);let u=Ao(this.serializer,c);return Ak(e,o.userId,u).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((s,a)=>{let c=new Te(s),u=function(f){return[0,Gt(f)]}(c);o.push(n.get(u).next(d=>d?M.resolve():(f=>n.put({targetId:0,path:Gt(f),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>M.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:WH});let i=n.store("collectionParents"),r=new Wl,o=s=>{if(r.add(s)){let a=s.lastSegment(),c=s.popLast();return i.put({collectionId:a,parent:Gt(c)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new Te(s);return o(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,c],u)=>{let d=ai(a);return o(d.popLast())}))}ri(e){let n=e.store("targets");return n.J((i,r)=>{let o=Al(r),s=Ck(this.serializer,o);return n.put(s)})}ii(e,n){let i=n.store("remoteDocuments"),r=[];return i.J((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(f){return f.document?new $(Te.fromString(f.document.name).popFirst(5)):f.noDocument?$.fromSegments(f.noDocument.path):f.unknownDocument?$.fromSegments(f.unknownDocument.path):G()}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(u))}).next(()=>M.waitFor(r))}si(e,n){let i=n.store("mutations"),r=Mk(this.serializer),o=new Qf(Yf.Hr,this.serializer.ct);return i.U().next(s=>{let a=new Map;return s.forEach(c=>{var u;let d=(u=a.get(c.userId))!==null&&u!==void 0?u:de();Ao(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),M.forEach(a,(c,u)=>{let d=new ht(u),f=$f.lt(this.serializer,d),m=o.getIndexManager(d),y=Gf.lt(d,this.serializer,m,o.referenceDelegate);return new Kf(r,y,f,m).recalculateAndSaveOverlaysForDocumentKeys(new Fl(n,hn.oe),c).next()})})}};function pM(t){t.createObjectStore("targetDocuments",{keyPath:zH}).createIndex("documentTargetsIndex",GH,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qH,{unique:!0}),t.createObjectStore("targetGlobal")}var $v="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Xw=class t{constructor(e,n,i,r,o,s,a,c,u,d,f=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.oi=o,this.window=s,this.document=a,this._i=u,this.ai=d,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=m=>Promise.resolve(),!t.D())throw new F(P.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bw(this,r),this.Ti=n+"main",this.serializer=new Bf(c),this.Ei=new Mr(this.Ti,this.ui,new Zw(this.serializer)),this.Qr=new Fw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Mk(this.serializer),this.$r=new Sw,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&rt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(P.FAILED_PRECONDITION,$v);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new hn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>T(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>T(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>T(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Ur(e))return L("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return L("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Tl(e).get("owner").next(n=>M.resolve(this.Si(n)))}bi(e){return yf(e).delete(this.clientId)}Di(){return T(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=Dt(n,"clientMetadata");return i.U().next(r=>{let o=this.vi(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return M.forEach(s,a=>i.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?M.resolve(!0):Tl(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new F(P.FAILED_PRECONDITION,$v);return!1}}return!(!this.networkEnabled||!this.inForeground)||yf(e).U().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&L("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return T(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Fl(e,hn.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>yf(e).U().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Gf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ow(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return $f.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,i){L("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",o=function(c){return c===16?nq:c===15?VM:c===14?LM:c===13?FM:c===12?tq:c===11?OM:void G()}(this.ui),s;return this.Ei.runTransaction(e,r,o,a=>(s=new Fl(a,this.kr?this.kr.next():hn.oe),n==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw rt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new F(P.FAILED_PRECONDITION,MM);return i(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Tl(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new F(P.FAILED_PRECONDITION,$v)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tl(e).put("owner",n)}static D(){return Mr.D()}yi(e){let n=Tl(e);return n.get("owner").next(i=>this.Si(i)?(L("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Ci(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(rt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Tm()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return L("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return rt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){rt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Tl(t){return Dt(t,"owner")}function yf(t){return Dt(t,"clientMetadata")}function eI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Jw=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=de(),r=de();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var eE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Zf=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Tm()?8:kM(pc())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new eE;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(la()<=Gn.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",ua(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),M.resolve()):(la()<=Gn.DEBUG&&L("QueryEngine","Query:",ua(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(la()<=Gn.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",ua(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wt(n))):M.resolve())}ji(e,n){if(UR(n))return M.resolve(null);let i=Wt(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Ff(n,null,"F"),i=Wt(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=de(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,s,c.readTime)?this.ji(e,Ff(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,i,r){return UR(n)||r.isEqual(X.min())?M.resolve(null):this.zi.getDocuments(e,i).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,i,r)?M.resolve(null):(la()<=Gn.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ua(n)),this.es(e,s,n,xM(r,-1)).next(a=>a))})}Zi(e,n){let i=new Ve(ZM(e));return n.forEach((r,o)=>{ou(e,o)&&(i=i.add(o))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(e,n,i){return la()<=Gn.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",ua(n)),this.zi.getDocumentsMatchingQuery(e,n,An.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var tE=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new qe(ue),this.rs=new pi(o=>Fo(o),iu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kf(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function kk(t,e,n,i){return new tE(t,e,n,i)}function Pk(t,e){return T(this,null,function*(){let n=H(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],c=de();for(let u of r){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(i,c).next(u=>({us:u,removedBatchIds:s,addedBatchIds:a}))})})})}function Oq(t,e){let n=H(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let f=u.batch,m=f.keys(),y=M.resolve();return m.forEach(I=>{y=y.next(()=>d.getEntry(c,I)).next(x=>{let A=u.docVersions.get(I);K(A!==null),x.version.compareTo(A)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=de();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function Nk(t){let e=H(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Fq(t,e){let n=H(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let a=[];e.targetChanges.forEach((d,f)=>{let m=r.get(f);if(!m)return;a.push(n.Qr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(o,d.addedDocuments,f)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(It.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,i)),r=r.insert(f,y),function(x,A,j){return x.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(m,y,d)&&a.push(n.Qr.updateTargetData(o,y))});let c=nn(),u=de();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(Ok(o,s,e.documentUpdates).next(d=>{c=d.cs,u=d.ls})),!i.isEqual(X.min())){let d=n.Qr.getLastRemoteSnapshotVersion(o).next(f=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(d)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.ns=r,o))}function Ok(t,e,n){let i=de(),r=de();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let s=nn();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(X.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:s,ls:r}})}function Lq(t,e){let n=H(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Sa(t,e){let n=H(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(o=>o?(r=o,M.resolve(r)):n.Qr.allocateTargetId(i).next(s=>(r=new Ca(e,s,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function Aa(t,e,n){return T(this,null,function*(){let i=H(t),r=i.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!Ur(s))throw s;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function Xf(t,e,n){let i=H(t),r=X.min(),o=de();return i.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){let f=H(c),m=f.rs.get(d);return m!==void 0?M.resolve(f.ns.get(m)):f.Qr.getTargetData(u,d)}(i,s,Wt(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>i.ts.getDocumentsMatchingQuery(s,e,n?r:X.min(),n?o:de())).next(a=>(Vk(i,YM(e),a),{documents:a,hs:o})))}function Fk(t,e){let n=H(t),i=H(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(s=>s?s.target:null))}function Lk(t,e){let n=H(t),i=n.ss.get(e)||X.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,e,xM(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(Vk(n,e,r),r))}function Vk(t,e,n){let i=t.ss.get(e)||X.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.ss.set(e,i)}function Vq(t,e,n,i){return T(this,null,function*(){let r=H(t),o=de(),s=nn();for(let u of n){let d=e.Ps(u.metadata.name);u.document&&(o=o.add(d));let f=e.Is(u);f.setReadTime(e.Ts(u.metadata.readTime)),s=s.insert(d,f)}let a=r.os.newChangeBuffer({trackRemovals:!0}),c=yield Sa(r,function(d){return Wt(Fa(Te.fromString(`__bundle__/docs/${d}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>Ok(u,a,s).next(d=>(a.apply(u),d)).next(d=>r.Qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>r.Qr.addMatchingKeys(u,o,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,d.cs,d.ls)).next(()=>d.cs)))})}function jq(i,r){return T(this,arguments,function*(t,e,n=de()){let o=yield Sa(t,Wt(XE(e.bundledQuery))),s=H(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=st(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let u=o.withResumeToken(It.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(u.targetId,u),s.Qr.updateTargetData(a,u).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function mM(t,e){return`firestore_clients_${t}_${e}`}function gM(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Hv(t,e){return`firestore_targets_${t}_${e}`}var Jf=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Es(e,n,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new F(r.error.code,r.error.message))),s?new t(e,n,r.state,o):(rt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},kl=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Es(e,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new F(i.error.code,i.error.message))),o?new t(e,i.state,r):(rt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ep=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=YE();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=PM(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new t(e,o):(rt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},nE=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(rt("SharedClientState",`Failed to parse online state: ${e}`),null)}},Ql=class{constructor(){this.activeTargetIds=YE()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Pl=class{constructor(e,n,i,r,o){this.window=e,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new qe(ue),this.started=!1,this.ys=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=mM(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Ql),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return T(this,null,function*(){let e=yield this.syncEngine.Bi();for(let i of e){if(i===this.Vs)continue;let r=this.getItem(mM(this.persistenceKey,i));if(r){let o=ep.Es(i,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let i=this.xs(n);i&&this.Os(i)}for(let i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,i){this.Ls(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Hv(this.persistenceKey,e));if(i){let r=kl.Es(e,i);r&&(n=r.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hv(this.persistenceKey,e))}updateQueryState(e,n,i){this.qs(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return L("SharedClientState","READ",e,n),n}setItem(e,n){L("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){L("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(L("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>T(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let i=this.$s(n.key);return this.Us(i,null)}{let i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){let i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){let i=function(o){let s=hn.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){rt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);i!==hn.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){let i=this.Js(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,i){let r=new Jf(this.currentUser,e,n,i),o=gM(this.persistenceKey,this.currentUser,e);this.setItem(o,r.ds())}Bs(e){let n=gM(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,i){let r=Hv(this.persistenceKey,e),o=new kl(e,n,i);this.setItem(r,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let i=this.$s(e);return ep.Es(i,n)}Gs(e,n){let i=this.Ds.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Jf.Es(new ht(o),r,n)}js(e,n){let i=this.Cs.exec(e),r=Number(i[1]);return kl.Es(r,n)}xs(e){return nE.Es(e)}Js(e){return JSON.parse(e)}zs(e){return T(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);L("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let i=n?this.ps.insert(e,n):this.ps.remove(e),r=this.Ns(this.ps),o=this.Ns(i),s=[],a=[];return o.forEach(c=>{r.has(c)||s.push(c)}),r.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=YE();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},tp=class{constructor(){this.no=new Ql,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Ql,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var iE=class{io(e){}shutdown(){}};var np=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var _f=null;function qv(){return _f===null?_f=function(){return 268435456+Math.round(2147483648*Math.random())}():_f++,"0x"+_f.toString(16)}var Bq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var rE=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Ft="WebChannelConnection",oE=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${r}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Do(){return!1}Co(n,i,r,o,s){let a=qv(),c=this.vo(n,i.toUriEncodedString());L("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,o,s),this.Mo(n,c,u,r).then(d=>(L("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Sn("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",r),d})}xo(n,i,r,o,s,a){return this.Co(n,i,r,o,s)}Fo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}vo(n,i){let r=Bq[n];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,i,r){let o=qv();return new Promise((s,a)=>{let c=new Ov;c.setWithCredentials(!0),c.listenOnce(Lv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Il.NO_ERROR:let d=c.getResponseJson();L(Ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Il.TIMEOUT:L(Ft,`RPC '${e}' ${o} timed out`),a(new F(P.DEADLINE_EXCEEDED,"Request time out"));break;case Il.HTTP_ERROR:let f=c.getStatus();if(L(Ft,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let I=function(A){let j=A.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(j)>=0?j:P.UNKNOWN}(y.status);a(new F(I,y.message))}else a(new F(P.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new F(P.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{L(Ft,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(r);L(Ft,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",u,i,15)})}Oo(e,n,i){let r=qv(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Bv(),a=jv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new Fv({})),this.Fo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let d=o.join("");L(Ft,`Creating RPC '${e}' stream ${r}: ${d}`,c);let f=s.createWebChannel(d,c),m=!1,y=!1,I=new rE({lo:A=>{y?L(Ft,`Not sending because RPC '${e}' stream ${r} is closed:`,A):(m||(L(Ft,`Opening RPC '${e}' stream ${r} transport.`),f.open(),m=!0),L(Ft,`RPC '${e}' stream ${r} sending:`,A),f.send(A))},ho:()=>f.close()}),x=(A,j,q)=>{A.listen(j,V=>{try{q(V)}catch(W){setTimeout(()=>{throw W},0)}})};return x(f,ra.EventType.OPEN,()=>{y||(L(Ft,`RPC '${e}' stream ${r} transport opened.`),I.mo())}),x(f,ra.EventType.CLOSE,()=>{y||(y=!0,L(Ft,`RPC '${e}' stream ${r} transport closed`),I.po())}),x(f,ra.EventType.ERROR,A=>{y||(y=!0,Sn(Ft,`RPC '${e}' stream ${r} transport errored:`,A),I.po(new F(P.UNAVAILABLE,"The operation could not be completed")))}),x(f,ra.EventType.MESSAGE,A=>{var j;if(!y){let q=A.data[0];K(!!q);let V=q,W=V.error||((j=V[0])===null||j===void 0?void 0:j.error);if(W){L(Ft,`RPC '${e}' stream ${r} received error:`,W);let ie=W.status,J=function(w){let D=ut[w];if(D!==void 0)return dk(D)}(ie),E=W.message;J===void 0&&(J=P.INTERNAL,E="Unknown error status: "+ie+" with message "+W.message),y=!0,I.po(new F(J,E)),f.close()}else L(Ft,`RPC '${e}' stream ${r} received:`,q),I.yo(q)}}),x(a,Vv.STAT_EVENT,A=>{A.stat===pf.PROXY?L(Ft,`RPC '${e}' stream ${r} detected buffering proxy`):A.stat===pf.NOPROXY&&L(Ft,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{I.fo()},0),I}};function jk(){return typeof window<"u"?window:null}function Df(){return typeof document<"u"?document:null}function su(t){return new Iw(t,!0)}var Yl=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=i,this.Lo=r,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,n-i);r>0&&L("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var ip=class{constructor(e,n,i,r,o,s,a,c){this.oi=e,this.Go=i,this.zo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Yl(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return T(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return T(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return T(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(rt(n.toString()),rt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===n&&this.u_(i,r)},i=>{e(()=>{let r=new F(P.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,n){let i=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>T(this,null,function*(){this.state=0,this.start()}))}c_(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},sE=class extends ip{constructor(e,n,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=bq(this.serializer,e),i=function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?st(s.readTime):X.min()}(e);return this.listener.h_(n,i)}P_(e){let n={};n.database=Cw(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=Nf(c)?{documents:vk(o,c)}:{query:wk(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=fk(o,s.resumeToken);let u=Dw(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(X.min())>0){a.readTime=ba(o,s.snapshotVersion.toTimestamp());let u=Dw(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let i=Tq(this.serializer,e);i&&(n.labels=i),this.i_(n)}I_(e){let n={};n.database=Cw(this.serializer),n.removeTarget=e,this.i_(n)}},aE=class extends ip{constructor(e,n,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=Cq(e.writeResults,e.commitTime),i=st(e.commitTime);return this.listener.A_(i,n)}return K(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Cw(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>Gl(this.serializer,i))};this.i_(n)}};var cE=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new F(P.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,bw(n,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(P.UNKNOWN,o.toString())})}xo(e,n,i,r,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,bw(n,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(P.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},lE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(rt(n),this.y_=!1):L("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var uE=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{i.enqueueAndForget(()=>T(this,null,function*(){$r(this)&&(L("RemoteStore","Restarting streams for network reachability change."),yield function(c){return T(this,null,function*(){let u=H(c);u.M_.add(4),yield La(u),u.N_.set("Unknown"),u.M_.delete(4),yield au(u)})}(this))}))}),this.N_=new lE(i,r)}};function au(t){return T(this,null,function*(){if($r(t))for(let e of t.x_)yield e(!0)})}function La(t){return T(this,null,function*(){for(let e of t.x_)yield e(!1)})}function Ip(t,e){let n=H(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),iI(n)?nI(n):ja(n).Xo()&&tI(n,e))}function xa(t,e){let n=H(t),i=ja(n);n.F_.delete(e),i.Xo()&&Bk(n,e),n.F_.size===0&&(i.Xo()?i.n_():$r(n)&&n.N_.set("Unknown"))}function tI(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ja(t).P_(e)}function Bk(t,e){t.L_.xe(e),ja(t).I_(e)}function nI(t){t.L_=new Ew({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ja(t).start(),t.N_.w_()}function iI(t){return $r(t)&&!ja(t).Zo()&&t.F_.size>0}function $r(t){return H(t).M_.size===0}function Uk(t){t.L_=void 0}function Uq(t){return T(this,null,function*(){t.N_.set("Online")})}function $q(t){return T(this,null,function*(){t.F_.forEach((e,n)=>{tI(t,e)})})}function Hq(t,e){return T(this,null,function*(){Uk(t),iI(t)?(t.N_.D_(e),nI(t)):t.N_.set("Unknown")})}function qq(t,e,n){return T(this,null,function*(){if(t.N_.set("Online"),e instanceof Vf&&e.state===2&&e.cause)try{yield function(r,o){return T(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.F_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.F_.delete(a),r.L_.removeTarget(a))})}(t,e)}catch(i){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield rp(t,i)}else if(e instanceof ya?t.L_.Ke(e):e instanceof Lf?t.L_.He(e):t.L_.We(e),!n.isEqual(X.min()))try{let i=yield Nk(t.localStore);n.compareTo(i)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.F_.get(u);d&&o.F_.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.F_.get(c);if(!d)return;o.F_.set(c,d.withResumeToken(It.EMPTY_BYTE_STRING,d.snapshotVersion)),Bk(o,c);let f=new Ca(d.target,c,u,d.sequenceNumber);tI(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){L("RemoteStore","Failed to raise snapshot:",i),yield rp(t,i)}})}function rp(t,e,n){return T(this,null,function*(){if(!Ur(e))throw e;t.M_.add(1),yield La(t),t.N_.set("Offline"),n||(n=()=>Nk(t.localStore)),t.asyncQueue.enqueueRetryable(()=>T(this,null,function*(){L("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield au(t)}))})}function $k(t,e){return e().catch(n=>rp(t,n,e))}function Va(t){return T(this,null,function*(){let e=H(t),n=jr(e),i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;zq(e);)try{let r=yield Lq(e.localStore,i);if(r===null){e.v_.length===0&&n.n_();break}i=r.batchId,Gq(e,r)}catch(r){yield rp(e,r)}Hk(e)&&qk(e)})}function zq(t){return $r(t)&&t.v_.length<10}function Gq(t,e){t.v_.push(e);let n=jr(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function Hk(t){return $r(t)&&!jr(t).Zo()&&t.v_.length>0}function qk(t){jr(t).start()}function Wq(t){return T(this,null,function*(){jr(t).V_()})}function Kq(t){return T(this,null,function*(){let e=jr(t);for(let n of t.v_)e.d_(n.mutations)})}function Qq(t,e,n){return T(this,null,function*(){let i=t.v_.shift(),r=_w.from(i,e,n);yield $k(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield Va(t)})}function Yq(t,e){return T(this,null,function*(){e&&jr(t).E_&&(yield function(i,r){return T(this,null,function*(){if(function(s){return uk(s)&&s!==P.ABORTED}(r.code)){let o=i.v_.shift();jr(i).t_(),yield $k(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Va(i)}})}(t,e)),Hk(t)&&qk(t)})}function yM(t,e){return T(this,null,function*(){let n=H(t);n.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");let i=$r(n);n.M_.add(3),yield La(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield au(n)})}function dE(t,e){return T(this,null,function*(){let n=H(t);e?(n.M_.delete(2),yield au(n)):e||(n.M_.add(2),yield La(n),n.N_.set("Unknown"))})}function ja(t){return t.B_||(t.B_=function(n,i,r){let o=H(n);return o.f_(),new sE(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:Uq.bind(null,t),To:$q.bind(null,t),Ao:Hq.bind(null,t),h_:qq.bind(null,t)}),t.x_.push(e=>T(this,null,function*(){e?(t.B_.t_(),iI(t)?nI(t):t.N_.set("Unknown")):(yield t.B_.stop(),Uk(t))}))),t.B_}function jr(t){return t.k_||(t.k_=function(n,i,r){let o=H(n);return o.f_(),new aE(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:Wq.bind(null,t),Ao:Yq.bind(null,t),R_:Kq.bind(null,t),A_:Qq.bind(null,t)}),t.x_.push(e=>T(this,null,function*(){e?(t.k_.t_(),yield Va(t)):(yield t.k_.stop(),t.v_.length>0&&(L("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var hE=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new ft,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let s=Date.now()+i,a=new t(e,n,s,r,o);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ba(t,e){if(rt("AsyncQueue",`${e}: ${t}`),Ur(t))return new F(P.UNAVAILABLE,`${e}: ${t}`);throw t}var op=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||$.comparator(n.key,i.key):(n,i)=>$.comparator(n.key,i.key),this.keyedMap=Sl(),this.sortedSet=new qe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var sp=class{constructor(){this.q_=new qe($.comparator)}track(e){let n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):G():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}},Ra=class t{constructor(e,n,i,r,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,op.emptySet(n),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var fE=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},pE=class{constructor(){this.queries=new pi(e=>QM(e),ru),this.onlineState="Unknown",this.z_=new Set}};function rI(t,e){return T(this,null,function*(){let n=H(t),i=3,r=e.query,o=n.queries.get(r);o?!o.W_()&&e.G_()&&(i=2):(o=new fE,i=e.G_()?0:1);try{switch(i){case 0:o.K_=yield n.onListen(r,!0);break;case 1:o.K_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(s){let a=Ba(s,`Initialization of query '${ua(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&sI(n)})}function oI(t,e){return T(this,null,function*(){let n=H(t),i=e.query,r=3,o=n.queries.get(i);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?r=e.G_()?0:1:!o.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function Zq(t,e){let n=H(t),i=!1;for(let r of e){let o=r.query,s=n.queries.get(o);if(s){for(let a of s.U_)a.H_(r)&&(i=!0);s.K_=r}}i&&sI(n)}function Xq(t,e,n){let i=H(t),r=i.queries.get(e);if(r)for(let o of r.U_)o.onError(n);i.queries.delete(e)}function sI(t){t.z_.forEach(e=>{e.next()})}var mE,_M;(_M=mE||(mE={})).J_="default",_M.Cache="cache";var Zl=class{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Ra(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==mE.Cache}};var gE=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var ap=class{constructor(e){this.serializer=e}Ps(e){return ui(this.serializer,e)}Is(e){return e.metadata.exists?_k(this.serializer,e.document,!1):pt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return st(e)}},yE=class{constructor(e,n,i){this.oa=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zk(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let i=Te.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,i=new ap(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.Ps(r.metadata.name);for(let s of r.metadata.queries){let a=(n.get(s)||de()).add(o);n.set(s,a)}}return n}complete(){return T(this,null,function*(){let e=yield Vq(this.localStore,new ap(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let i of this.queries)yield jq(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function zk(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var cp=class{constructor(e){this.key=e}},lp=class{constructor(e){this.key=e}},up=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=de(),this.mutatedKeys=de(),this.Ia=ZM(e),this.Ta=new op(this.Ia)}get Ea(){return this.la}da(e,n){let i=n?n.Aa:new sp,r=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,s=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,f)=>{let m=r.get(d),y=ou(this.query,f)?f:null,I=!!m&&this.mutatedKeys.has(m.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;m&&y?m.data.isEqual(y.data)?I!==x&&(i.track({type:3,doc:y}),A=!0):this.Ra(m,y)||(i.track({type:2,doc:y}),A=!0,(c&&this.Ia(y,c)>0||u&&this.Ia(y,u)<0)&&(a=!0)):!m&&y?(i.track({type:0,doc:y}),A=!0):m&&!y&&(i.track({type:1,doc:m}),A=!0,(c||u)&&(a=!0)),A&&(y?(s=s.add(y),o=x?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),i.track({type:1,doc:d})}return{Ta:s,Aa:i,Xi:a,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((d,f)=>function(y,I){let x=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return x(y)-x(I)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(i),r=r!=null&&r;let a=n&&!r?this.ma():[],c=this.Pa.size===0&&this.current&&!r?1:0,u=c!==this.ha;return this.ha=c,s.length!==0||u?{snapshot:new Ra(this.query,e.Ta,o,s,e.mutatedKeys,c===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new sp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=de(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new lp(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new cp(i))}),n}pa(e){this.la=e.hs,this.Pa=de();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Ra.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},_E=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},vE=class{constructor(e){this.key=e,this.wa=!1}},wE=class{constructor(e,n,i,r,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new pi(a=>QM(a),ru),this.Da=new Map,this.Ca=new Set,this.va=new qe($.comparator),this.Fa=new Map,this.Ma=new Kl,this.xa={},this.Oa=new Map,this.Na=Ta.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function Jq(t,e,n=!0){return T(this,null,function*(){let i=Dp(t),r,o=i.ba.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ya()):r=yield Gk(i,e,n,!0),r})}function ez(t,e){return T(this,null,function*(){let n=Dp(t);yield Gk(n,e,!0,!1)})}function Gk(t,e,n,i){return T(this,null,function*(){let r=yield Sa(t.localStore,Wt(e)),o=r.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return i&&(a=yield aI(t,e,o,s==="current",r.resumeToken)),t.isPrimaryClient&&n&&Ip(t.remoteStore,r),a})}function aI(t,e,n,i,r){return T(this,null,function*(){t.Ba=(f,m,y)=>function(x,A,j,q){return T(this,null,function*(){let V=A.view.da(j);V.Xi&&(V=yield Xf(x.localStore,A.query,!1).then(({documents:E})=>A.view.da(E,V)));let W=q&&q.targetChanges.get(A.targetId),ie=q&&q.targetMismatches.get(A.targetId)!=null,J=A.view.applyChanges(V,x.isPrimaryClient,W,ie);return EE(x,A.targetId,J.fa),J.snapshot})}(t,f,m,y);let o=yield Xf(t.localStore,e,!0),s=new up(e,o.hs),a=s.da(o.documents),c=ql.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=s.applyChanges(a,t.isPrimaryClient,c);EE(t,n,u.fa);let d=new _E(e,n,s);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot})}function tz(t,e,n){return T(this,null,function*(){let i=H(t),r=i.ba.get(e),o=i.Da.get(r.targetId);if(o.length>1)return i.Da.set(r.targetId,o.filter(s=>!ru(s,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Aa(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&xa(i.remoteStore,r.targetId),Ma(i,r.targetId)}).catch(Br))):(Ma(i,r.targetId),yield Aa(i.localStore,r.targetId,!0))})}function nz(t,e){return T(this,null,function*(){let n=H(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),xa(n.remoteStore,i.targetId))})}function iz(t,e,n){return T(this,null,function*(){let i=dI(t);try{let r=yield function(s,a){let c=H(s),u=Qe.now(),d=a.reduce((y,I)=>y.add(I.key),de()),f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=nn(),x=de();return c.os.getEntries(y,d).next(A=>{I=A,I.forEach((j,q)=>{q.isValidDocument()||(x=x.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,I)).next(A=>{f=A;let j=[];for(let q of a){let V=yq(q,f.get(q.key).overlayedDocument);V!=null&&j.push(new Hn(q.key,V,$M(V.value.mapValue),tt.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,j,a)}).next(A=>{m=A;let j=A.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(y,A.batchId,j)})}).then(()=>({batchId:m.batchId,changes:JM(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,c){let u=s.xa[s.currentUser.toKey()];u||(u=new qe(ue)),u=u.insert(a,c),s.xa[s.currentUser.toKey()]=u}(i,r.batchId,n),yield Wi(i,r.changes),yield Va(i.remoteStore)}catch(r){let o=Ba(r,"Failed to persist write");n.reject(o)}})}function Wk(t,e){return T(this,null,function*(){let n=H(t);try{let i=yield Fq(n.localStore,e);e.targetChanges.forEach((r,o)=>{let s=n.Fa.get(o);s&&(K(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.wa=!0:r.modifiedDocuments.size>0?K(s.wa):r.removedDocuments.size>0&&(K(s.wa),s.wa=!1))}),yield Wi(n,i,e)}catch(i){yield Br(i)}})}function vM(t,e,n){let i=H(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&r.push(a.snapshot)}),function(s,a){let c=H(s);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let m of f.U_)m.j_(a)&&(u=!0)}),u&&sI(c)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function rz(t,e,n){return T(this,null,function*(){let i=H(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Fa.get(e),o=r&&r.key;if(o){let s=new qe($.comparator);s=s.insert(o,pt.newNoDocument(o,X.min()));let a=de().add(o),c=new Hl(X.min(),new Map,new qe(ue),s,a);yield Wk(i,c),i.va=i.va.remove(o),i.Fa.delete(e),uI(i)}else yield Aa(i.localStore,e,!1).then(()=>Ma(i,e,n)).catch(Br)})}function oz(t,e){return T(this,null,function*(){let n=H(t),i=e.batch.batchId;try{let r=yield Oq(n.localStore,e);lI(n,i,null),cI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Wi(n,r)}catch(r){yield Br(r)}})}function sz(t,e,n){return T(this,null,function*(){let i=H(t);try{let r=yield function(s,a){let c=H(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(K(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(i.localStore,e);lI(i,e,n),cI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield Wi(i,r)}catch(r){yield Br(r)}})}function az(t,e){return T(this,null,function*(){let n=H(t);$r(n.remoteStore)||L("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let a=H(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(i===-1)return void e.resolve();let r=n.Oa.get(i)||[];r.push(e),n.Oa.set(i,r)}catch(i){let r=Ba(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function cI(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function lI(t,e,n){let i=H(t),r=i.xa[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function Ma(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(i=>{t.Ma.containsKey(i)||Kk(t,i)})}function Kk(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(xa(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),uI(t))}function EE(t,e,n){for(let i of n)i instanceof cp?(t.Ma.addReference(i.key,e),cz(t,i)):i instanceof lp?(L("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||Kk(t,i.key)):G()}function cz(t,e){let n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(L("SyncEngine","New document in limbo: "+n),t.Ca.add(i),uI(t))}function uI(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new $(Te.fromString(e)),i=t.Na.next();t.Fa.set(i,new vE(n)),t.va=t.va.insert(n,i),Ip(t.remoteStore,new Ca(Wt(Fa(n.path)),i,"TargetPurposeLimboResolution",hn.oe))}}function Wi(t,e,n){return T(this,null,function*(){let i=H(t),r=[],o=[],s=[];i.ba.isEmpty()||(i.ba.forEach((a,c)=>{s.push(i.Ba(c,e,n).then(u=>{if((u||n)&&i.isPrimaryClient){let d=u&&!u.fromCache;i.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){r.push(u);let d=Jw.Ki(c.targetId,u);o.push(d)}}))}),yield Promise.all(s),i.Sa.h_(r),yield function(c,u){return T(this,null,function*(){let d=H(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(u,m=>M.forEach(m.qi,y=>d.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>M.forEach(m.Qi,y=>d.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!Ur(f))throw f;L("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let m=f.targetId;if(!f.fromCache){let y=d.ns.get(m),I=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(I);d.ns=d.ns.insert(m,x)}}})}(i.localStore,o))})}function lz(t,e){return T(this,null,function*(){let n=H(t);if(!n.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());let i=yield Pk(n.localStore,e);n.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(c=>{c.reject(new F(P.CANCELLED,s))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Wi(n,i.us)}})}function uz(t,e){let n=H(t),i=n.Fa.get(e);if(i&&i.wa)return de().add(i.key);{let r=de(),o=n.Da.get(e);if(!o)return r;for(let s of o){let a=n.ba.get(s);r=r.unionWith(a.view.Ea)}return r}}function dz(t,e){return T(this,null,function*(){let n=H(t),i=yield Xf(n.localStore,e.query,!0),r=e.view.pa(i);return n.isPrimaryClient&&EE(n,e.targetId,r.fa),r})}function hz(t,e){return T(this,null,function*(){let n=H(t);return Lk(n.localStore,e).then(i=>Wi(n,i))})}function fz(t,e,n,i){return T(this,null,function*(){let r=H(t),o=yield function(a,c){let u=H(a),d=H(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.vn(f,c).next(m=>m?u.localDocuments.getDocuments(f,m):M.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?yield Va(r.remoteStore):n==="acknowledged"||n==="rejected"?(lI(r,e,i||null),cI(r,e),function(a,c){H(H(a).mutationQueue).Mn(c)}(r.localStore,e)):G(),yield Wi(r,o)):L("SyncEngine","Cannot apply mutation batch with id: "+e)})}function pz(t,e){return T(this,null,function*(){let n=H(t);if(Dp(n),dI(n),e===!0&&n.La!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield wM(n,i.toArray());n.La=!0,yield dE(n.remoteStore,!0);for(let o of r)Ip(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let i=[],r=Promise.resolve();n.Da.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(Ma(n,s),Aa(n.localStore,s,!0))),xa(n.remoteStore,s)}),yield r,yield wM(n,i),function(s){let a=H(s);a.Fa.forEach((c,u)=>{xa(a.remoteStore,u)}),a.Ma.mr(),a.Fa=new Map,a.va=new qe($.comparator)}(n),n.La=!1,yield dE(n.remoteStore,!1)}})}function wM(t,e,n){return T(this,null,function*(){let i=H(t),r=[],o=[];for(let s of e){let a,c=i.Da.get(s);if(c&&c.length!==0){a=yield Sa(i.localStore,Wt(c[0]));for(let u of c){let d=i.ba.get(u),f=yield dz(i,d);f.snapshot&&o.push(f.snapshot)}}else{let u=yield Fk(i.localStore,s);a=yield Sa(i.localStore,u),yield aI(i,Qk(u),s,!1,a.resumeToken)}r.push(a)}return i.Sa.h_(o),r})}function Qk(t){return KM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function mz(t){return function(n){return H(H(n).persistence).Bi()}(H(t).localStore)}function gz(t,e,n,i){return T(this,null,function*(){let r=H(t);if(r.La)return void L("SyncEngine","Ignoring unexpected query state notification.");let o=r.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield Lk(r.localStore,YM(o[0])),a=Hl.createSynthesizedRemoteEventForCurrentChange(e,n==="current",It.EMPTY_BYTE_STRING);yield Wi(r,s,a);break}case"rejected":yield Aa(r.localStore,e,!0),Ma(r,e,i);break;default:G()}})}function yz(t,e,n){return T(this,null,function*(){let i=Dp(t);if(i.La){for(let r of e){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){L("SyncEngine","Adding an already active target "+r);continue}let o=yield Fk(i.localStore,r),s=yield Sa(i.localStore,o);yield aI(i,Qk(o),s.targetId,!1,s.resumeToken),Ip(i.remoteStore,s)}for(let r of n)i.Da.has(r)&&(yield Aa(i.localStore,r,!1).then(()=>{xa(i.remoteStore,r),Ma(i,r)}).catch(Br))}})}function Dp(t){let e=H(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rz.bind(null,e),e.Sa.h_=Zq.bind(null,e.eventManager),e.Sa.ka=Xq.bind(null,e.eventManager),e}function dI(t){let e=H(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sz.bind(null,e),e}function _z(t,e,n){let i=H(t);(function(o,s,a){return T(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(y,I){let x=H(y),A=st(I.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",j=>x.$r.getBundleMetadata(j,I.id)).then(j=>!!j&&j.createTime.compareTo(A)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(zk(c));let u=new yE(c,o.localStore,s.serializer),d=yield s.qa();for(;d;){let m=yield u._a(d);m&&a._updateProgress(m),d=yield s.qa()}let f=yield u.complete();return yield Wi(o,f.ca,void 0),yield function(y,I){let x=H(y);return x.persistence.runTransaction("Save bundle","readwrite",A=>x.$r.saveBundleMetadata(A,I))}(o.localStore,c),a._completeWith(f.progress),Promise.resolve(f.ua)}catch(c){return Sn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var Xl=class{constructor(){this.synchronizeTabs=!1}initialize(e){return T(this,null,function*(){this.serializer=su(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return kk(this.persistence,new Zf,e.initialUser,this.serializer)}createPersistence(e){return new Qf(Yf.Hr,this.serializer)}createSharedClientState(e){return new tp}terminate(){return T(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var dp=class t extends Xl{constructor(e,n,i){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return T(this,null,function*(){yield bm(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield dI(this.Qa.syncEngine),yield Va(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return kk(this.persistence,new Zf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new Vw(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new nw(n,this.persistence);return new tw(e.asyncQueue,i)}createPersistence(e){let n=eI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new Xw(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,jk(),Df(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new tp}},IE=class t extends dp{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return T(this,null,function*(){yield bm(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof Pl&&(this.sharedClientState.syncEngine={Zs:fz.bind(null,n),Xs:gz.bind(null,n),eo:yz.bind(null,n),Bi:mz.bind(null,n),Ys:hz.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(i=>T(this,null,function*(){yield pz(this.Qa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=jk();if(!Pl.D(n))throw new F(P.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=eI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pl(n,e.asyncQueue,i,e.clientId,e.initialUser)}},Jl=class{initialize(e,n){return T(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lz.bind(null,this.syncEngine),yield dE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new pE}()}createDatastore(e){let n=su(e.databaseInfo.databaseId),i=function(o){return new oE(o)}(e.databaseInfo);return function(o,s,a,c){return new cE(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,s,a){return new uE(i,r,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>vM(this.syncEngine,n,0),function(){return np.D()?new np:new iE}())}createSyncEngine(e,n){return function(r,o,s,a,c,u,d){let f=new wE(r,o,s,a,c,u);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return T(this,null,function*(){var e;yield function(i){return T(this,null,function*(){let r=H(i);L("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield La(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function EM(t,e=10240){let n=0;return{read(){return T(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return T(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ka=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):rt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var DE=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new ft,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}getMetadata(){return T(this,null,function*(){return this.metadata.promise})}qa(){return T(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return T(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),i=Number(n);isNaN(i)&&this.ja(`length string (${n}) is not valid number`);let r=yield this.Ha(i);return new gE(JSON.parse(r),e.length+i)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return T(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return T(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return T(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var bE=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return T(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(P.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,o){return T(this,null,function*(){let s=H(r),a={documents:o.map(f=>zl(s.serializer,f))},c=yield s.xo("BatchGetDocuments",s.serializer.databaseId,Te.emptyPath(),a,o.length),u=new Map;c.forEach(f=>{let m=Dq(s.serializer,f);u.set(m.key.toString(),m)});let d=[];return o.forEach(f=>{let m=u.get(f.toString());K(!!m),d.push(m)}),d})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return T(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=$.fromPath(i);this.mutations.push(new Bl(r,this.precondition(r)))}),yield function(i,r){return T(this,null,function*(){let o=H(i),s={writes:r.map(a=>Gl(o.serializer,a))};yield o.Co("Commit",o.serializer.databaseId,Te.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw G();n=X.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new F(P.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(X.min())?tt.exists(!1):tt.updateTime(n):tt.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(X.min()))throw new F(P.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tt.updateTime(n)}return tt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var CE=class{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.Za=i.maxAttempts,this.Yo=new Yl(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>T(this,null,function*(){let e=new bE(this.datastore),n=this.tu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.nu(r)}))}).catch(i=>{this.nu(i)})}))}tu(e){try{let n=this.updateFunction(e);return!nu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!uk(n)}return!1}};var TE=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ht.UNAUTHENTICATED,this.clientId=Tf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>T(this,null,function*(){L("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(L("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(P.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ft;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=Ba(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function bf(t,e){return T(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>T(this,null,function*(){i.isEqual(r)||(yield Pk(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function SE(t,e){return T(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield hI(t);L("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>yM(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>yM(e.remoteStore,r)),t._onlineComponents=e})}function Yk(t){return t.name==="FirebaseError"?t.code===P.FAILED_PRECONDITION||t.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function hI(t){return T(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{yield bf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!Yk(n))throw n;Sn("Error using user provided cache. Falling back to memory cache: "+n),yield bf(t,new Xl)}}else L("FirestoreClient","Using default OfflineComponentProvider"),yield bf(t,new Xl);return t._offlineComponents})}function bp(t){return T(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),yield SE(t,t._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),yield SE(t,new Jl))),t._onlineComponents})}function Zk(t){return hI(t).then(e=>e.persistence)}function fI(t){return hI(t).then(e=>e.localStore)}function Xk(t){return bp(t).then(e=>e.remoteStore)}function pI(t){return bp(t).then(e=>e.syncEngine)}function vz(t){return bp(t).then(e=>e.datastore)}function Pa(t){return T(this,null,function*(){let e=yield bp(t),n=e.eventManager;return n.onListen=Jq.bind(null,e.syncEngine),n.onUnlisten=tz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ez.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nz.bind(null,e.syncEngine),n})}function wz(t){return t.asyncQueue.enqueue(()=>T(this,null,function*(){let e=yield Zk(t),n=yield Xk(t);return e.setNetworkEnabled(!0),function(r){let o=H(r);return o.M_.delete(0),au(o)}(n)}))}function Ez(t){return t.asyncQueue.enqueue(()=>T(this,null,function*(){let e=yield Zk(t),n=yield Xk(t);return e.setNetworkEnabled(!1),function(r){return T(this,null,function*(){let o=H(r);o.M_.add(0),yield La(o),o.N_.set("Offline")})}(n)}))}function Iz(t,e){let n=new ft;return t.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return function(r,o,s){return T(this,null,function*(){try{let a=yield function(u,d){let f=H(u);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,d))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new F(P.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Ba(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield fI(t),e,n)})),n.promise}function Jk(t,e,n={}){let i=new ft;return t.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return function(o,s,a,c,u){let d=new ka({next:m=>{s.enqueueAndForget(()=>oI(o,f));let y=m.docs.has(a);!y&&m.fromCache?u.reject(new F(P.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?u.reject(new F(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Zl(Fa(a.path),d,{includeMetadataChanges:!0,ra:!0});return rI(o,f)}(yield Pa(t),t.asyncQueue,e,n,i)})),i.promise}function Dz(t,e){let n=new ft;return t.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return function(r,o,s){return T(this,null,function*(){try{let a=yield Xf(r,o,!0),c=new up(o,a.hs),u=c.da(a.documents),d=c.applyChanges(u,!1);s.resolve(d.snapshot)}catch(a){let c=Ba(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield fI(t),e,n)})),n.promise}function eP(t,e,n={}){let i=new ft;return t.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return function(o,s,a,c,u){let d=new ka({next:m=>{s.enqueueAndForget(()=>oI(o,f)),m.fromCache&&c.source==="server"?u.reject(new F(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Zl(a,d,{includeMetadataChanges:!0,ra:!0});return rI(o,f)}(yield Pa(t),t.asyncQueue,e,n,i)})),i.promise}function bz(t,e){let n=new ka(e);return t.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return function(r,o){H(r).z_.add(o),o.next()}(yield Pa(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return function(r,o){H(r).z_.delete(o)}(yield Pa(t),n)}))}}function Cz(t,e,n,i){let r=function(s,a){let c;return c=typeof s=="string"?hk().encode(s):s,function(d,f){return new DE(d,f)}(function(d,f){if(d instanceof Uint8Array)return EM(d,f);if(d instanceof ArrayBuffer)return EM(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,su(e));t.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){_z(yield pI(t),r,i)}))}function Tz(t,e){return t.asyncQueue.enqueue(()=>T(this,null,function*(){return function(i,r){let o=H(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,r))}(yield fI(t),e)}))}function tP(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var IM=new Map;function mI(t,e,n){if(!n)throw new F(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gI(t,e,n,i){if(e===!0&&i===!0)throw new F(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function DM(t){if(!$.isDocumentKey(t))throw new F(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bM(t){if($.isDocumentKey(t))throw new F(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Cp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function Se(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Cp(t);throw new F(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function nP(t,e){if(e<=0)throw new F(P.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var hp=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new F(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tP((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Bo=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hp(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new zv;switch(i.type){case"firstParty":return new Qv(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new F(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=IM.get(n);i&&(L("ComponentProvider","Removing Datastore"),IM.delete(n),i.terminate())}(this),Promise.resolve()}};function Tp(t,e,n,i={}){var r;let o=(t=Se(t,Bo))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Sn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=ht.MOCK_USER;else{a=Bb(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new F(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ht(u)}t._authCredentials=new Gv(new Cf(a,c))}}var Rt=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},je=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},di=class t extends Rt{constructor(e,n,i){super(e,n,Fa(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new je(this.firestore,null,new $(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Sp(t,e,...n){if(t=Ue(t),mI("collection","path",e),t instanceof Bo){let i=Te.fromString(e,...n);return bM(i),new di(t,null,i)}{if(!(t instanceof je||t instanceof di))throw new F(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Te.fromString(e,...n));return bM(i),new di(t.firestore,null,i)}}function yI(t,e){if(t=Se(t,Bo),mI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(P.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Rt(t,null,function(i){return new $n(Te.emptyPath(),i)}(e))}function Ua(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=Tf.newId()),mI("doc","path",e),t instanceof Bo){let i=Te.fromString(e,...n);return DM(i),new je(t,null,new $(i))}{if(!(t instanceof je||t instanceof di))throw new F(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Te.fromString(e,...n));return DM(i),new je(t.firestore,t instanceof di?t.converter:null,new $(i))}}function Ap(t,e){return t=Ue(t),e=Ue(e),(t instanceof je||t instanceof di)&&(e instanceof je||e instanceof di)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function xp(t,e){return t=Ue(t),e=Ue(e),t instanceof Rt&&e instanceof Rt&&t.firestore===e.firestore&&ru(t._query,e._query)&&t.converter===e.converter}var AE=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Yl(this,"async_queue_retry"),this.hu=()=>{let n=Df();n&&L("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Df();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Df();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new ft;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return T(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Ur(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw rt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let r=hE.createAndSchedule(this,e,n,i,o=>this.Eu(o));return this._u.push(r),r}Pu(){this.au&&G()}verifyOperationInProgress(){}du(){return T(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function xE(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var RE=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new ft,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var iP=-1,Ke=class extends Bo{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new AE}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||oP(this),this._firestoreClient.terminate()}};function rP(t,e){let n=typeof t=="object"?t:er(),i=typeof t=="string"?t:e||"(default)",r=Ji(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=jb("firestore");o&&Tp(r,...o)}return r}function yt(t){return t._firestoreClient||oP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function oP(t){var e,n,i;let r=t._freezeSettings(),o=function(a,c,u,d){return new iw(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,tP(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new TE(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function _I(t,e){aP(t=Se(t,Ke));let n=yt(t);if(n._uninitializedComponentsProvider)throw new F(P.FAILED_PRECONDITION,"SDK cache is already specified.");Sn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new Jl;return sP(n,r,new dp(r,i.cacheSizeBytes,e?.forceOwnership))}function vI(t){aP(t=Se(t,Ke));let e=yt(t);if(e._uninitializedComponentsProvider)throw new F(P.FAILED_PRECONDITION,"SDK cache is already specified.");Sn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new Jl;return sP(e,i,new IE(i,n.cacheSizeBytes))}function sP(t,e,n){let i=new ft;return t.asyncQueue.enqueue(()=>T(this,null,function*(){try{yield bf(t,n),yield SE(t,e),i.resolve()}catch(r){let o=r;if(!Yk(o))throw o;Sn("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function wI(t){if(t._initialized&&!t._terminated)throw new F(P.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new ft;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{yield function(i){return T(this,null,function*(){if(!Mr.D())return Promise.resolve();let r=i+"main";yield Mr.delete(r)})}(eI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function EI(t){return function(n){let i=new ft;return n.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return az(yield pI(n),i)})),i.promise}(yt(t=Se(t,Ke)))}function II(t){return wz(yt(t=Se(t,Ke)))}function DI(t){return Ez(yt(t=Se(t,Ke)))}function bI(t,e){let n=yt(t=Se(t,Ke)),i=new RE;return Cz(n,t._databaseId,e,i),i}function CI(t,e){return Tz(yt(t=Se(t,Ke)),e).then(n=>n?new Rt(t,null,n.query):null)}function aP(t){if(t._initialized||t._terminated)throw new F(P.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var mi=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(It.fromBase64String(e))}catch(n){throw new F(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var qn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var zi=class{constructor(e){this._methodName=e}};var Uo=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}};var Sz=/^__.*__$/,ME=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Hn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lr(e,this.data,n,this.fieldTransforms)}},fp=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Hn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function cP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}var pp=class t{constructor(e,n,i,r,o,s){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return mp(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(cP(this.fu)&&Sz.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},kE=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||su(e)}Fu(e,n,i,r=!1){return new pp({fu:e,methodName:n,vu:i,path:ot.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function zo(t){let e=t._freezeSettings(),n=su(t._databaseId);return new kE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rp(t,e,n,i,r,o={}){let s=t.Fu(o.merge||o.mergeFields?2:0,e,n,r);AI("Data must be an object, but it was:",s,i);let a=dP(i,s),c,u;if(o.merge)c=new fn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let m=LE(e,f,n);if(!s.contains(m))throw new F(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);fP(d,m)||d.push(m)}c=new fn(d),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new ME(new Lt(a),c,u)}var eu=class t extends zi{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function lP(t,e,n){return new pp({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var PE=class t extends zi{_toFieldTransform(e){return new Lo(e.path,new Or)}isEqual(e){return e instanceof t}},NE=class t extends zi{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=lP(this,e,!0),i=this.Mu.map(o=>Go(o,n)),r=new Hi(i);return new Lo(e.path,r)}isEqual(e){return e instanceof t&&Sm(this.Mu,e.Mu)}},OE=class t extends zi{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=lP(this,e,!0),i=this.Mu.map(o=>Go(o,n)),r=new qi(i);return new Lo(e.path,r)}isEqual(e){return e instanceof t&&Sm(this.Mu,e.Mu)}},FE=class t extends zi{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new Fr(e.serializer,ik(e.serializer,this.xu));return new Lo(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function TI(t,e,n,i){let r=t.Fu(1,e,n);AI("Data must be an object, but it was:",r,i);let o=[],s=Lt.empty();qo(i,(c,u)=>{let d=xI(e,c,n);u=Ue(u);let f=r.Su(d);if(u instanceof eu)o.push(d);else{let m=Go(u,f);m!=null&&(o.push(d),s.set(d,m))}});let a=new fn(o);return new fp(s,a,r.fieldTransforms)}function SI(t,e,n,i,r,o){let s=t.Fu(1,e,n),a=[LE(e,i,n)],c=[r];if(o.length%2!=0)throw new F(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(LE(e,o[m])),c.push(o[m+1]);let u=[],d=Lt.empty();for(let m=a.length-1;m>=0;--m)if(!fP(u,a[m])){let y=a[m],I=c[m];I=Ue(I);let x=s.Su(y);if(I instanceof eu)u.push(y);else{let A=Go(I,x);A!=null&&(u.push(y),d.set(y,A))}}let f=new fn(u);return new fp(d,f,s.fieldTransforms)}function uP(t,e,n,i=!1){return Go(n,t.Fu(i?4:3,e))}function Go(t,e){if(hP(t=Ue(t)))return AI("Unsupported field value:",e,t),dP(t,e);if(t instanceof zi)return function(i,r){if(!cP(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let c=Go(a,r.bu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Ue(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ik(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Qe.fromDate(i);return{timestampValue:ba(r.serializer,o)}}if(i instanceof Qe){let o=new Qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ba(r.serializer,o)}}if(i instanceof Uo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof mi)return{bytesValue:fk(r.serializer,i._byteString)};if(i instanceof je){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ZE(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${Cp(i)}`)}(t,e)}function dP(t,e){let n={};return jM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qo(t,(i,r)=>{let o=Go(r,e.pu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function hP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof Uo||t instanceof mi||t instanceof je||t instanceof zi)}function AI(t,e,n){if(!hP(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=Cp(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function LE(t,e,n){if((e=Ue(e))instanceof qn)return e._internalPath;if(typeof e=="string")return xI(t,e);throw mp("Field path arguments must be of type string or ",t,!1,void 0,n)}var Az=new RegExp("[~\\*/\\[\\]]");function xI(t,e,n){if(e.search(Az)>=0)throw mp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qn(...e.split("."))._internalPath}catch{throw mp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mp(t,e,n,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new F(P.INVALID_ARGUMENT,a+t+c)}function fP(t,e){return t.some(n=>n.isEqual(e))}var $o=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new VE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Mp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},VE=class extends $o{data(){return super.data()}};function Mp(t,e){return typeof e=="string"?xI(t,e):e instanceof qn?e._internalPath:e._delegate._internalPath}function pP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var tu=class{},Ho=class extends tu{};function gi(t,e,...n){let i=[];e instanceof tu&&i.push(e),i=i.concat(n),function(o){let s=o.filter(c=>c instanceof jE).length,a=o.filter(c=>c instanceof gp).length;if(s>1||s>0&&a>0)throw new F(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var gp=class t extends Ho{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return gP(e._query,n),new Rt(e.firestore,e.converter,gw(e._query,n))}_parse(e){let n=zo(e.firestore);return function(o,s,a,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new F(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){TM(f,d);let y=[];for(let I of f)y.push(CM(c,o,I));m={arrayValue:{values:y}}}else m=CM(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||TM(f,d),m=uP(a,s,f,d==="in"||d==="not-in");return Ee.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function RI(t,e,n){let i=e,r=Mp("where",t);return gp._create(r,i,n)}var jE=class t extends tu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Ne.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let c of a)gP(s,c),s=gw(s,c)}(e._query,n),new Rt(e.firestore,e.converter,gw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var BE=class t extends Ho{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,o,s){if(r.startAt!==null)throw new F(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new F(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oo(o,s)}(e._query,this._field,this._direction);return new Rt(e.firestore,e.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new $n(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function MI(t,e="asc"){let n=e,i=Mp("orderBy",t);return BE._create(i,n)}var yp=class t extends Ho{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new Rt(e.firestore,e.converter,Ff(e._query,this._limit,this._limitType))}};function kI(t){return nP("limit",t),yp._create("limit",t,"F")}function PI(t){return nP("limitToLast",t),yp._create("limitToLast",t,"L")}var _p=class t extends Ho{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=mP(e,this.type,this._docOrFields,this._inclusive);return new Rt(e.firestore,e.converter,function(r,o){return new $n(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}};function NI(...t){return _p._create("startAt",t,!0)}function OI(...t){return _p._create("startAfter",t,!1)}var vp=class t extends Ho{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=mP(e,this.type,this._docOrFields,this._inclusive);return new Rt(e.firestore,e.converter,function(r,o){return new $n(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}};function FI(...t){return vp._create("endBefore",t,!1)}function LI(...t){return vp._create("endAt",t,!0)}function mP(t,e,n,i){if(n[0]=Ue(n[0]),n[0]instanceof $o)return function(o,s,a,c,u){if(!c)throw new F(P.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of ga(o))if(f.field.isKeyField())d.push(No(s,c.key));else{let m=c.data.field(f.field);if(Ep(m))throw new F(P.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=f.field.canonicalString();throw new F(P.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(m)}return new fi(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=zo(t.firestore);return function(s,a,c,u,d,f){let m=s.explicitOrderBy;if(d.length>m.length)throw new F(P.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let I=0;I<d.length;I++){let x=d[I];if(m[I].field.isKeyField()){if(typeof x!="string")throw new F(P.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!QE(s)&&x.indexOf("/")!==-1)throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);let A=s.path.child(Te.fromString(x));if(!$.isDocumentKey(A))throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);let j=new $(A);y.push(No(a,j))}else{let A=uP(c,u,x);y.push(A)}}return new fi(y,f)}(t._query,t.firestore._databaseId,r,e,n,i)}}function CM(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new F(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QE(e)&&n.indexOf("/")!==-1)throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Te.fromString(n));if(!$.isDocumentKey(i))throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return No(t,new $(i))}if(n instanceof je)return No(t,n._key);throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cp(n)}.`)}function TM(t,e){if(!Array.isArray(t)||t.length===0)throw new F(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gP(t,e){let n=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Na=class{convertValue(e,n="none"){switch(Po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw G()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return qo(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new Uo(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=WE(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ll(e));default:return null}}convertTimestamp(e){let n=$i(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Te.fromString(e);K(bk(i));let r=new Pr(i.get(1),i.get(3)),o=new $(i.popFirst(5));return r.isEqual(n)||rt(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function kp(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var UE=class extends Na{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,n)}};var Ui=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xn=class extends $o{constructor(e,n,i,r,o,s){super(e,n,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new xr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(Mp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},xr=class extends xn{data(e={}){return super.data(e)}},zn=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ui(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new xr(this._firestore,this._userDataWriter,i.key,i,new Ui(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let c=new xr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ui(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new xr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ui(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:xz(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function xz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}function Pp(t,e){return t instanceof xn&&e instanceof xn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof zn&&e instanceof zn&&t._firestore===e._firestore&&xp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function VI(t){t=Se(t,je);let e=Se(t.firestore,Ke);return Jk(yt(e),t._key).then(n=>WI(e,t,n))}var Gi=class extends Na{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,n)}};function jI(t){t=Se(t,je);let e=Se(t.firestore,Ke),n=yt(e),i=new Gi(e);return Iz(n,t._key).then(r=>new xn(e,i,t._key,r,new Ui(r!==null&&r.hasLocalMutations,!0),t.converter))}function BI(t){t=Se(t,je);let e=Se(t.firestore,Ke);return Jk(yt(e),t._key,{source:"server"}).then(n=>WI(e,t,n))}function UI(t){t=Se(t,Rt);let e=Se(t.firestore,Ke),n=yt(e),i=new Gi(e);return pP(t._query),eP(n,t._query).then(r=>new zn(e,i,t,r))}function $I(t){t=Se(t,Rt);let e=Se(t.firestore,Ke),n=yt(e),i=new Gi(e);return Dz(n,t._query).then(r=>new zn(e,i,t,r))}function HI(t){t=Se(t,Rt);let e=Se(t.firestore,Ke),n=yt(e),i=new Gi(e);return eP(n,t._query,{source:"server"}).then(r=>new zn(e,i,t,r))}function Np(t,e,n){t=Se(t,je);let i=Se(t.firestore,Ke),r=kp(t.converter,e,n);return $a(i,[Rp(zo(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,tt.none())])}function Op(t,e,n,...i){t=Se(t,je);let r=Se(t.firestore,Ke),o=zo(r),s;return s=typeof(e=Ue(e))=="string"||e instanceof qn?SI(o,"updateDoc",t._key,e,n,i):TI(o,"updateDoc",t._key,e),$a(r,[s.toMutation(t._key,tt.exists(!0))])}function qI(t){return $a(Se(t.firestore,Ke),[new Vr(t._key,tt.none())])}function zI(t,e){let n=Se(t.firestore,Ke),i=Ua(t),r=kp(t.converter,e);return $a(n,[Rp(zo(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,tt.exists(!1))]).then(()=>i)}function Fp(t,...e){var n,i,r;t=Ue(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||xE(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(xE(e[s])){let f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),e[s+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let c,u,d;if(t instanceof je)u=Se(t.firestore,Ke),d=Fa(t._key.path),c={next:f=>{e[s]&&e[s](WI(u,t,f))},error:e[s+1],complete:e[s+2]};else{let f=Se(t,Rt);u=Se(f.firestore,Ke),d=f._query;let m=new Gi(u);c={next:y=>{e[s]&&e[s](new zn(u,m,f,y))},error:e[s+1],complete:e[s+2]},pP(t._query)}return function(m,y,I,x){let A=new ka(x),j=new Zl(y,A,I);return m.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return rI(yield Pa(m),j)})),()=>{A.$a(),m.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return oI(yield Pa(m),j)}))}}(yt(u),d,a,c)}function GI(t,e){return bz(yt(t=Se(t,Ke)),xE(e)?e:{next:e})}function $a(t,e){return function(i,r){let o=new ft;return i.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return iz(yield pI(i),r,o)})),o.promise}(yt(t),e)}function WI(t,e,n){let i=n.docs.get(e._key),r=new Gi(t);return new xn(t,r,e._key,i,new Ui(n.hasPendingWrites,n.fromCache),e.converter)}var Rz={maxAttempts:5};var wp=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=zo(e)}set(e,n,i){this._verifyNotCommitted();let r=Sr(e,this._firestore),o=kp(r.converter,n,i),s=Rp(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,tt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let o=Sr(e,this._firestore),s;return s=typeof(n=Ue(n))=="string"||n instanceof qn?SI(this._dataReader,"WriteBatch.update",o._key,n,i,r):TI(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,tt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Sr(e,this._firestore);return this._mutations=this._mutations.concat(new Vr(n._key,tt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Sr(t,e){if((t=Ue(t)).firestore!==e)throw new F(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var $E=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=zo(n)}get(n){let i=Sr(n,this._firestore),r=new UE(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return G();let s=o[0];if(s.isFoundDocument())return new $o(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new $o(this._firestore,r,i._key,null,i.converter);throw G()})}set(n,i,r){let o=Sr(n,this._firestore),s=kp(o.converter,i,r),a=Rp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(n,i,r,...o){let s=Sr(n,this._firestore),a;return a=typeof(i=Ue(i))=="string"||i instanceof qn?SI(this._dataReader,"Transaction.update",s._key,i,r,o):TI(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(n){let i=Sr(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Sr(e,this._firestore),i=new Gi(this._firestore);return super.get(e).then(r=>new xn(this._firestore,i,n._key,r._document,new Ui(!1,!1),n.converter))}};function KI(t,e,n){t=Se(t,Ke);let i=Object.assign(Object.assign({},Rz),n);return function(o){if(o.maxAttempts<1)throw new F(P.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){let c=new ft;return o.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){let u=yield vz(o);new CE(o.asyncQueue,u,a,s,c).Xa()})),c.promise}(yt(t),r=>e(new $E(t,r)),i)}function QI(){return new eu("deleteField")}function YI(){return new PE("serverTimestamp")}function ZI(...t){return new NE("arrayUnion",t)}function XI(...t){return new OE("arrayRemove",t)}function JI(t){return new FE("increment",t)}(function(e,n=!0){(function(r){Oa=r})(Hb),Mn(new on("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new Ke(new Wv(i.getProvider("auth-internal")),new Zv(i.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new F(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pr(u.options.projectId,d)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ze(SR,"4.6.3",e),ze(SR,"4.6.3","esm2017")})();var Mz="@firebase/firestore-compat",kz="0.3.32";function oD(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function yP(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function _P(){if(!BM())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Lp=class t{constructor(e){this._delegate=e}static fromBase64String(e){return _P(),new t(mi.fromBase64String(e))}static fromUint8Array(e){return yP(),new t(mi.fromUint8Array(e))}toBase64(){return _P(),this._delegate.toBase64()}toUint8Array(){return yP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function eD(t){return Pz(t,["next","error","complete"])}function Pz(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var tD=class{enableIndexedDbPersistence(e,n){return _I(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return vI(e._delegate)}clearIndexedDbPersistence(e){return wI(e._delegate)}},Vp=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Pr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Sn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){Tp(this._delegate,e,n,i)}enableNetwork(){return II(this._delegate)}disableNetwork(){return DI(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,gI("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return EI(this._delegate)}onSnapshotsInSync(e){return GI(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new za(this,Sp(this._delegate,e))}catch(n){throw Kt(n,"collection()","Firestore.collection()")}}doc(e){try{return new yi(this,Ua(this._delegate,e))}catch(n){throw Kt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yo(this,yI(this._delegate,e))}catch(n){throw Kt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return KI(this._delegate,n=>e(new jp(this,n)))}batch(){return yt(this._delegate),new Bp(new wp(this._delegate,e=>$a(this._delegate,e)))}loadBundle(e){return bI(this._delegate,e)}namedQuery(e){return CI(this._delegate,e).then(n=>n?new Yo(this,n):null)}},Ha=class extends Na{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lp(new mi(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return yi.forKey(n,this.firestore,null)}};function Nz(t){HE(t)}var jp=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ha(e)}get(e){let n=Wo(e);return this._delegate.get(n).then(i=>new Ko(this._firestore,new xn(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=Wo(e);return i?(oD("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=Wo(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=Wo(e);return this._delegate.delete(n),this}},Bp=class{constructor(e){this._delegate=e}set(e,n,i){let r=Wo(e);return i?(oD("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=Wo(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=Wo(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},qa=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new xr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qo(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new t(e,new Ha(e),n),r.set(n,o)),o}};qa.INSTANCES=new WeakMap;var yi=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ha(e)}static forPath(e,n,i){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new je(n._delegate,i,new $(e)))}static forKey(e,n,i){return new t(n,new je(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new za(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new za(this.firestore,Sp(this._delegate,e))}catch(n){throw Kt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ue(e),e instanceof je?Ap(this._delegate,e):!1}set(e,n){n=oD("DocumentReference.set",n);try{return n?Np(this._delegate,e,n):Np(this._delegate,e)}catch(i){throw Kt(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?Op(this._delegate,e):Op(this._delegate,e,n,...i)}catch(r){throw Kt(r,"updateDoc()","DocumentReference.update()")}}delete(){return qI(this._delegate)}onSnapshot(...e){let n=vP(e),i=wP(e,r=>new Ko(this.firestore,new xn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return Fp(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=jI(this._delegate):e?.source==="server"?n=BI(this._delegate):n=VI(this._delegate),n.then(i=>new Ko(this.firestore,new xn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(qa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Kt(t,e,n){return t.message=t.message.replace(e,n),t}function vP(t){for(let e of t)if(typeof e=="object"&&!eD(e))return e;return{}}function wP(t,e){var n,i;let r;return eD(t[0])?r=t[0]:eD(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var Ko=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new yi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Pp(this._delegate,e._delegate)}},Qo=class extends Ko{data(e){let n=this._delegate.data(e);return this._delegate._converter||SM(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Yo=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ha(e)}where(e,n,i){try{return new t(this.firestore,gi(this._delegate,RI(e,n,i)))}catch(r){throw Kt(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,gi(this._delegate,MI(e,n)))}catch(i){throw Kt(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,gi(this._delegate,kI(e)))}catch(n){throw Kt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,gi(this._delegate,PI(e)))}catch(n){throw Kt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,gi(this._delegate,NI(...e)))}catch(n){throw Kt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,gi(this._delegate,OI(...e)))}catch(n){throw Kt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,gi(this._delegate,FI(...e)))}catch(n){throw Kt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,gi(this._delegate,LI(...e)))}catch(n){throw Kt(n,"endAt()","Query.endAt()")}}isEqual(e){return xp(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=$I(this._delegate):e?.source==="server"?n=HI(this._delegate):n=UI(this._delegate),n.then(i=>new cu(this.firestore,new zn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=vP(e),i=wP(e,r=>new cu(this.firestore,new zn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return Fp(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(qa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},nD=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Qo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},cu=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Yo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new nD(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Qo(this._firestore,i))})}isEqual(e){return Pp(this._delegate,e._delegate)}},za=class t extends Yo{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new yi(this.firestore,e):null}doc(e){try{return e===void 0?new yi(this.firestore,Ua(this._delegate)):new yi(this.firestore,Ua(this._delegate,e))}catch(n){throw Kt(n,"doc()","CollectionReference.doc()")}}add(e){return zI(this._delegate,e).then(n=>new yi(this.firestore,n))}isEqual(e){return Ap(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(qa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Wo(t){return Se(t,je)}var iD=class t{constructor(...e){this._delegate=new qn(...e)}static documentId(){return new t(ot.keyField().canonicalString())}isEqual(e){return e=Ue(e),e instanceof qn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var rD=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=YI();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=QI();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=ZI(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=XI(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=JI(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var Oz={Firestore:Vp,GeoPoint:Uo,Timestamp:Qe,Blob:Lp,Transaction:jp,WriteBatch:Bp,DocumentReference:yi,DocumentSnapshot:Ko,Query:Yo,QueryDocumentSnapshot:Qo,QuerySnapshot:cu,CollectionReference:za,FieldPath:iD,FieldValue:rD,setLogLevel:Nz,CACHE_SIZE_UNLIMITED:iP};function Fz(t,e){t.INTERNAL.registerComponent(new on("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},Oz)))}function Lz(t){Fz(t,(e,n)=>new Vp(e,n,new tD)),t.registerVersion(Mz,kz)}Lz(Wn);function Vz(t,e=Kn){return new ne(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function EP(t,e){return Vz(t,e)}function jz(t,e){return EP(t,e).pipe(an(void 0),gs(),ye(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function cD(t,e){return EP(t,e).pipe(ye(n=>({payload:n,type:"query"})))}var Up=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:o}=bP(i,n);return new Hp(r,o,this.afs)}snapshotChanges(){return jz(this.ref,this.afs.schedulers.outsideAngular).pipe(zt)}valueChanges(e={}){return this.snapshotChanges().pipe(ye(({payload:n})=>e.idField?Re(ee({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return Ct(this.ref.get(e)).pipe(zt)}};function $p(t,e){return cD(t,e).pipe(an(void 0),gs(),ye(n=>{let[i,r]=n,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,c)=>{let u=o.find(f=>f.doc.ref.isEqual(a.ref)),d=i?.payload.docs.find(f=>f.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function IP(t,e,n){return $p(t,n).pipe(Zr((i,r)=>Bz(i,r.map(o=>o.payload),e),[]),or(),ye(i=>i.map(r=>({type:r.type,payload:r}))))}function Bz(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=Uz(t,i))}),t}function sD(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function Uz(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return sD(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return sD(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return sD(t,e.oldIndex,1);break}return t}function DP(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Hp=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=$p(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ye(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(an(void 0),gs(),Ge(([i,r])=>r.length>0||!i),ye(([,i])=>i),zt)}auditTrail(e){return this.stateChanges(e).pipe(Zr((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=DP(e);return IP(this.query,n,this.afs.schedulers.outsideAngular).pipe(zt)}valueChanges(e={}){return cD(this.query,this.afs.schedulers.outsideAngular).pipe(ye(n=>n.payload.docs.map(i=>e.idField?Re(ee({},i.data()),{[e.idField]:i.id}):i.data())),zt)}get(e){return Ct(this.query.get(e)).pipe(zt)}add(e){return this.ref.add(e)}doc(e){return new Up(this.ref.doc(e),this.afs)}},aD=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?$p(this.query,this.afs.schedulers.outsideAngular).pipe(zt):$p(this.query,this.afs.schedulers.outsideAngular).pipe(ye(n=>n.filter(i=>e.indexOf(i.type)>-1)),Ge(n=>n.length>0),zt)}auditTrail(e){return this.stateChanges(e).pipe(Zr((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=DP(e);return IP(this.query,n,this.afs.schedulers.outsideAngular).pipe(zt)}valueChanges(e={}){return cD(this.query,this.afs.schedulers.outsideAngular).pipe(ye(i=>i.payload.docs.map(r=>e.idField?ee({[e.idField]:r.id},r.data()):r.data())),zt)}get(e){return Ct(this.query.get(e)).pipe(zt)}},$z=new O("angularfire2.enableFirestorePersistence"),Hz=new O("angularfire2.firestore.persistenceSettings"),qz=new O("angularfire2.firestore.settings"),zz=new O("angularfire2.firestore.use-emulator");function bP(t,e=n=>n){return{query:e(t),ref:t}}var CP=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,s,a,c,u,d,f,m,y,I,x,A,j,q){this.schedulers=c;let V=df(n,a,i),W=d;f&&Pv(V,a,m,I,x,A,y,j),[this.firestore,this.persistenceEnabled$]=hf(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{let ie=a.runOutsideAngular(()=>V.firestore());if(o&&ie.settings(o),W&&ie.useEmulator(...W),r&&!mo(s)){let J=()=>{try{return Ct(ie.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),nt(!1)}};return[ie,a.runOutsideAngular(J)]}else return[ie,nt(!1)]},[o,W,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:s}=bP(r,i),a=this.schedulers.ngZone.run(()=>o);return new Hp(a,s,this)}collectionGroup(n,i){let r=i||(s=>s),o=this.firestore.collectionGroup(n);return new aD(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new Up(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)(C(Ir),C(uf,8),C($z,8),C(qz,8),C($t),C(te),C(Cn),C(Hz,8),C(zz,8),C(bR,8),C(Sv,8),C(Av,8),C(xv,8),C(Rv,8),C(Mv,8),C(kv,8),C(Vn,8))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Ga=(()=>{let e=class e{constructor(i){this.angularFirestore=i,this.backlogCollectionName="backlog"}getBacklog(){return this.angularFirestore.collection(this.backlogCollectionName).valueChanges()}addTaskToBacklog(i){this.angularFirestore.collection(this.backlogCollectionName).add(ee({},i)).catch(r=>console.error("Error during adding Task to database",r))}};e.\u0275fac=function(r){return new(r||e)(C(CP))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Wz=()=>["mk-blue-button"],TP=(()=>{let e=class e{constructor(i){this.storageService=i}addTask(){if(this.newTaskSummary!==""){let i=new Ks(mv(),this.newTaskSummary,Fi.TODO,[]);this.storageService.addTaskToBacklog(i),this.newTaskSummary=""}}};e.\u0275fac=function(r){return new(r||e)(N(Ga))},e.\u0275cmp=fe({type:e,selectors:[["add-task"]],standalone:!0,features:[pe],decls:3,vars:4,consts:[[1,"mk-flex","mk-items-center"],["placeholder","Type your task",1,"mk-w-96","mk-h-11","mk-border-borderColor","mk-border-2","mk-border-solid","mk-rounded-xl","mk-text-3xl","mk-bg-background","mk-text-content","mk-pl-1",3,"ngModelChange","keyup.enter","ngModel"],[1,"mk-pl-2",3,"click","classes","content"]],template:function(r,o){r&1&&(Z(0,"div",0)(1,"input",1),Gc("ngModelChange",function(a){return lh(o.newTaskSummary,a)||(o.newTaskSummary=a),a}),Me("keyup.enter",function(){return o.addTask()}),Q(),Z(2,"generic-button",2),Me("click",function(){return o.addTask()}),Q()()),r&2&&(be(),zc("ngModel",o.newTaskSummary),be(),ke("classes",ho(3,Wz))("content","Add"))},dependencies:[gt,si,_r,Zs,_l,Xs],encapsulation:2});let t=e;return t})();var Wa=(()=>{let e=class e{constructor(){}drop(i){i.previousContainer===i.container?dv(i.container.data,i.previousIndex,i.currentIndex):(Jx(i.previousContainer.data,i.container.data,i.previousIndex,i.currentIndex),i.previousContainer.data.filter(r=>r.id!==i.container.data[i.currentIndex].id),i.item.data.editHistory.push(new Li(new Date,vr.REPLANNED,i.previousContainer.id,i.container.id)))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var qp=Ni("[List ID] Add List ID",Bs()),zp=Ni("[List ID] Change List ID",Bs());var Kz=Ih("listIDs"),SP=tl(Kz,t=>t);var Hr=(()=>{let e=class e{constructor(i){this.store=i}generateListID(i){return this.store.dispatch(qp({listID:i})),i}changeListID(i,r){return this.store.dispatch(zp({previousListID:i,currentListID:r})),r}getAllListID(){return this.store.select(SP)}};e.\u0275fac=function(r){return new(r||e)(C(Ln))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var AP=(()=>{let e=class e{constructor(i,r,o,s,a){this.addNewTaskService=i,this.taskPositionService=r,this.destroyRef=o,this.changeDetectorRef=s,this.listIDsService=a,this.id=this.listIDsService.generateListID("backlog")}ngOnInit(){this.observeBacklog(),this.observeListIDs()}taskDrop(i){this.taskPositionService.drop(i),i.item.data.status=Fi.TODO}observeBacklog(){this.addNewTaskService.getBacklog().pipe(Ht(this.destroyRef)).subscribe(i=>{this.backlogTasks=i,this.changeDetectorRef.detectChanges()})}observeListIDs(){this.listIDsService.getAllListID().pipe(Ht(this.destroyRef)).subscribe(i=>{this.listIDs=i,this.changeDetectorRef.detectChanges()})}};e.\u0275fac=function(r){return new(r||e)(N(Ga),N(Wa),N(wt),N(ct),N(Hr))},e.\u0275cmp=fe({type:e,selectors:[["backlog"]],standalone:!0,features:[pe],decls:5,vars:4,consts:[["id","backlog-container",1,"mk-flex","mk-flex-col","mk-h-full","mk-items-center"],[1,"mk-pb-2"],[1,"mk-pb-1.5"],["cdkDropList","",3,"cdkDropListDropped","listOfTasks","cdkDropListConnectedTo","cdkDropListData","id"]],template:function(r,o){r&1&&(Z(0,"div",0)(1,"list-header",1),He(2," BACKLOG "),Q(),at(3,"add-task",2),Z(4,"task-list",3),Me("cdkDropListDropped",function(a){return o.taskDrop(a)}),Q()()),r&2&&(be(4),ke("listOfTasks",o.backlogTasks)("cdkDropListConnectedTo",o.listIDs)("cdkDropListData",o.backlogTasks)("id",o.id))},dependencies:[ta,of,gt,si,ea,rf,TP],encapsulation:2});let t=e;return t})();var Qz=()=>["mk-blue-button","mk-w-40"],xP=(()=>{let e=class e{constructor(){this.newListEventEmitter=new we}onNewListClick(){this.newListEventEmitter.emit()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["new-list"]],outputs:{newListEventEmitter:"newListEventEmitter"},standalone:!0,features:[pe],decls:1,vars:3,consts:[[3,"click","content","classes"]],template:function(r,o){r&1&&(Z(0,"generic-button",0),Me("click",function(){return o.onNewListClick()}),Q()),r&2&&ke("content","New List")("classes",ho(2,Qz))},dependencies:[Xs],encapsulation:2});let t=e;return t})();var RP=(()=>{let e=class e{constructor(i,r,o,s,a){this.destroyRef=i,this.changeDetectorRef=r,this.storageService=o,this.taskPositionService=s,this.listIDsService=a,this.toDoList=[],this.id=this.listIDsService.generateListID("to do list")}ngOnInit(){this.observeListIDs()}taskDrop(i){this.taskPositionService.drop(i)}observeListIDs(){this.listIDsService.getAllListID().pipe(Ht(this.destroyRef)).subscribe(i=>{this.listIDs=i,this.changeDetectorRef.detectChanges()})}};e.\u0275fac=function(r){return new(r||e)(N(wt),N(ct),N(Ga),N(Wa),N(Hr))},e.\u0275cmp=fe({type:e,selectors:[["to-do-list"]],standalone:!0,features:[pe],decls:4,vars:4,consts:[["id","todolist-container",1,"mk-flex","mk-flex-col","mk-h-full","mk-items-center","mk-justify-evenly"],[1,"mk-pb-2"],["cdkDropList","",3,"cdkDropListDropped","listOfTasks","cdkDropListConnectedTo","cdkDropListData","id"]],template:function(r,o){r&1&&(Z(0,"div",0)(1,"list-header",1),He(2," TO DO LIST "),Q(),Z(3,"task-list",2),Me("cdkDropListDropped",function(a){return o.taskDrop(a)}),Q()()),r&2&&(be(3),ke("listOfTasks",o.toDoList)("cdkDropListConnectedTo",o.listIDs)("cdkDropListData",o.toDoList)("id",o.id))},dependencies:[of,ta,si,gt,ea],encapsulation:2,changeDetection:0});let t=e;return t})();var MP=(()=>{let e=class e{constructor(){this.newListEventEmitter=new we}onNewListClick(){this.newListEventEmitter.emit()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["app-header-component"]],outputs:{newListEventEmitter:"newListEventEmitter"},standalone:!0,features:[pe],decls:3,vars:0,consts:[[1,"mk-relative","mk-pl-4","mk-pt-4","mk-h-full","mk-flex","mk-flex-row-reverse","mk-justify-around","mk-w-64","mk-bg-background"],[3,"newListEventEmitter"]],template:function(r,o){r&1&&(Z(0,"div",0)(1,"new-list",1),Me("newListEventEmitter",function(){return o.onNewListClick()}),Q(),at(2,"theme-mode-switcher"),Q())},dependencies:[xP,sR],encapsulation:2});let t=e;return t})();var Ka=(()=>{let e=class e{constructor(){this._listName=new z,this.listName$=this._listName.asObservable()}updateListName(i){this._listName.next(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();var PP=(()=>{let e=class e{constructor(i){this.genericListNameService=i}ngOnInit(){this.onTitleChange()}onTitleChange(){this.genericListNameService.updateListName(this.title)}};e.\u0275fac=function(r){return new(r||e)(N(Ka))},e.\u0275cmp=fe({type:e,selectors:[["generic-list-header"]],inputs:{title:"title"},standalone:!0,features:[pe],decls:1,vars:1,consts:[["type","text",1,"mk-text-6xl","mk-text-center","mk-max-w-[450px]","mk-w-fit","mk-h-[60px]","mk-bg-background","mk-text-content",3,"ngModelChange","keyup.enter","blur","ngModel"]],template:function(r,o){r&1&&(Z(0,"input",0),Gc("ngModelChange",function(a){return lh(o.title,a)||(o.title=a),a}),Me("keyup.enter",function(){return o.onTitleChange()})("blur",function(){return o.onTitleChange()}),Q()),r&2&&zc("ngModel",o.title)},dependencies:[si,_r,Zs,_l],encapsulation:2});let t=e;return t})();var NP=(()=>{let e=class e{constructor(i,r,o,s,a){this.destroyRef=i,this.changeDetectorRef=r,this.taskPositionService=o,this.listIDsService=s,this.genericListNameService=a,this.genericList=[]}ngOnInit(){this.observeListIDs(),this.observeListName()}taskDrop(i){this.taskPositionService.drop(i)}observeListName(){this.genericListNameService.listName$.pipe(Ht(this.destroyRef)).subscribe(i=>{this.id=this.listIDsService.changeListID(this.listName,i),this.listName=i})}observeListIDs(){this.listIDsService.getAllListID().pipe(Ht(this.destroyRef)).subscribe(i=>{this.listIDs=i,this.changeDetectorRef.detectChanges()})}};e.\u0275fac=function(r){return new(r||e)(N(wt),N(ct),N(Wa),N(Hr),N(Ka))},e.\u0275cmp=fe({type:e,selectors:[["generic-list"]],standalone:!0,features:[At([Ka]),pe],decls:3,vars:5,consts:[[1,"mk-flex","mk-flex-col","mk-h-full","mk-items-center","mk-justify-evenly"],[1,"mk-pb-2",3,"title"],["cdkDropList","",3,"cdkDropListDropped","listOfTasks","cdkDropListConnectedTo","cdkDropListData","id"]],template:function(r,o){r&1&&(Z(0,"div",0),at(1,"generic-list-header",1),Z(2,"task-list",2),Me("cdkDropListDropped",function(a){return o.taskDrop(a)}),Q()()),r&2&&(be(),ke("title",o.listName),be(),ke("listOfTasks",o.genericList)("cdkDropListConnectedTo",o.listIDs)("cdkDropListData",o.genericList)("id",o.id))},dependencies:[ta,si,gt,ea,PP],styles:["[_nghost-%COMP%]{height:fit-content;padding-left:.75rem;padding-right:.75rem;padding-top:4rem}"],changeDetection:0});let t=e;return t})();var Wp=(()=>{let e=class e{onDragStart(i){let r=i.currentTarget;i.dataTransfer?.setData("text/plain",r.id)}onDrop(i){i.preventDefault();let r=i.dataTransfer?.getData("text/plain");if(!r)return;let o=document.getElementById(r),s=i.currentTarget;if(o&&s){let a=s.parentNode,c=document.createElement("div");a?.insertBefore(c,s),s.nextSibling?a?.insertBefore(s,o):a?.appendChild(s),a?.replaceChild(o,c)}}allowDrop(i){i.preventDefault()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var FP=(()=>{let e=class e{constructor(i,r,o){this.listIDsService=i,this.rendererFactory=r,this.listPositionService=o,this.componentCounter=0,this.renderer=this.rendererFactory.createRenderer(null,null)}createGenericList(i){this.listComponentRef=i.createComponent(NP),this.setInitialListPropertiesValues(),this.setDragAndDropHandlers()}setDragAndDropHandlers(){let i=this.listComponentRef.location.nativeElement}setInitialListPropertiesValues(){this.componentCounter++,this.listComponentRef.instance.listName=`LIST-${this.componentCounter}`,this.listComponentRef.instance.id=this.listIDsService.generateListID(this.listComponentRef.instance.listName)}};e.\u0275fac=function(r){return new(r||e)(C(Hr),C(Ai),C(Wp))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Zz=["genericListContainer"],LP=(()=>{let e=class e{constructor(i,r){this.genericListCreatorService=i,this.listPositionService=r}createGenericList(){this.genericListCreatorService.createGenericList(this.container)}onDragStart(i){}onDrop(i){}allowDrop(i){}};e.\u0275fac=function(r){return new(r||e)(N(FP),N(Wp))},e.\u0275cmp=fe({type:e,selectors:[["main-component"]],viewQuery:function(r,o){if(r&1&&$c(Zz,5,un),r&2){let s;Hc(s=qc())&&(o.container=s.first)}},standalone:!0,features:[pe],decls:6,vars:0,consts:[["genericListContainer",""],[1,"mk-h-20","mk-block","mk-w-fit",3,"newListEventEmitter"],[1,"mk-flex","mk-justify-between","mk-h-fit"],["id","backlog",1,"mk-px-3","mk-pt-2.5","mk-h-fit"],["id","todolist",1,"mk-px-3","mk-h-fit","mk-pt-16"]],template:function(r,o){if(r&1){let s=uS();Z(0,"app-header-component",1),Me("newListEventEmitter",function(){return WC(s),KC(o.createGenericList())}),Q(),Z(1,"div",2),at(2,"backlog",3)(3,"to-do-list",4),Ky(4,null,0),Q()}},dependencies:[AP,RP,MP],encapsulation:2});let t=e;return t})();var lu={production:!1,firebaseConfig:{apiKey:"AIzaSyCDLUXrzaxZxmiZH3Ux6iDnxAIyQS1-taY",authDomain:"todolist-c39d9.firebaseapp.com",projectId:"todolist-c39d9",storageBucket:"todolist-c39d9.appspot.com",messagingSenderId:"246949119104",appId:"1:246949119104:web:65767b78cb072d0990d265",measurementId:"G-S2FRHXVLG9"}};var VP=(()=>{let e=class e{constructor(){this.title="todolist"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["app-root"]],standalone:!0,features:[At([{provide:Ir,useValue:lu.firebaseConfig}]),pe],decls:1,vars:0,template:function(r,o){r&1&&at(0,"main-component")},dependencies:[gt,LP],encapsulation:2});let t=e;return t})();var jP=[],Xz=Dh(jP,$s(qp,(t,{listID:e})=>[...t,e]),$s(zp,(t,{previousListID:e,currentListID:n})=>t.map(i=>i===e?n:i)));function BP(t=jP,e){return Xz(t,e)}var UP="auth",uu=class{constructor(e){return e}},du=class{constructor(){return bo(UP)}};var dD=new O("angularfire2.auth-instances");function XG(t,e){let n=ia(UP,t,e);return n&&new uu(n)}function JG(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new uu(i)}}var e4={provide:du,deps:[[new vt,dD]]},t4={provide:uu,useFactory:XG,deps:[[new vt,dD],Bn]};function $P(t,...e){return ze("angularfire",jn.full,"auth"),Xt([t4,e4,{provide:dD,useFactory:JG(t),multi:!0,deps:[te,We,Cn,Vi,[new vt,Vn],...e]}])}var HP=wr(Am,!0);var hu=class{constructor(e){return e}},qP="firestore",hD=class{constructor(){return bo(qP)}};var fD=new O("angularfire2.firestore-instances");function n4(t,e){let n=ia(qP,t,e);return n&&new hu(n)}function i4(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new hu(i)}}var r4={provide:hD,deps:[[new vt,fD]]},o4={provide:hu,useFactory:n4,deps:[[new vt,fD],Bn]};function pD(t,...e){return ze("angularfire",jn.full,"fst"),Xt([o4,r4,{provide:fD,useFactory:i4(t),multi:!0,deps:[te,We,Cn,Vi,[new vt,du],[new vt,Vn],...e]}])}var mD=wr(rP,!0);var WP="@firebase/installations",vD="0.6.7";var KP=1e4,QP=`w:${vD}`,YP="FIS_v2",s4="https://firebaseinstallations.googleapis.com/v1",a4=60*60*1e3,c4="installations",l4="Installations";var u4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Xo=new os(c4,l4,u4);function ZP(t){return t instanceof Pu&&t.code.includes("request-failed")}function XP({projectId:t}){return`${s4}/projects/${t}/installations`}function JP(t){return{token:t.token,requestStatus:2,expiresIn:h4(t.expiresIn),creationTime:Date.now()}}function eN(t,e){return T(this,null,function*(){let i=(yield e.json()).error;return Xo.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function tN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function d4(t,{refreshToken:e}){let n=tN(t);return n.append("Authorization",f4(e)),n}function nN(t){return T(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function h4(t){return Number(t.replace("s","000"))}function f4(t){return`${YP} ${t}`}function p4(i,r){return T(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let o=XP(t),s=tN(t),a=e.getImmediate({optional:!0});if(a){let f=yield a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}let c={fid:n,authVersion:YP,appId:t.appId,sdkVersion:QP},u={method:"POST",headers:s,body:JSON.stringify(c)},d=yield nN(()=>fetch(o,u));if(d.ok){let f=yield d.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:JP(f.authToken)}}else throw yield eN("Create Installation",d)})}function iN(t){return new Promise(e=>{setTimeout(e,t)})}function m4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var g4=/^[cdef][\w-]{21}$/,_D="";function y4(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=_4(t);return g4.test(n)?n:_D}catch{return _D}}function _4(t){return m4(t).substr(0,22)}function Qp(t){return`${t.appName}!${t.appId}`}var rN=new Map;function oN(t,e){let n=Qp(t);sN(n,e),v4(n,e)}function sN(t,e){let n=rN.get(t);if(n)for(let i of n)i(e)}function v4(t,e){let n=w4();n&&n.postMessage({key:t,fid:e}),E4()}var Zo=null;function w4(){return!Zo&&"BroadcastChannel"in self&&(Zo=new BroadcastChannel("[Firebase] FID Change"),Zo.onmessage=t=>{sN(t.data.key,t.data.fid)}),Zo}function E4(){rN.size===0&&Zo&&(Zo.close(),Zo=null)}var I4="firebase-installations-database",D4=1,Jo="firebase-installations-store",gD=null;function wD(){return gD||(gD=mc(I4,D4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Jo)}}})),gD}function Kp(t,e){return T(this,null,function*(){let n=Qp(t),r=(yield wD()).transaction(Jo,"readwrite"),o=r.objectStore(Jo),s=yield o.get(n);return yield o.put(e,n),yield r.done,(!s||s.fid!==e.fid)&&oN(t,e.fid),e})}function aN(t){return T(this,null,function*(){let e=Qp(t),i=(yield wD()).transaction(Jo,"readwrite");yield i.objectStore(Jo).delete(e),yield i.done})}function Yp(t,e){return T(this,null,function*(){let n=Qp(t),r=(yield wD()).transaction(Jo,"readwrite"),o=r.objectStore(Jo),s=yield o.get(n),a=e(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield r.done,a&&(!s||s.fid!==a.fid)&&oN(t,a.fid),a})}function ED(t){return T(this,null,function*(){let e,n=yield Yp(t.appConfig,i=>{let r=b4(i),o=C4(t,r);return e=o.registrationPromise,o.installationEntry});return n.fid===_D?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function b4(t){let e=t||{fid:y4(),registrationStatus:0};return cN(e)}function C4(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let r=Promise.reject(Xo.create("app-offline"));return{installationEntry:e,registrationPromise:r}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=T4(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:S4(t)}:{installationEntry:e}}function T4(t,e){return T(this,null,function*(){try{let n=yield p4(t,e);return Kp(t.appConfig,n)}catch(n){throw ZP(n)&&n.customData.serverCode===409?yield aN(t.appConfig):yield Kp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function S4(t){return T(this,null,function*(){let e=yield zP(t.appConfig);for(;e.registrationStatus===1;)yield iN(100),e=yield zP(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:i}=yield ED(t);return i||n}return e})}function zP(t){return Yp(t,e=>{if(!e)throw Xo.create("installation-not-found");return cN(e)})}function cN(t){return A4(t)?{fid:t.fid,registrationStatus:0}:t}function A4(t){return t.registrationStatus===1&&t.registrationTime+KP<Date.now()}function x4(i,r){return T(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let o=R4(t,n),s=d4(t,n),a=e.getImmediate({optional:!0});if(a){let f=yield a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}let c={installation:{sdkVersion:QP,appId:t.appId}},u={method:"POST",headers:s,body:JSON.stringify(c)},d=yield nN(()=>fetch(o,u));if(d.ok){let f=yield d.json();return JP(f)}else throw yield eN("Generate Auth Token",d)})}function R4(t,{fid:e}){return`${XP(t)}/${e}/authTokens:generate`}function ID(t,e=!1){return T(this,null,function*(){let n,i=yield Yp(t.appConfig,o=>{if(!lN(o))throw Xo.create("not-registered");let s=o.authToken;if(!e&&P4(s))return o;if(s.requestStatus===1)return n=M4(t,e),o;{if(!navigator.onLine)throw Xo.create("app-offline");let a=O4(o);return n=k4(t,a),a}});return n?yield n:i.authToken})}function M4(t,e){return T(this,null,function*(){let n=yield GP(t.appConfig);for(;n.authToken.requestStatus===1;)yield iN(100),n=yield GP(t.appConfig);let i=n.authToken;return i.requestStatus===0?ID(t,e):i})}function GP(t){return Yp(t,e=>{if(!lN(e))throw Xo.create("not-registered");let n=e.authToken;return F4(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function k4(t,e){return T(this,null,function*(){try{let n=yield x4(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return yield Kp(t.appConfig,i),n}catch(n){if(ZP(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield aN(t.appConfig);else{let i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Kp(t.appConfig,i)}throw n}})}function lN(t){return t!==void 0&&t.registrationStatus===2}function P4(t){return t.requestStatus===2&&!N4(t)}function N4(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+a4}function O4(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function F4(t){return t.requestStatus===1&&t.requestTime+KP<Date.now()}function L4(t){return T(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:i}=yield ED(e);return i?i.catch(console.error):ID(e).catch(console.error),n.fid})}function V4(t,e=!1){return T(this,null,function*(){let n=t;return yield j4(n),(yield ID(n,e)).token})}function j4(t){return T(this,null,function*(){let{registrationPromise:e}=yield ED(t);e&&(yield e)})}function B4(t){if(!t||!t.options)throw yD("App Configuration");if(!t.name)throw yD("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw yD(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function yD(t){return Xo.create("missing-app-config-values",{valueName:t})}var uN="installations",U4="installations-internal",$4=t=>{let e=t.getProvider("app").getImmediate(),n=B4(e),i=Ji(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},H4=t=>{let e=t.getProvider("app").getImmediate(),n=Ji(e,uN).getImmediate();return{getId:()=>L4(n),getToken:r=>V4(n,r)}};function q4(){Mn(new on(uN,$4,"PUBLIC")),Mn(new on(U4,H4,"PRIVATE"))}q4();ze(WP,vD);ze(WP,vD,"esm2017");var z4="/firebase-messaging-sw.js",G4="/firebase-cloud-messaging-push-scope",gN="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",W4="https://fcmregistrations.googleapis.com/v1",yN="google.c.a.c_id",K4="google.c.a.c_l",Q4="google.c.a.ts",Y4="google.c.a.e";var Zp=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(Zp||{});function Ki(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Z4(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),r=new Uint8Array(i.length);for(let o=0;o<i.length;++o)r[o]=i.charCodeAt(o);return r}var DD="fcm_token_details_db",X4=5,dN="fcm_token_object_Store";function J4(t){return T(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(DD))return null;let e=null;return(yield mc(DD,X4,{upgrade:(i,r,o,s)=>T(this,null,function*(){var a;if(r<2||!i.objectStoreNames.contains(dN))return;let c=s.objectStore(dN),u=yield c.index("fcmSenderId").get(t);if(yield c.clear(),!!u){if(r===2){let d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Ki(d.vapidKey)}}}else if(r===3){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ki(d.auth),p256dh:Ki(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ki(d.vapidKey)}}}else if(r===4){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ki(d.auth),p256dh:Ki(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ki(d.vapidKey)}}}}})})).close(),yield Ou(DD),yield Ou("fcm_vapid_details_db"),yield Ou("undefined"),e9(e)?e:null})}function e9(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var t9="firebase-messaging-database",n9=1,fu="firebase-messaging-store",bD=null;function _N(){return bD||(bD=mc(t9,n9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(fu)}}})),bD}function i9(t){return T(this,null,function*(){let e=vN(t),i=yield(yield _N()).transaction(fu).objectStore(fu).get(e);if(i)return i;{let r=yield J4(t.appConfig.senderId);if(r)return yield SD(t,r),r}})}function SD(t,e){return T(this,null,function*(){let n=vN(t),r=(yield _N()).transaction(fu,"readwrite");return yield r.objectStore(fu).put(e,n),yield r.done,e})}function vN({appConfig:t}){return t.appId}var r9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Qt=new os("messaging","Messaging",r9);function o9(t,e){return T(this,null,function*(){let n=yield xD(t),i=wN(e),r={method:"POST",headers:n,body:JSON.stringify(i)},o;try{o=yield(yield fetch(AD(t.appConfig),r)).json()}catch(s){throw Qt.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw Qt.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw Qt.create("token-subscribe-no-token");return o.token})}function s9(t,e){return T(this,null,function*(){let n=yield xD(t),i=wN(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)},o;try{o=yield(yield fetch(`${AD(t.appConfig)}/${e.token}`,r)).json()}catch(s){throw Qt.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw Qt.create("token-update-failed",{errorInfo:s})}if(!o.token)throw Qt.create("token-update-no-token");return o.token})}function a9(t,e){return T(this,null,function*(){let i={method:"DELETE",headers:yield xD(t)};try{let o=yield(yield fetch(`${AD(t.appConfig)}/${e}`,i)).json();if(o.error){let s=o.error.message;throw Qt.create("token-unsubscribe-failed",{errorInfo:s})}}catch(r){throw Qt.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})}function AD({projectId:t}){return`${W4}/projects/${t}/registrations`}function xD(n){return T(this,arguments,function*({appConfig:t,installations:e}){let i=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})})}function wN({p256dh:t,auth:e,endpoint:n,vapidKey:i}){let r={web:{endpoint:n,auth:e,p256dh:t}};return i!==gN&&(r.web.applicationPubKey=i),r}var c9=7*24*60*60*1e3;function l9(t){return T(this,null,function*(){let e=yield d9(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Ki(e.getKey("auth")),p256dh:Ki(e.getKey("p256dh"))},i=yield i9(t.firebaseDependencies);if(i){if(h9(i.subscriptionOptions,n))return Date.now()>=i.createTime+c9?u9(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{yield a9(t.firebaseDependencies,i.token)}catch(r){console.warn(r)}return hN(t.firebaseDependencies,n)}else return hN(t.firebaseDependencies,n)})}function u9(t,e){return T(this,null,function*(){try{let n=yield s9(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield SD(t.firebaseDependencies,i),n}catch(n){throw n}})}function hN(t,e){return T(this,null,function*(){let i={token:yield o9(t,e),createTime:Date.now(),subscriptionOptions:e};return yield SD(t,i),i.token})}function d9(t,e){return T(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Z4(e)})})}function h9(t,e){let n=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,r=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&i&&r&&o}function fN(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return f9(e,t),p9(e,t),m9(e,t),e}function f9(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let i=e.notification.body;i&&(t.notification.body=i);let r=e.notification.image;r&&(t.notification.image=r);let o=e.notification.icon;o&&(t.notification.icon=o)}function p9(t,e){e.data&&(t.data=e.data)}function m9(t,e){var n,i,r,o,s;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(r=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&r!==void 0?r:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(t.fcmOptions.link=a);let c=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}function g9(t){return typeof t=="object"&&!!t&&yN in t}EN("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");EN("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function EN(t,e){let n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}function y9(t){if(!t||!t.options)throw CD("App Configuration Object");if(!t.name)throw CD("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let i of e)if(!n[i])throw CD(i);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function CD(t){return Qt.create("missing-app-config-values",{valueName:t})}var TD=class{constructor(e,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let r=y9(e);this.firebaseDependencies={app:e,appConfig:r,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}};function _9(t){return T(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(z4,{scope:G4}),t.swRegistration.update().catch(()=>{})}catch(e){throw Qt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function v9(t,e){return T(this,null,function*(){if(!e&&!t.swRegistration&&(yield _9(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Qt.create("invalid-sw-registration");t.swRegistration=e}})}function w9(t,e){return T(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=gN)})}function E9(t,e){return T(this,null,function*(){if(!navigator)throw Qt.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Qt.create("permission-blocked");return yield w9(t,e?.vapidKey),yield v9(t,e?.serviceWorkerRegistration),l9(t)})}function I9(t,e,n){return T(this,null,function*(){let i=D9(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[yN],message_name:n[K4],message_time:n[Q4],message_device_time:Math.floor(Date.now()/1e3)})})}function D9(t){switch(t){case Zp.NOTIFICATION_CLICKED:return"notification_open";case Zp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function b9(t,e){return T(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Zp.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(fN(n)):t.onMessageHandler.next(fN(n)));let i=n.data;g9(i)&&i[Y4]==="1"&&(yield I9(t,n.messageType,i))})}var pN="@firebase/messaging",mN="0.12.9";var C9=t=>{let e=new TD(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>b9(e,n)),e},T9=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:i=>E9(e,i)}};function S9(){Mn(new on("messaging",C9,"PUBLIC")),Mn(new on("messaging-internal",T9,"PRIVATE")),ze(pN,mN),ze(pN,mN,"esm2017")}function RD(){return T(this,null,function*(){try{yield Ub()}catch{return!1}return typeof window<"u"&&rs()&&$b()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function IN(t=er()){return RD().then(e=>{if(!e)throw Qt.create("unsupported-browser")},e=>{throw Qt.create("indexed-db-unsupported")}),Ji(Ue(t),"messaging").getImmediate()}S9();var pu=class{constructor(e){return e}},DN="messaging",MD=class{constructor(){return bo(DN)}};var bN="__angularfire_symbol__messagingIsSupported",kD="__angularfire_symbol__messagingIsSupportedValue";globalThis[bN]||=RD().then(t=>globalThis[kD]=t).catch(()=>globalThis[kD]=!1);var Xp={async:()=>globalThis[bN],sync:()=>{let t=globalThis[kD];if(t===void 0)throw new Error(cR("Messaging"));return t}},PD=new O("angularfire2.messaging-instances");function A9(t,e){if(!Xp.sync())return null;let n=ia(DN,t,e);return n&&new pu(n)}function x9(t){return(e,n)=>{if(!Xp.sync())return null;let i=e.runOutsideAngular(()=>t(n));return new pu(i)}}var R9={provide:MD,deps:[[new vt,PD]]},M9={provide:pu,useFactory:A9,deps:[[new vt,PD],Bn]};function CN(t,...e){return ze("angularfire",jn.full,"fcm"),Xt([M9,R9,{provide:Zy,useValue:Xp.async,multi:!0},{provide:PD,useFactory:x9(t),multi:!0,deps:[te,We,Cn,Vi,...e]}])}var use=Xp.async;var TN=wr(IN,!0);VS(VP,{providers:[{provide:Ir,useValue:lu.firebaseConfig},_v(()=>vv(lu.firebaseConfig)),pD(()=>mD()),cA({theme:wA,listIDs:BP}),gA([vA]),_v(()=>vv({projectId:"todolist-c39d9",appId:"1:246949119104:web:65767b78cb072d0990d265",storageBucket:"todolist-c39d9.appspot.com",apiKey:"AIzaSyCDLUXrzaxZxmiZH3Ux6iDnxAIyQS1-taY",authDomain:"todolist-c39d9.firebaseapp.com",messagingSenderId:"246949119104",measurementId:"G-S2FRHXVLG9"})),$P(()=>HP()),pD(()=>mD()),CN(()=>TN())]});
